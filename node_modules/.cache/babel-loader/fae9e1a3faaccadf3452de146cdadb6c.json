{"ast":null,"code":"import _slicedToArray from\"C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{StaticRowElement,PopupMenu}from'../../Elements/index';import{makeStyles}from'@material-ui/core/styles';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';var useStyles=makeStyles(function(theme){return{root:{flexGrow:1,width:'100%'},paper:{padding:theme.spacing(2),textAlign:'center',color:theme.palette.text.secondary}};});function initializeSelection(initial){var selected=initial.selected;var isSel=selected!==null&&selected!==undefined;var ret={sauces:'0',qty:'0'};if(isSel){var menuType=initial.menuType;var selMenuType=selected.hasOwnProperty(menuType)?selected[menuType]:false;if(selMenuType){var item=initial.itemList.find(function(i){return selMenuType.hasOwnProperty(i.id);});if(item!==null&&item!==undefined){var selItem=selMenuType[item.id];var q=selItem.hasOwnProperty('qty')?selItem.qty:'2';ret.qty=q;ret.sauces=item.id;}}}return ret;}export default function SauceStep(props){var classes=useStyles();var updateItem=props.updateItem;var stepData=props.stepData;var type=stepData.menuType;var itemTypeCaption=stepData.caption;var content=stepData.content.values.map(function(i){var id=i.id;var caption=i.caption;var description=i.description;return{id:id,caption:caption,description:description,isDisabled:false};});var _React$useState=React.useState('0'),_React$useState2=_slicedToArray(_React$useState,2),sauce=_React$useState2[0],setSauce=_React$useState2[1];var _React$useState3=React.useState('0'),_React$useState4=_slicedToArray(_React$useState3,2),qty=_React$useState4[0],setQty=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),initialized=_React$useState6[0],setInitialzied=_React$useState6[1];var initialSelect=function initialSelect(p){return initializeSelection(p);};if(!initialized){var ini=initialSelect({selected:props.selected,menuType:stepData.menuType,itemList:stepData.content.values});setSauce(ini.sauces);setQty(ini.qty);setInitialzied(true);}var _handleMenuSelect=function handleMenuSelect(input){var chk=function chk(p){var item={itemID:sauce,values:{qty:qty,half:'2'}};var type=p.type;var value=p.value;if(type==='qty'&&qty!==value){item.values.qty=value;setQty(value);return item;}else if(type==='sauces'&&sauce!==value){item.itemID=value;item.values.qty='2';setSauce(value);setQty('2');return item;}else{return false;}};var doUpdate=chk(input);if(doUpdate){updateItem({item:doUpdate,replace:true});}};var selItem=sauce!=='0'?content.find(function(i){return i.id===sauce;}):'0';var selName=selItem!==undefined&&selItem!=='0'?selItem.caption:\"No \".concat(itemTypeCaption,\" selected\");var qtyVal=stepData.content.qty.find(function(i){return i.id===qty;});var maxQty=stepData.content.qty.length;var sel={maxQty:maxQty,qty:parseInt(qty),half:2};var description={name:selName,qty:qtyVal!==undefined?qtyVal.caption:'',half:''};var captions={qty:qtyVal!==undefined?qtyVal.description:'',half:''};if(!initialized){return false;}return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:1,children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsx(PopupMenu,{type:type,itemTypeCaption:itemTypeCaption,selected:parseInt(selItem),isDisabled:false,items:content,handleMenuSelect:function handleMenuSelect(p){_handleMenuSelect(p);}})})})}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsx(StaticRowElement,{typeCaption:itemTypeCaption,itemID:sauce,sel:sel,description:description,captions:captions,hasHalf:false,hasQty:true,handleMenuSelect:function handleMenuSelect(p){_handleMenuSelect(p);}})})})})]})});}","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/AppElements/Steps/MenuSteps/Sauce.jsx"],"names":["React","StaticRowElement","PopupMenu","makeStyles","Paper","Grid","useStyles","theme","root","flexGrow","width","paper","padding","spacing","textAlign","color","palette","text","secondary","initializeSelection","initial","selected","isSel","undefined","ret","sauces","qty","menuType","selMenuType","hasOwnProperty","item","itemList","find","i","id","selItem","q","SauceStep","props","classes","updateItem","stepData","type","itemTypeCaption","caption","content","values","map","description","isDisabled","useState","sauce","setSauce","setQty","initialized","setInitialzied","initialSelect","p","ini","handleMenuSelect","input","chk","itemID","half","value","doUpdate","replace","selName","qtyVal","maxQty","length","sel","parseInt","name","captions"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {StaticRowElement, PopupMenu} from '../../Elements/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width:'100%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction initializeSelection(initial){\r\n  const selected = initial.selected;  \r\n  const isSel = selected!==null&&selected!==undefined;\r\n  const ret = {sauces:'0', qty:'0'};\r\n  if(isSel){\r\n    const menuType = initial.menuType;\r\n    const selMenuType = selected.hasOwnProperty(menuType)?selected[menuType]:false;\r\n    if(selMenuType){\r\n      const item = initial.itemList.find((i)=>(selMenuType.hasOwnProperty(i.id)));\r\n      if(item!==null&&item!==undefined){\r\n        const selItem = selMenuType[item.id];      \r\n        const q = selItem.hasOwnProperty('qty')?selItem.qty:'2';\r\n        ret.qty = q; \r\n        ret.sauces = item.id;\r\n      }     \r\n    }\r\n  } \r\n  return ret;\r\n}\r\nexport default function SauceStep(props){\r\n  const classes = useStyles();    \r\n  const updateItem = props.updateItem;\r\n  const stepData = props.stepData;\r\n  const type = stepData.menuType;\r\n  const itemTypeCaption = stepData.caption;  \r\n  const content = stepData.content.values.map((i)=>{\r\n    const id = i.id;\r\n    const caption = i.caption;\r\n    const description = i.description;    \r\n    return {id:id, caption:caption, description:description, isDisabled:false};\r\n  });\r\n  \r\n  const [sauce, setSauce] = React.useState('0');\r\n  const [qty, setQty] = React.useState('0');\r\n  const [initialized, setInitialzied] = React.useState(false);\r\n  const initialSelect = (p)=>{\r\n    return initializeSelection(p)\r\n  }\r\n  if(!initialized){\r\n    const ini = initialSelect({selected:props.selected,menuType:stepData.menuType, itemList:stepData.content.values})\r\n    setSauce(ini.sauces);\r\n    setQty(ini.qty);\r\n    setInitialzied(true)\r\n  }\r\n  const handleMenuSelect = (input)=>{\r\n    const chk = (p)=>{\r\n      const item ={itemID:sauce,values:{qty:qty, half:'2'}};\r\n      const type=p.type;\r\n      const value = p.value;    \r\n      if(type==='qty'&&qty!==value){        \r\n        item.values.qty = value;\r\n        setQty(value);\r\n        return item;\r\n      } else if(type==='sauces'&&sauce!==value){\r\n        item.itemID = value;\r\n        item.values.qty='2';\r\n        setSauce(value);\r\n        setQty('2');\r\n        return item;\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    const doUpdate = chk(input);\r\n    if(doUpdate){\r\n      updateItem({item:doUpdate,replace:true})\r\n    }\r\n  }\r\n  const selItem = sauce!=='0'?content.find((i)=>(i.id===sauce)):'0';\r\n  const selName =selItem!==undefined&&selItem!=='0'?selItem.caption:`No ${itemTypeCaption} selected`;  \r\n  const qtyVal = stepData.content.qty.find((i)=>(i.id===qty));  \r\n  const maxQty =stepData.content.qty.length;\r\n  const sel = {maxQty:maxQty, qty:parseInt(qty), half:2}\r\n  const description = {name:selName, qty:(qtyVal!==undefined?qtyVal.caption:''),half:''};\r\n  const captions = {qty:(qtyVal!==undefined?qtyVal.description:''),half:''};\r\n  if(!initialized){return false}\r\n  return(   \r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <Paper className={classes.paper}>\r\n              <PopupMenu type={type} itemTypeCaption={itemTypeCaption} selected={parseInt(selItem)} isDisabled={false} items={content} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <Paper className={classes.paper}>\r\n              <StaticRowElement \r\n              typeCaption={itemTypeCaption} itemID={sauce} sel={sel} description={description} captions={captions} \r\n              hasHalf={false} hasQty={true} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n            </Paper> \r\n          </Grid> \r\n        </Grid> \r\n      </Grid>      \r\n    </div>             \r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}