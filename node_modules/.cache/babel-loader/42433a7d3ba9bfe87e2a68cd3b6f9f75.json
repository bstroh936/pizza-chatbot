{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _classPrivateFieldLooseBase from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classPrivateFieldLooseBase\";import _classPrivateFieldLooseKey from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classPrivateFieldLooseKey\";import{lookup,lookupByCoords}from'zipcodes';import stores from'./stores.json';var _geo=_classPrivateFieldLooseKey(\"geo\");var _user=_classPrivateFieldLooseKey(\"user\");var _store=_classPrivateFieldLooseKey(\"store\");var _search=_classPrivateFieldLooseKey(\"search\");var Location=/*#__PURE__*/function(){function Location(){_classCallCheck(this,Location);Object.defineProperty(this,_geo,{writable:true,value:null});Object.defineProperty(this,_user,{writable:true,value:null});Object.defineProperty(this,_store,{writable:true,value:null});Object.defineProperty(this,_search,{writable:true,value:null});this.storeInfo=this.storeInfo.bind(this);this.initLoc=this.initLoc.bind(this);this.resolveGeoLoc=this.resolveGeoLoc.bind(this);_classPrivateFieldLooseBase(this,_geo)[_geo]={isResolved:false,entryErr:false,errMsg:'',zip:'',cityState:''};_classPrivateFieldLooseBase(this,_user)[_user]={isResolved:false,entryErr:false,errMsg:'',zip:'',cityState:''};_classPrivateFieldLooseBase(this,_store)[_store]={current:'0',previous:'0',didChange:false};_classPrivateFieldLooseBase(this,_search)[_search]={method:'',searchLoc:'',isResolved:false,hasErr:false,errMsg:''};}_createClass(Location,[{key:\"storeInfo\",value:function storeInfo(i){var s=stores.stores.find(function(r){return r.id===i;});return s;}},{key:\"initLoc\",value:function initLoc(){var _this=this;return this.resolveGeoLoc().then(function(data){if(data!=='GeoFail'&&(data!==null||data!=='')){var c=data.city;var s=data.state;_classPrivateFieldLooseBase(_this,_geo)[_geo]={zip:data.zip,cityState:c+', '+s,isResolved:true,entryErr:false,errMsg:''};}else if(data==='GeoFail'){_classPrivateFieldLooseBase(_this,_geo)[_geo]={zip:'',cityState:'',isResolved:true,entryErr:true,errMsg:'Geo Location is Disabled'};}else{_classPrivateFieldLooseBase(_this,_geo)[_geo]={zip:'',cityState:'',isResolved:false,entryErr:true,errMsg:'Geo Location not resolved'};}return _this;});}},{key:\"resolveGeoLoc\",value:function resolveGeoLoc(){var locOpt={timeout:5000,maximumAge:0};return new Promise(function(resolve,reject){if(\"geolocation\"in navigator){navigator.geolocation.getCurrentPosition(function(position){var lat=position.coords.latitude;var long=position.coords.longitude;var tZip=lookupByCoords(lat,long);resolve(tZip);},function(error){console.log('Error getting location');console.error(\"Error Code = \"+error.code+\" - \"+error.message);var response='GeoFail';resolve(response);},locOpt);}},function(){console.log(\"Promise reject\");});}},{key:\"geoZip\",get:function get(){if(_classPrivateFieldLooseBase(this,_geo)[_geo].isResolved&&!_classPrivateFieldLooseBase(this,_geo)[_geo].entryErr){return _classPrivateFieldLooseBase(this,_geo)[_geo].zip;}else{return'NoGeo';}}},{key:\"geoCityState\",get:function get(){if(_classPrivateFieldLooseBase(this,_geo)[_geo].isResolved&&!this.geoErr){return _classPrivateFieldLooseBase(this,_geo)[_geo].cityState;}else{return'Geo Location Error';}}},{key:\"geoErr\",get:function get(){return _classPrivateFieldLooseBase(this,_geo)[_geo].entryErr;}},{key:\"geoErrMsg\",get:function get(){return this.geoErr?_classPrivateFieldLooseBase(this,_geo)[_geo].errMsg:'';}},{key:\"userZip\",set:function set(val){var z=val.trim();var r=false;var e=false;var m='';var cs='';var l=lookup(z);if(typeof l!==\"undefined\"){var c=l.city;var s=l.state;r=true;cs=c+', '+s;}else{//invalid zip code\nz='';r=false;e=true;m='Enter a Valid US Zip Code';}_classPrivateFieldLooseBase(this,_user)[_user]={isResolved:r,entryErr:e,errMsg:m,zip:z,cityState:cs};},get:function get(){if(_classPrivateFieldLooseBase(this,_user)[_user].isResolved&&!_classPrivateFieldLooseBase(this,_user)[_user].entryErr){return _classPrivateFieldLooseBase(this,_user)[_user].zip;}else{return'NoUser';}}},{key:\"userCityState\",get:function get(){if(_classPrivateFieldLooseBase(this,_user)[_user].isResolved&&!this.userErr){return _classPrivateFieldLooseBase(this,_user)[_user].cityState;}else{return'User Entry Error';}}},{key:\"userErr\",get:function get(){return _classPrivateFieldLooseBase(this,_user)[_user].entryErr;}},{key:\"userErrMsg\",get:function get(){return this.userErr?_classPrivateFieldLooseBase(this,_user)[_user].errMsg:'';}},{key:\"storeLoc\",set:function set(val){var c=_classPrivateFieldLooseBase(this,_store)[_store].current;if(c!==val){_classPrivateFieldLooseBase(this,_store)[_store].didChange=true;_classPrivateFieldLooseBase(this,_store)[_store].previous=c;_classPrivateFieldLooseBase(this,_store)[_store].current=val;}else{_classPrivateFieldLooseBase(this,_store)[_store].didChange=false;}}},{key:\"changed\",get:function get(){return _classPrivateFieldLooseBase(this,_store)[_store].didChange;}},{key:\"curStoreID\",get:function get(){return _classPrivateFieldLooseBase(this,_store)[_store].current;}},{key:\"prevStoreID\",get:function get(){return _classPrivateFieldLooseBase(this,_store)[_store].previous;}},{key:\"curStoreInfo\",get:function get(){var i=_classPrivateFieldLooseBase(this,_store)[_store].current;return this.storeInfo(i);}},{key:\"prevStoreInfo\",get:function get(){var i=_classPrivateFieldLooseBase(this,_store)[_store].previous;return this.storeInfo(i);}},{key:\"searchErr\",get:function get(){return _classPrivateFieldLooseBase(this,_search)[_search].hasErr;}},{key:\"searchErrMsg\",get:function get(){return this.searchErr?_classPrivateFieldLooseBase(this,_search)[_search].errMsg:'';}},{key:\"searchMeth\",get:function get(){if(_classPrivateFieldLooseBase(this,_search)[_search].isResolved){return _classPrivateFieldLooseBase(this,_search)[_search].method;}return'No Search';}},{key:\"searchLoc\",get:function get(){if(_classPrivateFieldLooseBase(this,_search)[_search].isResolved){return _classPrivateFieldLooseBase(this,_search)[_search].searchLoc;}return'No Search';}},{key:\"search\",set:function set(values){_classPrivateFieldLooseBase(this,_search)[_search].method=values.method;_classPrivateFieldLooseBase(this,_search)[_search].searchLoc=values.loc;_classPrivateFieldLooseBase(this,_search)[_search].isResolved=values.res;_classPrivateFieldLooseBase(this,_search)[_search].hasErr=values.err;_classPrivateFieldLooseBase(this,_search)[_search].errMsg=values.errMsg;}},{key:\"storeSearch\",set:function set(method){var values={method:method.method,loc:'',res:false,err:false,errMsg:''};if(values.method==='User Entry'){this.userZip=method.usrStr;if(this.userErr){values.method='';values.err=true;values.errMsg='Invalid Zip Entry';}else{values.loc=this.userCityState;values.res=true;}}else if(values.method==='Geo Locate'){if(this.geoErr){values.method='';values.err=true;values.errMsg='Invalid Geo Location';}else{values.loc=this.geoCityState;values.res=true;}}else{values.method='';values.err=true;values.errMsg='Invalid Search Method';}this.search=values;}}]);return Location;}();export default Location;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/Location.jsx"],"names":["lookup","lookupByCoords","stores","Location","storeInfo","bind","initLoc","resolveGeoLoc","isResolved","entryErr","errMsg","zip","cityState","current","previous","didChange","method","searchLoc","hasErr","i","s","find","r","id","then","data","c","city","state","locOpt","timeout","maximumAge","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","long","longitude","tZip","error","console","log","code","message","response","geoErr","val","z","trim","e","m","cs","l","userErr","searchErr","values","loc","res","err","userZip","usrStr","userCityState","geoCityState","search"],"mappings":"gwBAAA,OAAQA,MAAR,CAAeC,cAAf,KAAoC,UAApC,CACA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,C,2LAEMC,CAAAA,Q,yBAKJ,mBAAa,qFAJN,IAIM,yDAHL,IAGK,0DAFJ,IAEI,2DADH,IACG,GACX,KAAKC,SAAL,CAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB,CACA,KAAKC,OAAL,CAAe,KAAKA,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAf,CACA,KAAKE,aAAL,CAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB,CACA,6CAAY,CACVG,UAAU,CAAE,KADF,CAEVC,QAAQ,CAAE,KAFA,CAGVC,MAAM,CAAE,EAHE,CAIVC,GAAG,CAAE,EAJK,CAKVC,SAAS,CAAE,EALD,CAAZ,CAMA,+CAAa,CACXJ,UAAU,CAAE,KADD,CAEXC,QAAQ,CAAE,KAFC,CAGXC,MAAM,CAAE,EAHG,CAIXC,GAAG,CAAE,EAJM,CAKXC,SAAS,CAAE,EALA,CAAb,CAMA,iDAAc,CACZC,OAAO,CAAE,GADG,CAEZC,QAAQ,CAAE,GAFE,CAGZC,SAAS,CAAE,KAHC,CAAd,CAIA,mDAAe,CACbC,MAAM,CAAE,EADK,CAEbC,SAAS,CAAE,EAFE,CAGbT,UAAU,CAAE,KAHC,CAIbU,MAAM,CAAE,KAJK,CAKbR,MAAM,CAAE,EALK,CAAf,CAOD,C,iEA0JSS,C,CAAE,CACV,GAAMC,CAAAA,CAAC,CAAGlB,MAAM,CAACA,MAAP,CAAcmB,IAAd,CACR,SAACC,CAAD,CAAO,CAAC,MAAOA,CAAAA,CAAC,CAACC,EAAF,GAASJ,CAAhB,CAAmB,CADnB,CAAV,CAGA,MAAOC,CAAAA,CAAP,CACD,C,yCACS,gBACR,MAAQ,MAAKb,aAAL,GACLiB,IADK,CACA,SAAAC,IAAI,CAAI,CACZ,GAAIA,IAAI,GAAG,SAAP,GAAqBA,IAAI,GAAG,IAAP,EAAaA,IAAI,GAAG,EAAzC,CAAJ,CAAkD,CAChD,GAAMC,CAAAA,CAAC,CAAGD,IAAI,CAACE,IAAf,CACA,GAAMP,CAAAA,CAAC,CAAGK,IAAI,CAACG,KAAf,CACA,4BAAA,KAAI,MAAJ,OAAY,CACVjB,GAAG,CAAEc,IAAI,CAACd,GADA,CAEVC,SAAS,CAAEc,CAAC,CAAG,IAAJ,CAAWN,CAFZ,CAGVZ,UAAU,CAAE,IAHF,CAIVC,QAAQ,CAAE,KAJA,CAKVC,MAAM,CAAE,EALE,CAAZ,CAOD,CAVD,IAUO,IAAIe,IAAI,GAAG,SAAX,CAAsB,CAC3B,4BAAA,KAAI,MAAJ,OAAY,CACVd,GAAG,CAAE,EADK,CAEVC,SAAS,CAAE,EAFD,CAGVJ,UAAU,CAAE,IAHF,CAIVC,QAAQ,CAAE,IAJA,CAKVC,MAAM,CAAE,0BALE,CAAZ,CAOD,CARM,IAQA,CACL,4BAAA,KAAI,MAAJ,OAAY,CACVC,GAAG,CAAE,EADK,CAEVC,SAAS,CAAE,EAFD,CAGVJ,UAAU,CAAE,KAHF,CAIVC,QAAQ,CAAE,IAJA,CAKVC,MAAM,CAAE,2BALE,CAAZ,CAOD,CACD,MAAO,CAAA,KAAP,CACD,CA9BK,CAAR,CAgCD,C,qDACc,CACb,GAAMmB,CAAAA,MAAM,CAAG,CACbC,OAAO,CAAE,IADI,CAEbC,UAAU,CAAE,CAFC,CAAf,CAIA,MAAQ,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACvC,GAAG,eAAiBC,CAAAA,SAApB,CAA+B,CAC7BA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyC,SAACC,QAAD,CAAc,CACrD,GAAIC,CAAAA,GAAG,CAAGD,QAAQ,CAACE,MAAT,CAAgBC,QAA1B,CACA,GAAIC,CAAAA,IAAI,CAAGJ,QAAQ,CAACE,MAAT,CAAgBG,SAA3B,CACA,GAAMC,CAAAA,IAAI,CAAG3C,cAAc,CAACsC,GAAD,CAAKG,IAAL,CAA3B,CACAT,OAAO,CAACW,IAAD,CAAP,CACD,CALD,CAKE,SAACC,KAAD,CAAW,CACXC,OAAO,CAACC,GAAR,CAAY,wBAAZ,EACAD,OAAO,CAACD,KAAR,CAAc,gBAAkBA,KAAK,CAACG,IAAxB,CAA+B,KAA/B,CAAuCH,KAAK,CAACI,OAA3D,EACA,GAAMC,CAAAA,QAAQ,CAAG,SAAjB,CAEAjB,OAAO,CAACiB,QAAD,CAAP,CACD,CAXD,CAWErB,MAXF,EAYD,CACF,CAfO,CAeL,UAAI,CACLiB,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACC,CAjBK,CAAR,CAmBD,C,kCAzNY,CACX,GAAG,6CAAUvC,UAAV,EAAwB,CAAC,6CAAUC,QAAtC,CAAgD,CAC9C,MAAO,8CAAUE,GAAjB,CACD,CAFD,IAEO,CACL,MAAO,OAAP,CACD,CACF,C,wCACiB,CAChB,GAAG,6CAAUH,UAAV,EAAwB,CAAC,KAAK2C,MAAjC,CAAyC,CACvC,MAAO,8CAAUvC,SAAjB,CACD,CAFD,IAEO,CACL,MAAO,oBAAP,CACD,CACF,C,kCACW,CACV,MAAO,8CAAUH,QAAjB,CACD,C,qCACc,CACb,MAAO,MAAK0C,MAAL,CAAY,6CAAUzC,MAAtB,CAA6B,EAApC,CACD,C,kCACW0C,G,CAAI,CACd,GAAIC,CAAAA,CAAC,CAAGD,GAAG,CAACE,IAAJ,EAAR,CACA,GAAIhC,CAAAA,CAAC,CAAG,KAAR,CACA,GAAIiC,CAAAA,CAAC,CAAG,KAAR,CACA,GAAIC,CAAAA,CAAC,CAAG,EAAR,CACA,GAAIC,CAAAA,EAAE,CAAG,EAAT,CACA,GAAMC,CAAAA,CAAC,CAAG1D,MAAM,CAACqD,CAAD,CAAhB,CACA,GAAG,MAAOK,CAAAA,CAAP,GAAY,WAAf,CAA2B,CACzB,GAAMhC,CAAAA,CAAC,CAAGgC,CAAC,CAAC/B,IAAZ,CACA,GAAMP,CAAAA,CAAC,CAAGsC,CAAC,CAAC9B,KAAZ,CACAN,CAAC,CAAG,IAAJ,CACAmC,EAAE,CAAG/B,CAAC,CAAG,IAAJ,CAAWN,CAAhB,CACD,CALD,IAKO,CACL;AACAiC,CAAC,CAAG,EAAJ,CACA/B,CAAC,CAAG,KAAJ,CACAiC,CAAC,CAAG,IAAJ,CACAC,CAAC,CAAG,2BAAJ,CACD,CACD,+CAAa,CACXhD,UAAU,CAAEc,CADD,CAEXb,QAAQ,CAAE8C,CAFC,CAGX7C,MAAM,CAAE8C,CAHG,CAIX7C,GAAG,CAAE0C,CAJM,CAKXzC,SAAS,CAAE6C,EALA,CAAb,CAOD,C,mBACa,CACZ,GAAG,+CAAWjD,UAAX,EAAyB,CAAC,+CAAWC,QAAxC,CAAkD,CAChD,MAAO,gDAAWE,GAAlB,CACD,CAFD,IAEO,CACL,MAAO,QAAP,CACD,CACF,C,yCACkB,CACjB,GAAG,+CAAWH,UAAX,EAAyB,CAAC,KAAKmD,OAAlC,CAA2C,CACzC,MAAO,gDAAW/C,SAAlB,CACD,CAFD,IAEO,CACL,MAAO,kBAAP,CACD,CACF,C,mCACY,CACX,MAAO,gDAAWH,QAAlB,CACD,C,sCACe,CACd,MAAO,MAAKkD,OAAL,CAAa,+CAAWjD,MAAxB,CAA+B,EAAtC,CACD,C,mCACY0C,G,CAAI,CACf,GAAM1B,CAAAA,CAAC,CAAG,iDAAYb,OAAtB,CACA,GAAGa,CAAC,GAAG0B,GAAP,CAAW,CACT,iDAAYrC,SAAZ,CAAwB,IAAxB,CACA,iDAAYD,QAAZ,CAAuBY,CAAvB,CACA,iDAAYb,OAAZ,CAAsBuC,GAAtB,CACD,CAJD,IAIO,CACL,iDAAYrC,SAAZ,CAAwB,KAAxB,CACD,CACF,C,mCACY,CACX,MAAO,kDAAYA,SAAnB,CACD,C,sCACe,CACd,MAAO,kDAAYF,OAAnB,CACD,C,uCACgB,CACf,MAAO,kDAAYC,QAAnB,CACD,C,wCACiB,CAChB,GAAMK,CAAAA,CAAC,CAAG,iDAAYN,OAAtB,CACA,MAAO,MAAKT,SAAL,CAAee,CAAf,CAAP,CACD,C,yCACkB,CACjB,GAAMA,CAAAA,CAAC,CAAG,iDAAYL,QAAtB,CACA,MAAO,MAAKV,SAAL,CAAee,CAAf,CAAP,CACD,C,qCACc,CACb,MAAO,oDAAaD,MAApB,CACD,C,wCACiB,CACd,MAAO,MAAK0C,SAAL,CAAe,mDAAalD,MAA5B,CAAmC,EAA1C,CACH,C,sCACe,CACd,GAAG,mDAAaF,UAAhB,CAA2B,CACzB,MAAO,oDAAaQ,MAApB,CACD,CACD,MAAO,WAAP,CACD,C,qCACc,CACb,GAAG,mDAAaR,UAAhB,CAA2B,CACzB,MAAO,oDAAaS,SAApB,CACD,CACD,MAAO,WAAP,CACD,C,iCACU4C,M,CAAO,CAChB,mDAAa7C,MAAb,CAAsB6C,MAAM,CAAC7C,MAA7B,CACA,mDAAaC,SAAb,CAAyB4C,MAAM,CAACC,GAAhC,CACA,mDAAatD,UAAb,CAA0BqD,MAAM,CAACE,GAAjC,CACA,mDAAa7C,MAAb,CAAqB2C,MAAM,CAACG,GAA5B,CACA,mDAAatD,MAAb,CAAqBmD,MAAM,CAACnD,MAA5B,CACD,C,sCACeM,M,CAAO,CACrB,GAAI6C,CAAAA,MAAM,CAAE,CACV7C,MAAM,CAAEA,MAAM,CAACA,MADL,CAEV8C,GAAG,CAAE,EAFK,CAGVC,GAAG,CAAE,KAHK,CAIVC,GAAG,CAAE,KAJK,CAKVtD,MAAM,CAAE,EALE,CAAZ,CAOA,GAAGmD,MAAM,CAAC7C,MAAP,GAAgB,YAAnB,CAAgC,CAC9B,KAAKiD,OAAL,CAAejD,MAAM,CAACkD,MAAtB,CACA,GAAG,KAAKP,OAAR,CAAgB,CACdE,MAAM,CAAC7C,MAAP,CAAgB,EAAhB,CACA6C,MAAM,CAACG,GAAP,CAAY,IAAZ,CACAH,MAAM,CAACnD,MAAP,CAAe,mBAAf,CACD,CAJD,IAIO,CACLmD,MAAM,CAACC,GAAP,CAAa,KAAKK,aAAlB,CACAN,MAAM,CAACE,GAAP,CAAa,IAAb,CACD,CACF,CAVD,IAUO,IAAGF,MAAM,CAAC7C,MAAP,GAAgB,YAAnB,CAAgC,CACrC,GAAG,KAAKmC,MAAR,CAAe,CACbU,MAAM,CAAC7C,MAAP,CAAgB,EAAhB,CACA6C,MAAM,CAACG,GAAP,CAAY,IAAZ,CACAH,MAAM,CAACnD,MAAP,CAAe,sBAAf,CACD,CAJD,IAIO,CACLmD,MAAM,CAACC,GAAP,CAAa,KAAKM,YAAlB,CACAP,MAAM,CAACE,GAAP,CAAa,IAAb,CACD,CACF,CATM,IASA,CACLF,MAAM,CAAC7C,MAAP,CAAgB,EAAhB,CACA6C,MAAM,CAACG,GAAP,CAAY,IAAZ,CACAH,MAAM,CAACnD,MAAP,CAAe,uBAAf,CACD,CACD,KAAK2D,MAAL,CAAcR,MAAd,CACD,C,wBAoEH,cAAe1D,CAAAA,QAAf","sourcesContent":["import {lookup,lookupByCoords} from 'zipcodes';\r\nimport stores from './stores.json';\r\n\r\nclass Location {\r\n  #geo = null;\r\n  #user = null;\r\n  #store = null;\r\n  #search = null;\r\n  constructor(){\r\n    this.storeInfo = this.storeInfo.bind(this);\r\n    this.initLoc = this.initLoc.bind(this);\r\n    this.resolveGeoLoc = this.resolveGeoLoc.bind(this);    \r\n    this.#geo = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};     \r\n    this.#user = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};  \r\n    this.#store = {\r\n      current: '0',\r\n      previous: '0',      \r\n      didChange: false};\r\n    this.#search = {\r\n      method: '',\r\n      searchLoc: '',\r\n      isResolved: false,\r\n      hasErr: false,\r\n      errMsg: '',\r\n    }\r\n  }  \r\n  get geoZip() {\r\n    if(this.#geo.isResolved && !this.#geo.entryErr) {\r\n      return this.#geo.zip;\r\n    } else {\r\n      return 'NoGeo';\r\n    }\r\n  } \r\n  get geoCityState(){\r\n    if(this.#geo.isResolved && !this.geoErr) {\r\n      return this.#geo.cityState;\r\n    } else {\r\n      return 'Geo Location Error';\r\n    }   \r\n  }\r\n  get geoErr(){\r\n    return this.#geo.entryErr;\r\n  }\r\n  get geoErrMsg(){\r\n    return this.geoErr?this.#geo.errMsg:'';\r\n  }\r\n  set userZip(val){\r\n    let z = val.trim();    \r\n    let r = false;\r\n    let e = false;\r\n    let m = '';\r\n    let cs = '';\r\n    const l = lookup(z);\r\n    if(typeof l !==\"undefined\"){\r\n      const c = l.city;\r\n      const s = l.state;        \r\n      r = true;        \r\n      cs = c + ', ' + s;\r\n    } else {\r\n      //invalid zip code\r\n      z = '';  \r\n      r = false;\r\n      e = true;\r\n      m = 'Enter a Valid US Zip Code';        \r\n    }   \r\n    this.#user = {\r\n      isResolved: r,\r\n      entryErr: e,\r\n      errMsg: m,\r\n      zip: z,\r\n      cityState: cs,\r\n    };\r\n  }\r\n  get userZip() {\r\n    if(this.#user.isResolved && !this.#user.entryErr) {\r\n      return this.#user.zip;\r\n    } else {\r\n      return 'NoUser';\r\n    }\r\n  } \r\n  get userCityState(){\r\n    if(this.#user.isResolved && !this.userErr) {\r\n      return this.#user.cityState;\r\n    } else {\r\n      return 'User Entry Error';\r\n    }   \r\n  }\r\n  get userErr(){\r\n    return this.#user.entryErr;\r\n  }\r\n  get userErrMsg(){\r\n    return this.userErr?this.#user.errMsg:'';\r\n  }\r\n  set storeLoc(val){\r\n    const c = this.#store.current;\r\n    if(c!==val){\r\n      this.#store.didChange = true;\r\n      this.#store.previous = c;\r\n      this.#store.current = val;\r\n    } else {\r\n      this.#store.didChange = false;\r\n    }    \r\n  }\r\n  get changed(){\r\n    return this.#store.didChange;  \r\n  }\r\n  get curStoreID(){\r\n    return this.#store.current;\r\n  }\r\n  get prevStoreID(){\r\n    return this.#store.previous;\r\n  }\r\n  get curStoreInfo(){\r\n    const i = this.#store.current; \r\n    return this.storeInfo(i);\r\n  }\r\n  get prevStoreInfo(){\r\n    const i = this.#store.previous; \r\n    return this.storeInfo(i);\r\n  }\r\n  get searchErr(){\r\n    return this.#search.hasErr;    \r\n  }\r\n  get searchErrMsg(){\r\n      return this.searchErr?this.#search.errMsg:'';\r\n  }\r\n  get searchMeth(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.method;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  get searchLoc(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.searchLoc;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  set search(values){\r\n    this.#search.method = values.method;\r\n    this.#search.searchLoc = values.loc;\r\n    this.#search.isResolved = values.res;\r\n    this.#search.hasErr= values.err;\r\n    this.#search.errMsg= values.errMsg;\r\n  }\r\n  set storeSearch(method){        \r\n    let values ={\r\n      method: method.method,\r\n      loc: '',\r\n      res: false,\r\n      err: false,\r\n      errMsg: '',\r\n    };\r\n    if(values.method==='User Entry'){\r\n      this.userZip = method.usrStr;\r\n      if(this.userErr){\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Zip Entry';\r\n      } else {\r\n        values.loc = this.userCityState;\r\n        values.res = true;\r\n      }\r\n    } else if(values.method==='Geo Locate'){\r\n      if(this.geoErr){\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Geo Location';\r\n      } else {\r\n        values.loc = this.geoCityState;\r\n        values.res = true;\r\n      }\r\n    } else {\r\n      values.method = '';\r\n      values.err= true;\r\n      values.errMsg= 'Invalid Search Method';\r\n    }\r\n    this.search = values;    \r\n  }\r\n  storeInfo(i){\r\n    const s = stores.stores.find(\r\n      (r) => {return r.id === i;}\r\n    );\r\n    return s;\r\n  }\r\n  initLoc() {\r\n    return (this.resolveGeoLoc()\r\n      .then(data => {\r\n        if (data!=='GeoFail' && (data!==null||data!=='')) {\r\n          const c = data.city;\r\n          const s = data.state;\r\n          this.#geo = {\r\n            zip: data.zip,\r\n            cityState: c + ', ' + s,\r\n            isResolved: true,\r\n            entryErr: false,\r\n            errMsg: '',\r\n          };      \r\n        } else if (data==='GeoFail') {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: true,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location is Disabled',\r\n          };\r\n        } else {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: false,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location not resolved',\r\n          };\r\n        }\r\n        return this;\r\n      })\r\n    )\r\n  }  \r\n  resolveGeoLoc(){ \r\n    const locOpt = {\r\n      timeout: 5000,\r\n      maximumAge: 0\r\n    };    \r\n    return (new Promise((resolve, reject) => {\r\n      if(\"geolocation\" in navigator) {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          let lat = position.coords.latitude;\r\n          let long = position.coords.longitude;\r\n          const tZip = lookupByCoords(lat,long);                  \r\n          resolve(tZip);\r\n        },(error) => {\r\n          console.log('Error getting location');\r\n          console.error(\"Error Code = \" + error.code + \" - \" + error.message);\r\n          const response = 'GeoFail';\r\n\r\n          resolve(response);  \r\n        },locOpt);\r\n      }\r\n    }, ()=>{\r\n      console.log(\"Promise reject\");   \r\n      }\r\n    ))        \r\n  }\r\n}\r\n\r\nexport default Location;"]},"metadata":{},"sourceType":"module"}