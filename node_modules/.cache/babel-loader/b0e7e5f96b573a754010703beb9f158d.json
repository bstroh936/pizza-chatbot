{"ast":null,"code":"import React from'react';import Summary from'./Summary';function StepFactory(props){var stepInfo=props.stepInfo;var curType=stepInfo.current.type;var isSpecial=curType==='special';var controls=isSpecial?BuildSpecialStep(stepInfo.current,stepInfo.prev):getCtrls(stepInfo);var stepMsg=controls.stepMsg.replace(\"{0}\",stepInfo.stepMsg);var displayMsg=/*#__PURE__*/React.createElement(\"div\",{className:\"orderStepMsg\"},stepMsg);var stepContents=props.stepContents!==''?BuildContents(props):/*#__PURE__*/React.createElement(\"div\",null);var controlArray=/*#__PURE__*/React.createElement(ControlArray,{stepMsg:stepMsg,stepCtrls:controls.stepCtrls,onTrigger:props.onTrigger});var stepClassName=\"orderStep\";return/*#__PURE__*/React.createElement(\"div\",{className:stepClassName},displayMsg,stepContents,controlArray);}function BuildContents(props){var contents={cName:'',retArray:[]};switch(props.stepInfo.stepContents.type){case'review':contents.cName='reviewList';contents.retArray=ReviewMsgArray(props);break;case'simple':contents.cName='simpleList';contents.retArray=SimpleItemArray(props);break;case'multi':contents.cName='multiList';contents.retArray=MultiRowArray(props);break;default:}return/*#__PURE__*/React.createElement(\"div\",{className:contents.cName},contents.retArray);}function ReviewMsgArray(props){return Summary(props.stepInfo.stepContents.contents);}function SimpleItemArray(props){var contents=props.stepInfo.stepContents.contents;var elements=contents.elements;var hasMulti=contents.hasMulti;var click=props.onSelect;var sel=contents.selected;var retArray=elements.map(function(e){var capt=e.btnCapt;var key=e.listKey;var val={itemInfo:e.itemInfo,multi:hasMulti};var i=sel.findIndex(function(p){return p===key;});var eleClass=i===-1?capt===''?'btn-hide':key:'btn-select';return/*#__PURE__*/React.createElement(\"li\",{key:key,className:eleClass},/*#__PURE__*/React.createElement(\"button\",{className:\"menuBtn\",onClick:function onClick(){return click(val);}},capt));});return/*#__PURE__*/React.createElement(\"ul\",{className:\"simpleMenu\"},retArray);}function MultiRowArray(props){var contents=props.stepInfo.stepContents.contents;var elements=contents.elements;var hasMulti=contents.hasMulti;;var click=props.onSelect;var sel=contents.selected;var retArray=elements.map(function(e){var rowName=e.name;var rowClass=e.rClass;var rowKey=\"\".concat(rowClass,\"-\").concat(rowName);var halfBtns=e.btns.filter(function(b){return b.btnType==='half';});var qtyBtns=e.btns.filter(function(b){return b.btnType==='qty';});var halfRow=halfBtns.length===0?null:/*#__PURE__*/React.createElement(\"ul\",{className:\"halfBtns\"},BtnArray(halfBtns,sel,click,hasMulti));var qtyRow=qtyBtns.length===0?null:/*#__PURE__*/React.createElement(\"ul\",{className:\"qtyBtns\"},BtnArray(qtyBtns,sel,click,hasMulti));return/*#__PURE__*/React.createElement(\"div\",{className:\"menuEleRow\",key:rowKey},/*#__PURE__*/React.createElement(\"ul\",{className:\"rowBtns\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rowTitle\"},rowName),halfRow,qtyRow));});return/*#__PURE__*/React.createElement(\"ul\",{className:\"multiRowMenu\"},retArray);}function BtnArray(btns,sel,click,hasMulti){var rowBtns=btns.map(function(b){var key=b.listKey;var i=sel.findIndex(function(p){return p===key;});var capt=b.btnCapt;var val={itemInfo:b.itemInfo,multi:hasMulti};var eleClass=i===-1?b.btnClass:\"btn-select\";return/*#__PURE__*/React.createElement(\"li\",{key:key,className:eleClass},/*#__PURE__*/React.createElement(\"button\",{className:\"menuBtn\",onClick:function onClick(){return click(val);}},capt));});return rowBtns;}function ControlArray(props){var stepControls=props.stepCtrls.map(function(s){if(s===null)return null;var capt=s.btnCapt;//const listClass = s.btnClass;\nvar btnClass=\"\".concat(s.btnCat);var key=s.listKey;s.stepMsg=props.stepMsg;return/*#__PURE__*/React.createElement(\"li\",{key:key},/*#__PURE__*/React.createElement(\"button\",{className:btnClass,onClick:function onClick(){return props.onTrigger(s);}},capt));});return/*#__PURE__*/React.createElement(\"div\",{className:\"btnNavigationArray\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"btnCtrlList\"},stepControls));}function getCtrls(stepInfo){var owner=stepInfo.current;var next=stepInfo.next;var prev=stepInfo.prev;var isRetRevO=stepInfo.isRetRevO;var hasRemoveSpecial=owner.type==='menu'||(owner.type==='edit'||owner.type==='review')&&owner.name==='pizza'?true:false;var isFinalReview=owner.type==='review'&&owner.name==='order'?true:false;var revS=[[owner.type==='menu'?'Discard pizza':'Remove this pizza',owner,{type:'special',name:'remove'}]];var comp=[['Complete Order',owner,{type:'special',name:'complete'}]];var chng=[[\"Change Name\",owner,{type:'change',name:'name'}]];var cancel=[['Cancel order',owner,{type:'special',name:'cancel'}]];var ctrlArry=[];if(owner.type==='menu'){var a=next.type==='menu'?next:{type:'inst',name:'specialinstmsg'};ctrlArry=ctrlArry.concat([[next.type==='menu'?\"Next Step(\".concat(next.name,\")\"):'Next Step(Special Instructions)',owner,a]]);ctrlArry=ctrlArry.concat([[prev.type==='menu'?\"Prev Step(\".concat(prev.name,\")\"):'Prev Step(Order Name)',owner,prev]]);}else if(owner.type==='edit'){if(owner.name==='pizza'){var _a=next.name.map(function(i){return[\"Edit \".concat(i),owner,{name:i,type:'edit'}];});ctrlArry=ctrlArry.concat(_a);ctrlArry=ctrlArry.concat([['Edit Special Instructions',owner,{type:'inst',name:'specialinstmsg'}]]);ctrlArry=ctrlArry.concat([['Finished Editing',owner,isRetRevO?{name:'order',type:'review'}:{name:'pizza',type:'review'}]]);}else{ctrlArry=ctrlArry.concat([['Save Changes',owner,{name:'save',type:'edit'}]]);ctrlArry=ctrlArry.concat([['Discard Changes',owner,{name:'drop',type:'edit'}]]);}}else if(owner.type==='review'){if(owner.name==='pizza'){ctrlArry=ctrlArry.concat([['Edit this Pizza',owner,{name:'pizza',type:'edit'}]]);ctrlArry=ctrlArry.concat([['Add a Pizza',owner,{name:'new',type:'new'}]]);ctrlArry=ctrlArry.concat([['Go to Final Review',owner,{name:'order',type:'review'}]]);}else{var _a2=next.name.map(function(i){return[\"Edit Pizza \".concat(i),owner,{name:i,type:'edit'},'goto'];});ctrlArry=ctrlArry.concat(_a2);ctrlArry=ctrlArry.concat([['Add another Pizza',owner,{name:'new',type:'new'}]]);}}ctrlArry=hasRemoveSpecial?ctrlArry.concat(revS):ctrlArry;ctrlArry=isFinalReview?ctrlArry.concat(comp,chng):ctrlArry;ctrlArry=ctrlArry.concat(cancel);var ctrlVals=ctrlArry.map(function(i){return buildCtrlObj(i[0],i[1],i[2]);});return{stepMsg:'{0}',stepCtrls:ctrlVals};}function buildCtrlObj(btnCapt,owner,target){var ctrlType=target.type==='special'?'warn':'ctrl';return{btnClass:\"btn-\".concat(ctrlType),btnCat:\"btn-\".concat(ctrlType),btnCapt:btnCapt,listKey:\"(\".concat(owner.type,\":\").concat(owner.name,\")=>(\").concat(target.type,\":\").concat(target.name,\")\"),owner:owner,target:target};}function BuildSpecialStep(step,prev){var vals=function vals(t,p){switch(t.type){case'remove':return removeCtrl(t,p);case'cancel':return cancelCtrl(t,p);case'complete':return compCtrl(t,p);case'change':return changeCtrl(t,p);default:return{msg:'No special step created',ctrls:[]};}};var ctrlVals=vals(step,prev);return{stepMsg:ctrlVals.msg,stepCtrls:ctrlVals.ctrls};}var cancelCtrl=function cancelCtrl(t,p){var msg='Do you really want to cancel this order?';var ctrls=[];ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes, go to main page',t,'cancel','mainpage'));ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes, go to the store selection page',t,'cancel','storeselect'));ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes, restart this order',t,'cancel','restart'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};var compCtrl=function compCtrl(t,p){var msg='Complete this order and go to payment & confirmation?';var ctrls=[];ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'complete','order'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};var changeCtrl=function changeCtrl(t,p){var msg='Do you really want to change the name for this order?';var ctrls=[];ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'change','name'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};var removeCtrl=function removeCtrl(t,p){var pType=p.type;var msg=pType==='menu'?'Are you sure you want to discard this pizza?':'Do you really want to remove this pizza?';var ctrls=[];if(pType==='menu'){ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes-start over',t,'remove','restart'));}ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'remove','revieworder'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};function buildConfirmationCtrl(type,label,owner,tarType,tarName){var ctrlType=type==='yes'?'warn':'ctrl';return{btnClass:\"btn-\".concat(ctrlType),btnCapt:label,btnCat:\"btn-\".concat(ctrlType),listKey:\"(\".concat(owner,\")=>(\").concat(tarType,\":\").concat(tarName,\")\"),owner:owner,target:{type:tarType,name:tarName}};}export default StepFactory;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/StepFactory.jsx"],"names":["React","Summary","StepFactory","props","stepInfo","curType","current","type","isSpecial","controls","BuildSpecialStep","prev","getCtrls","stepMsg","replace","displayMsg","stepContents","BuildContents","controlArray","stepCtrls","onTrigger","stepClassName","contents","cName","retArray","ReviewMsgArray","SimpleItemArray","MultiRowArray","elements","hasMulti","click","onSelect","sel","selected","map","e","capt","btnCapt","key","listKey","val","itemInfo","multi","i","findIndex","p","eleClass","rowName","name","rowClass","rClass","rowKey","halfBtns","btns","filter","b","btnType","qtyBtns","halfRow","length","BtnArray","qtyRow","rowBtns","btnClass","ControlArray","stepControls","s","btnCat","owner","next","isRetRevO","hasRemoveSpecial","isFinalReview","revS","comp","chng","cancel","ctrlArry","a","concat","ctrlVals","buildCtrlObj","target","ctrlType","step","vals","t","removeCtrl","cancelCtrl","compCtrl","changeCtrl","msg","ctrls","buildConfirmationCtrl","pType","label","tarType","tarName"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Summary from './Summary';\r\n\r\nfunction StepFactory(props) {\r\n  const stepInfo = props.stepInfo;\r\n  const curType = stepInfo.current.type;\r\n  const isSpecial = curType==='special';\r\n  const controls = isSpecial?BuildSpecialStep(stepInfo.current,stepInfo.prev):getCtrls(stepInfo);\r\n  const stepMsg = controls.stepMsg.replace(\"{0}\",stepInfo.stepMsg)  \r\n  const displayMsg = <div className=\"orderStepMsg\">{stepMsg}</div>;\r\n  const stepContents = props.stepContents!==''?BuildContents(props):<div></div>;\r\n  const controlArray = <ControlArray stepMsg={stepMsg} stepCtrls={controls.stepCtrls} onTrigger={props.onTrigger}/>\r\n  const stepClassName = `orderStep`;\r\n  return (\r\n    <div className={stepClassName}>\r\n      {displayMsg}\r\n      {stepContents}\r\n      {controlArray}\r\n    </div>\r\n  ) \r\n}\r\nfunction BuildContents(props){\r\n  const contents = {cName:'', retArray:[]}\r\n  switch(props.stepInfo.stepContents.type){\r\n    case 'review':\r\n      contents.cName = 'reviewList'\r\n      contents.retArray = ReviewMsgArray(props)\r\n      break;\r\n    case 'simple':\r\n      contents.cName = 'simpleList'\r\n      contents.retArray = SimpleItemArray(props)\r\n      break;    \r\n    case 'multi':\r\n      contents.cName = 'multiList'\r\n      contents.retArray = MultiRowArray(props)\r\n      break;    \r\n    default:\r\n  }\r\n  return (<div className={contents.cName}>{contents.retArray}</div>)\r\n}\r\nfunction ReviewMsgArray(props){\r\n  return (Summary(props.stepInfo.stepContents.contents))\r\n}\r\n\r\nfunction SimpleItemArray(props){\r\n  const contents = props.stepInfo.stepContents.contents;\r\n  const elements = contents.elements;  \r\n  const hasMulti = contents.hasMulti;  \r\n  const click = props.onSelect;\r\n  const sel = contents.selected;\r\n  const retArray = elements.map((e)=>{ \r\n    const capt = e.btnCapt;\r\n    const key = e.listKey;\r\n    const val = {itemInfo:e.itemInfo, multi:hasMulti};\r\n    const i = sel.findIndex(p=>p===key)\r\n    const eleClass = i===-1?(capt===''?'btn-hide':key):'btn-select';          \r\n    return (\r\n      <li key={key} className={eleClass}>\r\n        <button className=\"menuBtn\" onClick={()=> {return click(val)}}>{capt}</button>\r\n      </li>\r\n    )\r\n  })\r\n  return (\r\n    <ul className=\"simpleMenu\">\r\n      {retArray}\r\n    </ul>\r\n  )\r\n}\r\nfunction MultiRowArray(props){\r\n  const contents = props.stepInfo.stepContents.contents;\r\n  const elements = contents.elements;  \r\n  const hasMulti = contents.hasMulti; ;  \r\n  const click = props.onSelect;\r\n  const sel = contents.selected;\r\n  const retArray = elements.map((e)=>{\r\n    const rowName = e.name;\r\n    const rowClass = e.rClass;\r\n    const rowKey = `${rowClass}-${rowName}`;\r\n    const halfBtns = e.btns.filter((b)=> b.btnType==='half');\r\n    const qtyBtns = e.btns.filter((b)=> b.btnType==='qty');\r\n    const halfRow = halfBtns.length===0?null:<ul className=\"halfBtns\">{BtnArray(halfBtns, sel, click, hasMulti)}</ul>\r\n    const qtyRow = qtyBtns.length===0?null:<ul className=\"qtyBtns\">{BtnArray(qtyBtns, sel, click, hasMulti)}</ul>\r\n    return (\r\n      <div className=\"menuEleRow\" key={rowKey}>                  \r\n        <ul className=\"rowBtns\">\r\n          <div className=\"rowTitle\">{rowName}</div>            \r\n          {halfRow}\r\n          {qtyRow}\r\n        </ul>        \r\n      </div>\r\n    )\r\n  })\r\n  return (\r\n    <ul className=\"multiRowMenu\">\r\n      {retArray}\r\n    </ul>\r\n  )\r\n}\r\nfunction BtnArray(btns, sel, click, hasMulti){  \r\n  const rowBtns = btns.map((b)=>{       \r\n    const key = b.listKey;\r\n    const i = sel.findIndex(p=>p===key)\r\n    const capt =b.btnCapt;        \r\n    const val = {itemInfo:b.itemInfo, multi:hasMulti};\r\n    const eleClass =  i===-1?b.btnClass:`btn-select`;            \r\n    return (\r\n      <li key={key} className={eleClass}>\r\n        <button className=\"menuBtn\" onClick={()=> {return click(val)}}>{capt}</button>\r\n      </li>\r\n    )\r\n  });\r\n  return rowBtns\r\n}\r\nfunction ControlArray(props){\r\n  const stepControls = props.stepCtrls.map((s)=>{\r\n    if(s===null) return null;\r\n    const capt = s.btnCapt;\r\n    //const listClass = s.btnClass;\r\n    const btnClass = `${s.btnCat}`\r\n    const key = s.listKey;    \r\n    s.stepMsg = props.stepMsg;\r\n    return (\r\n      <li key={key}>\r\n        <button className={btnClass} onClick={()=> {return props.onTrigger(s)}}>{capt}</button>\r\n      </li>\r\n    )\r\n  })\r\n  return(\r\n    <div className=\"btnNavigationArray\">\r\n      <ul className=\"btnCtrlList\">\r\n        {stepControls}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction getCtrls(stepInfo){\r\n  const owner = stepInfo.current;\r\n  const next = stepInfo.next;\r\n  const prev = stepInfo.prev;\r\n  const isRetRevO = stepInfo.isRetRevO;\r\n  const hasRemoveSpecial = (owner.type==='menu'||((owner.type==='edit'||owner.type==='review')&&owner.name==='pizza'))?true:false;  \r\n  const isFinalReview = (owner.type==='review'&&owner.name==='order')?true:false;  \r\n  const revS = [[owner.type==='menu'?'Discard pizza':'Remove this pizza', owner,{type:'special', name:'remove'}]];\r\n  const comp = [['Complete Order', owner, {type:'special', name:'complete'}]];\r\n  const chng = [[\"Change Name\", owner, {type:'change', name:'name'}]];\r\n  const cancel = [['Cancel order', owner, {type:'special', name:'cancel'}]];\r\n  let ctrlArry =[];\r\n  if(owner.type==='menu'){\r\n    const a = next.type==='menu'?next:{type:'inst', name:'specialinstmsg'}\r\n    ctrlArry = ctrlArry.concat([[next.type==='menu'?`Next Step(${next.name})`:'Next Step(Special Instructions)', owner, a]]);\r\n    ctrlArry = ctrlArry.concat([[prev.type==='menu'?`Prev Step(${prev.name})`:'Prev Step(Order Name)', owner, prev]]);\r\n  } else if(owner.type==='edit'){\r\n    if(owner.name==='pizza'){      \r\n      const a = next.name.map((i)=>{\r\n        return ([`Edit ${i}`, owner, {name:i, type:'edit'}])\r\n      })\r\n      ctrlArry = ctrlArry.concat(a);\r\n      ctrlArry = ctrlArry.concat([['Edit Special Instructions', owner, {type:'inst', name:'specialinstmsg'}]]);\r\n      ctrlArry = ctrlArry.concat([['Finished Editing', owner, isRetRevO?{name:'order',type:'review'}:{name:'pizza',type:'review'}]]);\r\n    } else {\r\n      ctrlArry = ctrlArry.concat([['Save Changes', owner, {name:'save', type:'edit'}]]);\r\n      ctrlArry = ctrlArry.concat([['Discard Changes', owner, {name:'drop', type:'edit'}]]);\r\n    }\r\n  } else if(owner.type==='review'){\r\n    if(owner.name==='pizza'){\r\n      ctrlArry = ctrlArry.concat([['Edit this Pizza', owner, {name:'pizza', type:'edit'}]]);\r\n      ctrlArry = ctrlArry.concat([['Add a Pizza', owner, {name:'new', type:'new'}]]);\r\n      ctrlArry = ctrlArry.concat([['Go to Final Review', owner, {name:'order', type:'review'}]]);\r\n    } else {\r\n      const a = next.name.map((i)=>{\r\n        return [`Edit Pizza ${i}`, owner, {name:i, type:'edit'}, 'goto']\r\n      })\r\n      ctrlArry = ctrlArry.concat(a);\r\n      ctrlArry = ctrlArry.concat([['Add another Pizza', owner, {name:'new', type:'new'}]]);\r\n    }  \r\n  }\r\n  ctrlArry =hasRemoveSpecial?ctrlArry.concat(revS):ctrlArry;\r\n  ctrlArry =isFinalReview?ctrlArry.concat(comp,chng):ctrlArry;\r\n  ctrlArry = ctrlArry.concat(cancel);\r\n  const ctrlVals = ctrlArry.map((i)=>{\r\n      return buildCtrlObj(i[0],i[1],i[2]);\r\n    });  \r\n  return({\r\n    stepMsg:'{0}',    \r\n    stepCtrls:ctrlVals,\r\n  })\r\n}\r\nfunction buildCtrlObj(btnCapt, owner, target){      \r\n  const ctrlType = target.type==='special'?'warn':'ctrl'\r\n  return ({\r\n    btnClass: `btn-${ctrlType}`,\r\n    btnCat: `btn-${ctrlType}`,\r\n    btnCapt: btnCapt,\r\n    listKey: `(${owner.type}:${owner.name})=>(${target.type}:${target.name})`,\r\n    owner: owner,\r\n    target: target,          \r\n  }) \r\n}\r\nfunction BuildSpecialStep(step, prev){ \r\n  const vals = (t,p)=> {\r\n    switch(t.type){\r\n      case 'remove':\r\n        return removeCtrl(t,p);\r\n      case 'cancel':\r\n        return cancelCtrl(t,p);\r\n      case 'complete':\r\n        return compCtrl(t,p);\r\n      case 'change':\r\n        return changeCtrl(t,p)\r\n      default:\r\n        return {msg:'No special step created', ctrls:[]};\r\n    }\r\n  }\r\n  const ctrlVals = vals(step,prev);\r\n  return({\r\n    stepMsg:ctrlVals.msg,    \r\n    stepCtrls:ctrlVals.ctrls,\r\n  })\r\n}\r\nconst cancelCtrl = (t,p)=>{\r\n  const msg ='Do you really want to cancel this order?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, go to main page',t,'cancel','mainpage'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, go to the store selection page',t,'cancel','storeselect'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, restart this order',t,'cancel','restart'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst compCtrl = (t,p)=>{\r\n  const msg ='Complete this order and go to payment & confirmation?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'complete','order'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst changeCtrl = (t,p)=>{\r\n  const msg ='Do you really want to change the name for this order?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'change','name'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst removeCtrl = (t,p) =>{\r\n  const pType = p.type;\r\n  const msg = pType==='menu'?'Are you sure you want to discard this pizza?':'Do you really want to remove this pizza?';\r\n  let ctrls = [];\r\n  if(pType==='menu'){\r\n    ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes-start over',t,'remove','restart'));\r\n  }\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'remove','revieworder'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nfunction buildConfirmationCtrl(type, label, owner, tarType, tarName){\r\n  const ctrlType = type==='yes'?'warn':'ctrl';   \r\n  return ({\r\n    btnClass: `btn-${ctrlType}`,\r\n    btnCapt: label,\r\n    btnCat: `btn-${ctrlType}`,\r\n    listKey: `(${owner})=>(${tarType}:${tarName})`,\r\n    owner: owner,\r\n    target: {type:tarType, name:tarName},      \r\n  })\r\n}\r\nexport default StepFactory;"]},"metadata":{},"sourceType":"module"}