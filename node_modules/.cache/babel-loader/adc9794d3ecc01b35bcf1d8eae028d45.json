{"ast":null,"code":"import _slicedToArray from\"C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{StaticTitle,PopupMenu}from'../../Elements/index';import{makeStyles}from'@material-ui/core/styles';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';var useStyles=makeStyles(function(theme){return{root:{flexGrow:1,width:'100%'},paper:{padding:theme.spacing(2),textAlign:'center',color:theme.palette.text.secondary}};});function initializeSelection(initial){var selected=initial.selected;var isSel=selected!==null&&selected!==undefined;var ret={crusts:'0',sizes:'0'};if(isSel){var menuType=initial.menuType;var selMenuType=selected.hasOwnProperty(menuType)?selected[menuType]:false;if(selMenuType){var selItem=selMenuType['1'];var c=selItem.hasOwnProperty('crusts')?selItem.crusts:'0';var s=selItem.hasOwnProperty('sizes')?selItem.sizes:'0';ret.crusts=c;ret.sizes=s;}}return ret;}export default function PizzaTypeStep(props){var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),initialized=_React$useState2[0],setInitialzied=_React$useState2[1];var initialSelect=function initialSelect(p){return initializeSelection(p);};var updateItem=props.updateItem;var stepData=props.stepData;var _React$useState3=React.useState('0'),_React$useState4=_slicedToArray(_React$useState3,2),size=_React$useState4[0],setSize=_React$useState4[1];var _React$useState5=React.useState('0'),_React$useState6=_slicedToArray(_React$useState5,2),crust=_React$useState6[0],setCrust=_React$useState6[1];if(!initialized){var ini=initialSelect({selected:props.selected,menuType:stepData.menuType});setSize(ini.sizes);setCrust(ini.crusts);setInitialzied(true);}var _handleMenuSelect=function handleMenuSelect(input){var chk=function chk(p){var item={crusts:crust,sizes:size};var type=p.type;var value=p.value;item[type]=value;if(type==='sizes'&&size!==value){setSize(value);return item;}else if(type==='crusts'&&crust!==value){setCrust(value);return item;}else{return false;}};var doUpdate=chk(input);if(doUpdate){updateItem({item:{itemID:'1',values:doUpdate},replace:true});}};var content=stepData.content.values.map(function(i){var type=i.type;var caption=i.caption;var description=i.description;var items=stepData.content[type].map(function(o){var id=o.id;var caption=o.caption;var description=o.description;return{id:id,caption:caption,description:description,isDisabled:false};});return{type:type,caption:caption,description:description,items:items};});//const newType ={}\nvar selected={crusts:crust,sizes:size};var displayElements=/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:content.map(function(i){var type=i.type;var rowTitle=i.caption;var description=i.description;var isDisabled=false;var sel=parseInt(selected[type]);return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,direction:\"row\",justify:\"flex-start\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsx(StaticTitle,{rowTitle:rowTitle,description:description})})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Paper,{className:classes.paper,children:/*#__PURE__*/_jsx(PopupMenu,{type:type,itemTypeCaption:rowTitle,selected:sel,isDisabled:isDisabled,items:i.items,handleMenuSelect:function handleMenuSelect(p){_handleMenuSelect(p);}})})})]});})})});return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(Grid,{container:true,spacing:1,children:displayElements})});}","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/AppElements/Steps/MenuSteps/PizzaType.jsx"],"names":["React","StaticTitle","PopupMenu","makeStyles","Paper","Grid","useStyles","theme","root","flexGrow","width","paper","padding","spacing","textAlign","color","palette","text","secondary","initializeSelection","initial","selected","isSel","undefined","ret","crusts","sizes","menuType","selMenuType","hasOwnProperty","selItem","c","s","PizzaTypeStep","props","classes","useState","initialized","setInitialzied","initialSelect","p","updateItem","stepData","size","setSize","crust","setCrust","ini","handleMenuSelect","input","chk","item","type","value","doUpdate","itemID","values","replace","content","map","i","caption","description","items","o","id","isDisabled","displayElements","rowTitle","sel","parseInt"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {StaticTitle, PopupMenu} from '../../Elements/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width:'100%'\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction initializeSelection(initial){\r\n  const selected = initial.selected;  \r\n  const isSel = selected!==null&&selected!==undefined;\r\n  const ret = {crusts:'0', sizes:'0'};\r\n  if(isSel){\r\n    const menuType = initial.menuType;\r\n    const selMenuType = selected.hasOwnProperty(menuType)?selected[menuType]:false;\r\n    if(selMenuType){\r\n      const selItem = selMenuType['1'];\r\n      const c = selItem.hasOwnProperty('crusts')?selItem.crusts:'0';\r\n      const s = selItem.hasOwnProperty('sizes')?selItem.sizes:'0';\r\n      ret.crusts = c;\r\n      ret.sizes = s;\r\n    }\r\n  } \r\n  return ret;\r\n}\r\nexport default function PizzaTypeStep(props){     \r\n  const classes = useStyles();\r\n  const [initialized, setInitialzied] = React.useState(false);\r\n  const initialSelect = (p)=>{\r\n    return initializeSelection(p)\r\n  }\r\n  const updateItem = props.updateItem;\r\n  const stepData = props.stepData;\r\n  \r\n  const [size, setSize] = React.useState('0');\r\n  const [crust,setCrust] =React.useState('0');\r\n  if(!initialized){\r\n    const ini = initialSelect({selected:props.selected,menuType:stepData.menuType})\r\n    setSize(ini.sizes);\r\n    setCrust(ini.crusts);\r\n    setInitialzied(true)\r\n  }\r\n  const handleMenuSelect = (input)=>{        \r\n    const chk = (p)=>{\r\n      const item = {crusts:crust,sizes:size};\r\n      const type=p.type;\r\n      const value = p.value;\r\n      item[type]=value;\r\n      if(type==='sizes'&&size!==value){\r\n        setSize(value);\r\n        return item;\r\n      } else if(type==='crusts'&&crust!==value){\r\n        setCrust(value);\r\n        return item;\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    const doUpdate = chk(input);\r\n    if(doUpdate){\r\n      updateItem({item:{itemID:'1',values:doUpdate},replace:true})\r\n    }    \r\n  }  \r\n  const content = stepData.content.values.map((i)=>{\r\n    const type = i.type;\r\n    const caption = i.caption;\r\n    const description = i.description;\r\n    const items=stepData.content[type].map((o)=>{\r\n      const id = o.id;\r\n      const caption = o.caption;\r\n      const description = o.description;\r\n      return {id:id, caption:caption, description:description, isDisabled:false}\r\n    });\r\n    return {type:type, caption:caption, description:description, items:items};\r\n  })\r\n  //const newType ={}\r\n  \r\n  const selected = {crusts:crust, sizes:size}  \r\n  const displayElements = (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        {content.map((i)=>{        \r\n        const type = i.type;\r\n        const rowTitle = i.caption;\r\n        const description = i.description;\r\n        const isDisabled = false;\r\n        const sel = parseInt(selected[type]);\r\n        return (\r\n          <Grid container item\r\n            direction=\"row\"\r\n            justify=\"flex-start\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <Paper className={classes.paper}>\r\n                <StaticTitle rowTitle={rowTitle} description={description}/>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid item>\r\n              <Paper className={classes.paper}>\r\n                <PopupMenu type={type} itemTypeCaption={rowTitle} selected={sel} isDisabled={isDisabled} items={i.items} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n              </Paper>\r\n            </Grid>\r\n        </Grid>);\r\n        })}\r\n      </Grid>        \r\n    </div> \r\n  )\r\n  return(   \r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        {displayElements}\r\n      </Grid>      \r\n    </div>             \r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}