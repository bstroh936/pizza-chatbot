{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import PizzaOrder from'./PizzaOrder';import PizzaMenu from'./itemMenu';var OrderControl=/*#__PURE__*/function(){function OrderControl(){_classCallCheck(this,OrderControl);this.pizzaOrder=new PizzaOrder();this.pizzaMenu=new PizzaMenu();this.start=false;this.currentStepInfo=null;this.currentPizzaID=0;this.ProcessAction=this.ProcessAction.bind(this);this.menuStep=this.pizzaMenu.MenuSteps;this.stepMsg='';this.specInstSet=false;this.currentBotKey='';this.botKeys=[];this.isSpecialStep=false;this.specialStep=null;}_createClass(OrderControl,[{key:\"HandleItemSelect\",value:function HandleItemSelect(val){var itemType=val.itemInfo.item;var itemID=val.itemInfo.itemID;var hasMulti=val.hasMulti;var hasQty=val.itemInfo.hasOwnProperty('qty');var hasHalf=val.itemInfo.hasOwnProperty('half');var qty=hasQty?val.itemInfo.qty:'0';var half=hasHalf?val.itemInfo.half:'0';var qtyMsg=hasQty?this.pizzaMenu.GetOptMsg('qty',qty)+' ':'';var halfMsg=hasHalf?' '+this.pizzaMenu.GetOptMsg('half',half):'';var itemName=this.pizzaMenu.GetItemName(itemType,itemID);var itemMsg=\"\".concat(qtyMsg).concat(itemName).concat(halfMsg);var retVal={id:itemID,name:itemName,qty:qty,qtyMsg:qtyMsg,half:half,halfMsg:halfMsg,itemMsg:itemMsg};var curSelectItems=[].concat(this.pizzaOrder.ReturnPizzaItems(itemType));if(curSelectItems.length===0){//add item      \nvar add={type:itemType,values:retVal};this.pizzaOrder.SavePizzaItems(add);}else{//handle single/multiselct + qty/half\nvar i=curSelectItems.findIndex(function(p){return p.id===itemID;});if(i===-1){//item not found\nif(hasMulti){var _add={type:itemType,values:retVal};this.pizzaOrder.SavePizzaItems(curSelectItems.concat(_add));}else{//item not in collection - replace existing item\nvar _add2={type:itemType,values:retVal};curSelectItems.splice(0,1,_add2);this.pizzaOrder.SavePizzaItems(curSelectItems);}}else{if(curSelectItems[i].itemMsg===itemMsg){//item is previously selected - remove  \ncurSelectItems.splice(i,1);var _add3={type:itemType,values:curSelectItems};this.pizzaOrder.SavePizzaItems(_add3);}else{var foundQty=curSelectItems[i].qty;var foundHalf=curSelectItems[i].half;if(qty==='0'){retVal.qty=foundQty;retVal.qtyMsg=curSelectItems[i].qtyMsg;}if(half==='0'){retVal.half=foundHalf;retVal.halfMsg=curSelectItems[i].halfMsg;}retVal.itemMsg=\"\".concat(retVal.qtyMsg).concat(itemName).concat(retVal.halfMsg);var _add4={type:itemType,values:retVal};curSelectItems.splice(i,1,_add4);this.pizzaOrder.SavePizzaItems(curSelectItems);}}}var updatedItems=[this.pizzaOrder.ReturnPizzaItems(itemType)];if(updatedItems.length===0)return[];var ret=updatedItems.map(function(i){var init=\"\".concat(itemType,\"-\").concat(i.id);var q=i.qty!=='0'?[\"\".concat(init,\"-qty-\").concat(i.qty)]:[];var h=i.half!=='0'?[\"\".concat(init,\"-half-\").concat(i.half)]:[];return[init,q,h];});//return = list key=>[${itemType}-${itemID}-${opt}-${o.id},${step}-${i.id}]\nreturn ret.flat();}},{key:\"RestartOrder\",value:function RestartOrder(){this.pizzaOrder=new PizzaOrder();return this;}},{key:\"StepMsg\",value:function StepMsg(){return this.stepMsg;}},{key:\"CurrentStep\",value:function CurrentStep(){var curStepName=this.currentStepInfo.currentStep.name;var curStepType=this.currentStepInfo.currentStep.type;var hasMenuElements=this.menuStep.findIndex(function(i){return i===curStepName;})!==-1?true:false;var elements=hasMenuElements?this.pizzaMenu.getMenuStep(curStepName):null;if(hasMenuElements){this.stepMsg=elements.msg;}else{//do something else to get the message\nthis.stepMsg=\"Step \".concat(curStepName,\" with type \").concat(curStepType);}var stepProcesingInfo={stepName:curStepName,curStepType:curStepType,hasMenuElements:hasMenuElements,elements:elements};return stepProcesingInfo;}},{key:\"StepInfo\",value:function StepInfo(){return this.currentStepInfo;}},{key:\"ProcessAction\",value:function ProcessAction(val){/* ownerType, ownerName, targetType, targetName, hasSpecial, trigger*/ //types: menu|edit|review|special[remove|change|complete|cancel]\n//names: {item}|{pizzaID}|pizza|order|special[mainpage|storeselect|restart|order|name|revieworder]\n//trigger: goto|special|remove|change|complete|cancel\nvar action=val.action;var selections=val.selections;if(action.hasSpecial){return this.ProcessSpecial(val);}else{if(action.actionType==='next'){return this.GoToNextStep(action.targetType,action.targetName,action.ownerType,action.ownerName,selections);}else if(action.actionType==='prev'){return this.GoToPrevStep(action.targetType,action.targetName,action.ownerType,action.ownerName);}}}},{key:\"ProcessSpecial\",value:function ProcessSpecial(val){var chck=val.action.hasSpecial.hasOwnProperty('msgClass');var retDef={msg:'No special return message',trigger:'pizzabuilder'};if(chck){//setup for special step\nthis.isSpecialStep=true;this.specialStep=val.action.hasSpecial;retDef.msg=\"Going to \".concat(this.specialStep.trigger);}else{//execute special step\nthis.isSpecialStep=false;this.specialStep=null;if(val.action.actionType==='prev'){return this.GoToPrevStep(val.action.targetType,val.action.targetName);}else{//dispose of action\nreturn this.handleSpecialActions(val);}}return retDef;}},{key:\"GoToNextStep\",value:function GoToNextStep(newType,newName,prevType,prevName,selections){var ret={msg:'',trigger:'pizzabuilder'};//handle selections\nif(prevType==='menu'||prevType==='edit'){var items={type:prevName,selected:selections};ret.msg=this.pizzaOrder.setPizzaItems(items);}if(newType==='menu'){//change menustep\nthis.currentStepInfo=this.changeMenuStep(newName);}else if(newType==='special'){//change step to special instruction step\nthis.currentStepInfo=this.setSpecialInstStep();}else if(newType==='new'){return this.addnewpizza();}else if(newType==='edit'){//go to edits\n}else if(newType==='review'){//go to review\n}return ret;}},{key:\"GoToEditStep\",value:function GoToEditStep(val){var ret={msg:'Going to edit step',trigger:'pizzabuilder'};return ret;}},{key:\"GoToReviewStep\",value:function GoToReviewStep(val){var ret={msg:'Going to review step',trigger:'pizzabuilder'};return ret;}},{key:\"GoToPrevStep\",value:function GoToPrevStep(newType,newName,prevType,prevName){var ret={msg:'Going to previous step--',trigger:'pizzabuilder'};if(newType==='menu'){this.changeMenuStep(newName);}else if(newType==='edit'){//go to edits\n}return ret;}},{key:\"setSpecialInstStep\",value:function setSpecialInstStep(){var curStep={type:'review',name:'pizza'};var prevStep={type:'menu',name:this.menuStep[this.menuStep.length-1]};var nextStep={type:'',name:''};var stepInfo={currentStep:curStep,prevStep:prevStep,nextStep:nextStep,isRetRevO:false};return stepInfo;}},{key:\"changeMenuStep\",value:function changeMenuStep(step){var i=this.menuStep.findIndex(function(s){return s===step;});if(i===-1)return null;var curStep={type:'menu',name:this.menuStep[i]};var prevStep={type:'menu',name:this.menuStep[i-1]};if(i===0){prevStep.type='chatbot';prevStep.name='2';}var nextStep={type:'menu',name:this.menuStep[i+1]};if(i===this.menuStep.length-1){nextStep.type='special';nextStep.name='instruction';}var stepInfo={currentStep:curStep,prevStep:prevStep,nextStep:nextStep,isRetRevO:false};return stepInfo;}},{key:\"addnewpizza\",value:function addnewpizza(){this.currentStepInfo=this.changeMenuStep('crusts');this.specialSet=false;this.currentPizzaID=this.pizzaOrder.MakeNewPizza();this.currentSelectedItems=[];var ret={msg:'Adding a new pizza',trigger:'pizzabuilder'};return ret;}},{key:\"handleSpecialActions\",value:function handleSpecialActions(val){var type=val.action.targetType;var name=val.action.targetName;var ret={msg:'Special action message',trigger:'pizzabuilder'};switch(type){case'cancel':switch(name){case'mainpage':ret.msg='Going to main page';ret.trigger='cancel';break;case'storeselect':ret.msg='Going to store select';ret.trigger='cancel';break;case'restart':ret.msg='Restarting this order';ret.trigger='cancel';break;default:}break;case'complete':ret.msg='Completing order';ret.trigger='endmsg1';break;case'change'://call go to review step to set current step = review order\n//\nret.msg='Changing order name';ret.trigger='2';break;case'remove':switch(name){case'restart':ret.msg='Restarting pizza';ret.trigger='remove';break;case'remove':ret.msg='Removing Pizza';ret.trigger='remove';break;default:}break;default:}return ret;}},{key:\"IsSpecialStep\",get:function get(){return this.isSpecialStep;},set:function set(val){this.isSpecialStep=false;}},{key:\"SpecialStep\",get:function get(){return this.specialStep;},set:function set(val){this.specialStep=val;}},{key:\"isStarted\",get:function get(){return this.start;},set:function set(name){this.pizzaOrder.Name=name;this.addnewpizza();this.start=true;}},{key:\"botKey\",set:function set(val){if(this.currentBotKey!==val){this.currentBotKey=val;this.botKeys=this.botKeys.concat(val);}},get:function get(){return this.currentBotKey;}},{key:\"handleSpecialInst\",get:function get(){return this.specInstSet;},set:function set(val){this.specInstSet=val;}},{key:\"specialInstructions\",set:function set(instr){this.pizzaOrder.currentPizza.SpecialInstructions=instr;if(instr!==''){this.specInstSet=false;}}}]);return OrderControl;}();export default OrderControl;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/OrderControl.jsx"],"names":["PizzaOrder","PizzaMenu","OrderControl","pizzaOrder","pizzaMenu","start","currentStepInfo","currentPizzaID","ProcessAction","bind","menuStep","MenuSteps","stepMsg","specInstSet","currentBotKey","botKeys","isSpecialStep","specialStep","val","itemType","itemInfo","item","itemID","hasMulti","hasQty","hasOwnProperty","hasHalf","qty","half","qtyMsg","GetOptMsg","halfMsg","itemName","GetItemName","itemMsg","retVal","id","name","curSelectItems","concat","ReturnPizzaItems","length","add","type","values","SavePizzaItems","i","findIndex","p","splice","foundQty","foundHalf","updatedItems","ret","map","init","q","h","flat","curStepName","currentStep","curStepType","hasMenuElements","elements","getMenuStep","msg","stepProcesingInfo","stepName","action","selections","hasSpecial","ProcessSpecial","actionType","GoToNextStep","targetType","targetName","ownerType","ownerName","GoToPrevStep","chck","retDef","trigger","handleSpecialActions","newType","newName","prevType","prevName","items","selected","setPizzaItems","changeMenuStep","setSpecialInstStep","addnewpizza","curStep","prevStep","nextStep","stepInfo","isRetRevO","step","s","specialSet","MakeNewPizza","currentSelectedItems","Name","instr","currentPizza","SpecialInstructions"],"mappings":"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","sourcesContent":["import PizzaOrder from './PizzaOrder';\r\nimport PizzaMenu from './itemMenu';\r\n\r\nclass OrderControl {\r\n  constructor(){  \r\n    this.pizzaOrder = new PizzaOrder(); \r\n    this.pizzaMenu = new PizzaMenu();          \r\n    this.start = false;\r\n    this.currentStepInfo = null;        \r\n    this.currentPizzaID = 0;\r\n    this.ProcessAction = this.ProcessAction.bind(this);\r\n    this.menuStep = this.pizzaMenu.MenuSteps;\r\n    this.stepMsg = '';\r\n    this.specInstSet = false;\r\n    this.currentBotKey = '';\r\n    this.botKeys = [];\r\n    this.isSpecialStep = false;\r\n    this.specialStep = null;       \r\n  }\r\n  get IsSpecialStep(){\r\n    return this.isSpecialStep;\r\n  }\r\n  set IsSpecialStep(val){\r\n    this.isSpecialStep = false;\r\n  }\r\n  get SpecialStep(){\r\n    return this.specialStep;\r\n  }\r\n  set SpecialStep(val){\r\n    this.specialStep = val;\r\n  }\r\n  get isStarted(){\r\n    return this.start;\r\n  }\r\n  set isStarted(name){\r\n    this.pizzaOrder.Name = name;\r\n    this.addnewpizza();\r\n    this.start = true;\r\n  }\r\n  set botKey(val){\r\n    if (this.currentBotKey!==val){\r\n      this.currentBotKey = val;\r\n      this.botKeys = this.botKeys.concat(val);\r\n    }\r\n  }\r\n  get botKey(){\r\n    return this.currentBotKey;\r\n  }\r\n  HandleItemSelect(val){\r\n    const itemType = val.itemInfo.item;\r\n    const itemID = val.itemInfo.itemID;\r\n    const hasMulti = val.hasMulti;\r\n    const hasQty = val.itemInfo.hasOwnProperty('qty');\r\n    const hasHalf = val.itemInfo.hasOwnProperty('half');\r\n    const qty = hasQty?val.itemInfo.qty:'0';\r\n    const half = hasHalf?val.itemInfo.half:'0';\r\n    const qtyMsg = hasQty?this.pizzaMenu.GetOptMsg('qty',qty)+' ':'';\r\n    const halfMsg = hasHalf?' ' +this.pizzaMenu.GetOptMsg('half',half):'';\r\n    const itemName = this.pizzaMenu.GetItemName(itemType,itemID);\r\n    const itemMsg = `${qtyMsg}${itemName}${halfMsg}`;\r\n    const retVal = {id:itemID, name:itemName, qty:qty, qtyMsg:qtyMsg, half:half, halfMsg:halfMsg, itemMsg:itemMsg}\r\n    const curSelectItems = [].concat(this.pizzaOrder.ReturnPizzaItems(itemType));\r\n    if(curSelectItems.length===0){\r\n      //add item      \r\n      const add = {type:itemType, values:retVal};\r\n      this.pizzaOrder.SavePizzaItems(add);\r\n    } else {\r\n      //handle single/multiselct + qty/half\r\n      \r\n      const i = curSelectItems.findIndex((p)=>p.id===itemID);\r\n      if(i===-1){\r\n        //item not found\r\n        if(hasMulti){\r\n          const add = {type:itemType, values:retVal};          \r\n          this.pizzaOrder.SavePizzaItems(curSelectItems.concat(add));\r\n        } else {\r\n          //item not in collection - replace existing item\r\n          const add = {type:itemType, values:retVal};\r\n          curSelectItems.splice(0,1,add);\r\n          this.pizzaOrder.SavePizzaItems(curSelectItems);\r\n        }\r\n      } else {\r\n        if(curSelectItems[i].itemMsg===itemMsg){\r\n          //item is previously selected - remove  \r\n          curSelectItems.splice(i,1);\r\n          const add = {type:itemType, values:curSelectItems};\r\n          this.pizzaOrder.SavePizzaItems(add);\r\n        } else {        \r\n          const foundQty = curSelectItems[i].qty;\r\n          const foundHalf = curSelectItems[i].half;\r\n          if(qty==='0'){\r\n            retVal.qty = foundQty;\r\n            retVal.qtyMsg = curSelectItems[i].qtyMsg;\r\n          }\r\n          if(half==='0'){\r\n            retVal.half = foundHalf;\r\n            retVal.halfMsg = curSelectItems[i].halfMsg;\r\n          }\r\n          retVal.itemMsg = `${retVal.qtyMsg}${itemName}${retVal.halfMsg}`;\r\n          const add = {type:itemType, values:retVal};\r\n          curSelectItems.splice(i,1,add);\r\n          this.pizzaOrder.SavePizzaItems(curSelectItems);\r\n        }\r\n      }\r\n    } \r\n    const updatedItems = [this.pizzaOrder.ReturnPizzaItems(itemType)];\r\n    if(updatedItems.length===0) return []\r\n    \r\n    const ret = updatedItems.map((i)=> {\r\n      const init = `${itemType}-${i.id}`;\r\n      \r\n      const q =i.qty!=='0'?[`${init}-qty-${i.qty}`]:[];\r\n      const h =i.half!=='0'?[`${init}-half-${i.half}`]:[];\r\n      return [init,q,h];\r\n\r\n    })\r\n    //return = list key=>[${itemType}-${itemID}-${opt}-${o.id},${step}-${i.id}]\r\n    return ret.flat();\r\n  }\r\n\r\n  RestartOrder(){       \r\n    this.pizzaOrder = new PizzaOrder();\r\n    return this;\r\n  }\r\n  StepMsg(){\r\n    return this.stepMsg;\r\n  }\r\n  CurrentStep(){\r\n    const curStepName = this.currentStepInfo.currentStep.name;\r\n    const curStepType = this.currentStepInfo.currentStep.type;\r\n    const hasMenuElements = this.menuStep.findIndex((i)=> i===curStepName)!==-1?true:false;\r\n    const elements = hasMenuElements?this.pizzaMenu.getMenuStep(curStepName):null;\r\n    if(hasMenuElements){\r\n      this.stepMsg = elements.msg;\r\n    } else {\r\n      //do something else to get the message\r\n      this.stepMsg = `Step ${curStepName} with type ${curStepType}`;\r\n    }\r\n    const stepProcesingInfo = {\r\n      stepName: curStepName,\r\n      curStepType: curStepType,\r\n      hasMenuElements: hasMenuElements,\r\n      elements: elements,\r\n    }\r\n    return stepProcesingInfo;\r\n  }\r\n  StepInfo(){        \r\n    return this.currentStepInfo;\r\n  }\r\n  get handleSpecialInst(){\r\n    return this.specInstSet;\r\n  }\r\n  set handleSpecialInst(val){\r\n    this.specInstSet=val;\r\n  }\r\n\r\n  set specialInstructions(instr){\r\n    this.pizzaOrder.currentPizza.SpecialInstructions = instr;\r\n    if(instr!==''){\r\n      this.specInstSet = false;\r\n    }        \r\n  }\r\n  ProcessAction(val){\r\n    /* ownerType, ownerName, targetType, targetName, hasSpecial, trigger*/\r\n    //types: menu|edit|review|special[remove|change|complete|cancel]\r\n    //names: {item}|{pizzaID}|pizza|order|special[mainpage|storeselect|restart|order|name|revieworder]\r\n    //trigger: goto|special|remove|change|complete|cancel\r\n    const action = val.action;\r\n    const selections = val.selections;\r\n    \r\n    if(action.hasSpecial){\r\n      return this.ProcessSpecial(val);\r\n    } else {\r\n      if(action.actionType==='next'){\r\n        return this.GoToNextStep(action.targetType, action.targetName, action.ownerType, action.ownerName, selections);\r\n      } else if(action.actionType==='prev'){\r\n        return this.GoToPrevStep(action.targetType, action.targetName, action.ownerType, action.ownerName);\r\n      }\r\n    }\r\n  }\r\n  ProcessSpecial(val){\r\n    const chck = val.action.hasSpecial.hasOwnProperty('msgClass');\r\n    const retDef={msg:'No special return message', trigger:'pizzabuilder'};\r\n    if(chck){\r\n      //setup for special step\r\n      this.isSpecialStep = true;\r\n      this.specialStep = val.action.hasSpecial;\r\n      retDef.msg = `Going to ${this.specialStep.trigger}`;\r\n    } else {\r\n      //execute special step\r\n      this.isSpecialStep = false;\r\n      this.specialStep = null;\r\n      if(val.action.actionType==='prev'){\r\n       return this.GoToPrevStep(val.action.targetType, val.action.targetName)\r\n      } else {\r\n        //dispose of action\r\n       return this.handleSpecialActions(val);\r\n      }\r\n    }\r\n    \r\n    return retDef;\r\n  }\r\n  GoToNextStep(newType, newName, prevType, prevName, selections){\r\n    const ret={msg:'', trigger:'pizzabuilder'};\r\n    //handle selections\r\n    if(prevType==='menu'||prevType==='edit'){\r\n      const items = {type:prevName, selected:selections};\r\n      ret.msg = this.pizzaOrder.setPizzaItems(items);\r\n    }\r\n    if(newType==='menu'){\r\n      //change menustep\r\n      this.currentStepInfo = this.changeMenuStep(newName);      \r\n    } else if(newType==='special'){\r\n      //change step to special instruction step\r\n      this.currentStepInfo = this.setSpecialInstStep();      \r\n    } else if(newType==='new'){\r\n      \r\n      return this.addnewpizza();\r\n    } else if(newType==='edit'){\r\n      //go to edits\r\n    } else if(newType==='review'){\r\n      //go to review\r\n\r\n    }\r\n    return ret;\r\n  }\r\n  GoToEditStep(val){\r\n    const ret={msg:'Going to edit step', trigger:'pizzabuilder'};\r\n\r\n    return ret;\r\n  }\r\n  GoToReviewStep(val){\r\n    const ret={msg:'Going to review step', trigger:'pizzabuilder'};\r\n\r\n    return ret;\r\n  }\r\n  GoToPrevStep(newType, newName, prevType, prevName){\r\n    const ret={msg:'Going to previous step--', trigger:'pizzabuilder'};\r\n    if(newType==='menu'){\r\n      this.changeMenuStep(newName);\r\n    } else if(newType==='edit') {\r\n      //go to edits\r\n\r\n    }\r\n    return ret;\r\n  }\r\n  setSpecialInstStep(){\r\n    const curStep = {\r\n      type: 'review',\r\n      name: 'pizza',            \r\n    }\r\n    const prevStep = {\r\n      type: 'menu',\r\n      name: this.menuStep[this.menuStep.length-1], \r\n    }    \r\n    const nextStep = {\r\n      type:'',\r\n      name:'',\r\n    }    \r\n    const stepInfo = {\r\n      currentStep: curStep,\r\n      prevStep: prevStep,\r\n      nextStep: nextStep,\r\n      isRetRevO: false,\r\n    }\r\n    return stepInfo;\r\n  }\r\n  changeMenuStep(step){\r\n    const i = this.menuStep.findIndex((s)=>s===step);\r\n    if(i===-1) return null;\r\n    \r\n    const curStep = {\r\n      type: 'menu',\r\n      name: this.menuStep[i],            \r\n    }\r\n    const prevStep = {\r\n      type: 'menu',\r\n      name: this.menuStep[i-1], \r\n    }\r\n    if(i===0){\r\n      prevStep.type='chatbot';\r\n      prevStep.name='2'\r\n    }\r\n    const nextStep = {\r\n      type:'menu',\r\n      name:this.menuStep[i+1],\r\n    }\r\n    if (i===this.menuStep.length-1){\r\n      nextStep.type='special'\r\n      nextStep.name='instruction'\r\n    }\r\n    const stepInfo = {\r\n      currentStep: curStep,\r\n      prevStep: prevStep,\r\n      nextStep: nextStep,\r\n      isRetRevO: false,\r\n    }\r\n    return stepInfo;    \r\n  }\r\n  addnewpizza(){     \r\n    this.currentStepInfo = this.changeMenuStep('crusts')\r\n    this.specialSet = false;\r\n    this.currentPizzaID = this.pizzaOrder.MakeNewPizza();\r\n    this.currentSelectedItems = [];\r\n    const ret={msg:'Adding a new pizza', trigger:'pizzabuilder'};\r\n\r\n    return ret;\r\n  }\r\n  handleSpecialActions(val){\r\n    const type = val.action.targetType;\r\n    const name = val.action.targetName;\r\n    const ret={msg:'Special action message', trigger:'pizzabuilder'};\r\n    switch(type){\r\n      case 'cancel':\r\n        switch(name){\r\n          case 'mainpage':\r\n            ret.msg = 'Going to main page';\r\n            ret.trigger = 'cancel';\r\n            break;\r\n          case 'storeselect':\r\n            ret.msg = 'Going to store select';\r\n            ret.trigger = 'cancel';\r\n            break;            \r\n          case 'restart':\r\n            ret.msg = 'Restarting this order';\r\n            ret.trigger = 'cancel';\r\n            break;\r\n          default:\r\n        }\r\n        break;\r\n      case 'complete':\r\n        ret.msg = 'Completing order';\r\n        ret.trigger = 'endmsg1';\r\n        break;      \r\n      case 'change':\r\n        //call go to review step to set current step = review order\r\n        //\r\n        ret.msg = 'Changing order name';\r\n        ret.trigger = '2';\r\n        break;               \r\n      case 'remove':\r\n        switch (name){\r\n          case 'restart':\r\n            ret.msg = 'Restarting pizza';\r\n            ret.trigger = 'remove';\r\n            break;\r\n          case 'remove':\r\n            ret.msg = 'Removing Pizza';\r\n            ret.trigger = 'remove';\r\n            break;\r\n          default:\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n    return ret;\r\n  }\r\n  \r\n}\r\nexport default OrderControl;"]},"metadata":{},"sourceType":"module"}