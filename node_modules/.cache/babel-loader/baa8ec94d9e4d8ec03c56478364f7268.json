{"ast":null,"code":"function StepFactory(stepInfo){var owner=stepInfo.currentStep;var next=stepInfo.nextStep;var prev=stepInfo.prevStep;var isRetRevO=stepInfo.isRetRevO;return getCtrls(owner,next,prev,isRetRevO);}function getCtrls(owner,next,prev,isRetRevO){var hasRemoveSpecial=owner.type==='menu'||(owner.type==='edit'||owner.type==='review')&&owner.name==='pizza'?true:false;var isFinalReview=owner.type==='review'&&owner.name==='order'?true:false;var revS=[['warn',owner.type==='menu'?'Discard pizza':'Remove this pizza',owner,owner,'remove']];var comp=[['next','Complete Order',owner,owner,'complete']];var chng=[['next',\"Change Name\",owner,owner,'change']];var cancel=[['warn','Cancel order',owner,owner,'cancel']];var ctrlArry=[];if(owner.type==='menu'){var a=next.type==='menu'?next:{type:'special',name:'specialinstmsg'};ctrlArry=ctrlArry.concat([['next',next.type==='menu'?\"Next Step -> \".concat(next.name):'Next Step -> Special Instructions',owner,a,'goto']]);ctrlArry=ctrlArry.concat([['prev',prev.type==='menu'?\"Prev Step -> \".concat(prev.name):'Start Over',owner,prev,'goto']]);}else if(owner.type==='edit'){if(owner.name==='pizza'){var _a=next.map(function(i){return[['next',\"Edit \".concat(i.name),owner,i,'goto']];});ctrlArry=ctrlArry.concat(_a);ctrlArry=ctrlArry.concat([['prev','Finished with edits',owner,isRetRevO?{name:'order',type:'review'}:{name:'pizza',type:'review'},'goto']]);}else{ctrlArry=ctrlArry.concat([['next','Save Changes',owner,{name:'pizza',type:'edit'},'goto']]);ctrlArry=ctrlArry.concat([['prev','Discard Changes',owner,{name:'pizza',type:'edit'},'goto']]);}}else if(owner.type==='review'){if(owner.name==='pizza'){ctrlArry=ctrlArry.concat([['next','Edit this Pizza',owner,{name:'pizza',type:'edit'},'goto']]);ctrlArry=ctrlArry.concat([['next','Add another Pizza',owner,{name:'crusts',type:'new'},'goto']]);ctrlArry=ctrlArry.concat([['next','Review Order',owner,{name:'order',type:'review'},'goto']]);}else{var _a2=next.map(function(i){return['next',\"Edit Pizza \".concat(i.name),owner,i,'goto'];});ctrlArry=ctrlArry.concat(_a2);ctrlArry=ctrlArry.concat([['next','Add another Pizza',owner,{name:'crusts',type:'menu'},'goto']]);}}ctrlArry=hasRemoveSpecial?ctrlArry.concat(revS):ctrlArry;ctrlArry=isFinalReview?ctrlArry.concat(comp,chng):ctrlArry;ctrlArry=ctrlArry.concat(cancel);return ctrlArry.map(function(i){return buildCtrlObj(i[0],i[1],i[2],i[3],i[4]);});}function buildCtrlObj(ctrlType,btnCapt,owner,target,tarFunc){var key=\"\".concat(owner.type,\":\").concat(owner.name,\"-\").concat(tarFunc,\"(\").concat(target.type,\":\").concat(target.name,\")\");var specStep=tarFunc==='goto'?false:buildSpecialStep(tarFunc,owner);return{btnClass:\"btn-\".concat(ctrlType),btnCapt:btnCapt,listKey:key,ownerType:owner.type,ownerName:owner.name,targetType:target.type,targetName:target.name,action:ctrlType,hasSpecial:specStep,trigger:tarFunc};}function buildSpecialStep(type,prev){var vals=function vals(t,p){switch(t){case'remove':return removeCtrl(t,p);case'cancel':return cancelCtrl(t,p);case'complete':return compCtrl(t,p);case'change':return;default:changeCtrl(t,p);return'';}};var ctrlVals=vals(type,prev);return{stepMsg:ctrlVals.msg,msgClass:\"msg-\".concat(type),stepCtrls:ctrlVals.ctrls};}var cancelCtrl=function cancelCtrl(t,p){var msg='Do you really want to cancel this order?';var ctrls=[];ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes, go to main page',t,'cancel','mainpage'));ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes, go to the store selection page',t,'cancel','storeselect'));ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes, restart this order',t,'cancel','restart'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};var compCtrl=function compCtrl(t,p){var msg='Complete this order and go to payment & confirmation?';var ctrls=[];ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'complete','order'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};var changeCtrl=function changeCtrl(t,p){var msg='Do you really want to change the name for this order?';var ctrls=[];ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'change','name'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};var removeCtrl=function removeCtrl(t,p){var pType=p.type;var msg=pType==='menu'?'Are you sure you want to discard this pizza?':'Do you really want to remove this pizza?';var ctrls=[];if(pType==='menu'){ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes-start over',t,'remove','restart'));}ctrls=ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'remove','revieworder'));ctrls=ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));return{msg:msg,ctrls:ctrls};};function buildConfirmationCtrl(type,label,owner,tarType,tarName){var ctrlType=type==='yes'?'warn':'prev';var key=\"\".concat(owner,\"-\").concat(type,\"-\").concat(tarType,\"-\").concat(tarName);return{btnClass:\"btn-\".concat(ctrlType),btnCapt:label,listKey:key,ownerType:type,ownerName:owner,targetType:tarType,targetName:tarName,action:ctrlType,hasSpecial:true,trigger:'special'};}export default StepFactory;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/StepFactory.jsx"],"names":["StepFactory","stepInfo","owner","currentStep","next","nextStep","prev","prevStep","isRetRevO","getCtrls","hasRemoveSpecial","type","name","isFinalReview","revS","comp","chng","cancel","ctrlArry","a","concat","map","i","buildCtrlObj","ctrlType","btnCapt","target","tarFunc","key","specStep","buildSpecialStep","btnClass","listKey","ownerType","ownerName","targetType","targetName","action","hasSpecial","trigger","vals","t","p","removeCtrl","cancelCtrl","compCtrl","changeCtrl","ctrlVals","stepMsg","msg","msgClass","stepCtrls","ctrls","buildConfirmationCtrl","pType","label","tarType","tarName"],"mappings":"AAAA,QAASA,CAAAA,WAAT,CAAqBC,QAArB,CAA+B,CAC7B,GAAMC,CAAAA,KAAK,CAAGD,QAAQ,CAACE,WAAvB,CACA,GAAMC,CAAAA,IAAI,CAAGH,QAAQ,CAACI,QAAtB,CACA,GAAMC,CAAAA,IAAI,CAAGL,QAAQ,CAACM,QAAtB,CACA,GAAMC,CAAAA,SAAS,CAAGP,QAAQ,CAACO,SAA3B,CACA,MAAOC,CAAAA,QAAQ,CAACP,KAAD,CAAQE,IAAR,CAAaE,IAAb,CAAkBE,SAAlB,CAAf,CACD,CACD,QAASC,CAAAA,QAAT,CAAkBP,KAAlB,CAAyBE,IAAzB,CAA+BE,IAA/B,CAAqCE,SAArC,CAA+C,CAC7C,GAAME,CAAAA,gBAAgB,CAAIR,KAAK,CAACS,IAAN,GAAa,MAAb,EAAsB,CAACT,KAAK,CAACS,IAAN,GAAa,MAAb,EAAqBT,KAAK,CAACS,IAAN,GAAa,QAAnC,GAA8CT,KAAK,CAACU,IAAN,GAAa,OAAlF,CAA4F,IAA5F,CAAiG,KAA1H,CACA,GAAMC,CAAAA,aAAa,CAAIX,KAAK,CAACS,IAAN,GAAa,QAAb,EAAuBT,KAAK,CAACU,IAAN,GAAa,OAArC,CAA8C,IAA9C,CAAmD,KAAzE,CACA,GAAME,CAAAA,IAAI,CAAG,CAAC,CAAC,MAAD,CAASZ,KAAK,CAACS,IAAN,GAAa,MAAb,CAAoB,eAApB,CAAoC,mBAA7C,CAAkET,KAAlE,CAAwEA,KAAxE,CAA8E,QAA9E,CAAD,CAAb,CACA,GAAMa,CAAAA,IAAI,CAAG,CAAC,CAAC,MAAD,CAAS,gBAAT,CAA2Bb,KAA3B,CAAkCA,KAAlC,CAAyC,UAAzC,CAAD,CAAb,CACA,GAAMc,CAAAA,IAAI,CAAG,CAAC,CAAC,MAAD,CAAS,aAAT,CAAwBd,KAAxB,CAA+BA,KAA/B,CAAsC,QAAtC,CAAD,CAAb,CACA,GAAMe,CAAAA,MAAM,CAAG,CAAC,CAAC,MAAD,CAAS,cAAT,CAAyBf,KAAzB,CAAgCA,KAAhC,CAAuC,QAAvC,CAAD,CAAf,CACA,GAAIgB,CAAAA,QAAQ,CAAE,EAAd,CACA,GAAGhB,KAAK,CAACS,IAAN,GAAa,MAAhB,CAAuB,CACrB,GAAMQ,CAAAA,CAAC,CAAGf,IAAI,CAACO,IAAL,GAAY,MAAZ,CAAmBP,IAAnB,CAAwB,CAACO,IAAI,CAAC,SAAN,CAAiBC,IAAI,CAAC,gBAAtB,CAAlC,CACAM,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAShB,IAAI,CAACO,IAAL,GAAY,MAAZ,wBAAmCP,IAAI,CAACQ,IAAxC,EAA+C,mCAAxD,CAA6FV,KAA7F,CAAoGiB,CAApG,CAAuG,MAAvG,CAAD,CAAhB,CAAX,CACAD,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAASd,IAAI,CAACK,IAAL,GAAY,MAAZ,wBAAmCL,IAAI,CAACM,IAAxC,EAA+C,YAAxD,CAAsEV,KAAtE,CAA6EI,IAA7E,CAAmF,MAAnF,CAAD,CAAhB,CAAX,CACD,CAJD,IAIO,IAAGJ,KAAK,CAACS,IAAN,GAAa,MAAhB,CAAuB,CAC5B,GAAGT,KAAK,CAACU,IAAN,GAAa,OAAhB,CAAwB,CACtB,GAAMO,CAAAA,EAAC,CAAGf,IAAI,CAACiB,GAAL,CAAS,SAACC,CAAD,CAAK,CACtB,MAAO,CAAC,CAAC,MAAD,gBAAiBA,CAAC,CAACV,IAAnB,EAA2BV,KAA3B,CAAkCoB,CAAlC,CAAqC,MAArC,CAAD,CAAP,CACD,CAFS,CAAV,CAGAJ,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgBD,EAAhB,CAAX,CACAD,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,qBAAT,CAAgClB,KAAhC,CAAuCM,SAAS,CAAC,CAACI,IAAI,CAAC,OAAN,CAAcD,IAAI,CAAC,QAAnB,CAAD,CAA8B,CAACC,IAAI,CAAC,OAAN,CAAcD,IAAI,CAAC,QAAnB,CAA9E,CAA4G,MAA5G,CAAD,CAAhB,CAAX,CACD,CAND,IAMO,CACLO,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,cAAT,CAAyBlB,KAAzB,CAAgC,CAACU,IAAI,CAAC,OAAN,CAAeD,IAAI,CAAC,MAApB,CAAhC,CAA6D,MAA7D,CAAD,CAAhB,CAAX,CACAO,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,iBAAT,CAA4BlB,KAA5B,CAAmC,CAACU,IAAI,CAAC,OAAN,CAAeD,IAAI,CAAC,MAApB,CAAnC,CAAgE,MAAhE,CAAD,CAAhB,CAAX,CACD,CACF,CAXM,IAWA,IAAGT,KAAK,CAACS,IAAN,GAAa,QAAhB,CAAyB,CAC9B,GAAGT,KAAK,CAACU,IAAN,GAAa,OAAhB,CAAwB,CACtBM,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,iBAAT,CAA4BlB,KAA5B,CAAmC,CAACU,IAAI,CAAC,OAAN,CAAeD,IAAI,CAAC,MAApB,CAAnC,CAAgE,MAAhE,CAAD,CAAhB,CAAX,CACAO,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,mBAAT,CAA8BlB,KAA9B,CAAqC,CAACU,IAAI,CAAC,QAAN,CAAgBD,IAAI,CAAC,KAArB,CAArC,CAAkE,MAAlE,CAAD,CAAhB,CAAX,CACAO,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,cAAT,CAAyBlB,KAAzB,CAAgC,CAACU,IAAI,CAAC,OAAN,CAAeD,IAAI,CAAC,QAApB,CAAhC,CAA+D,MAA/D,CAAD,CAAhB,CAAX,CACD,CAJD,IAIO,CACL,GAAMQ,CAAAA,GAAC,CAAGf,IAAI,CAACiB,GAAL,CAAS,SAACC,CAAD,CAAK,CACtB,MAAO,CAAC,MAAD,sBAAuBA,CAAC,CAACV,IAAzB,EAAiCV,KAAjC,CAAwCoB,CAAxC,CAA2C,MAA3C,CAAP,CACD,CAFS,CAAV,CAGAJ,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgBD,GAAhB,CAAX,CACAD,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgB,CAAC,CAAC,MAAD,CAAS,mBAAT,CAA8BlB,KAA9B,CAAqC,CAACU,IAAI,CAAC,QAAN,CAAgBD,IAAI,CAAC,MAArB,CAArC,CAAmE,MAAnE,CAAD,CAAhB,CAAX,CACD,CACF,CACDO,QAAQ,CAAER,gBAAgB,CAACQ,QAAQ,CAACE,MAAT,CAAgBN,IAAhB,CAAD,CAAuBI,QAAjD,CACAA,QAAQ,CAAEL,aAAa,CAACK,QAAQ,CAACE,MAAT,CAAgBL,IAAhB,CAAqBC,IAArB,CAAD,CAA4BE,QAAnD,CACAA,QAAQ,CAAGA,QAAQ,CAACE,MAAT,CAAgBH,MAAhB,CAAX,CACA,MACEC,CAAAA,QAAQ,CAACG,GAAT,CAAa,SAACC,CAAD,CAAK,CAChB,MAAOC,CAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,CAAMA,CAAC,CAAC,CAAD,CAAP,CAAWA,CAAC,CAAC,CAAD,CAAZ,CAAgBA,CAAC,CAAC,CAAD,CAAjB,CAAqBA,CAAC,CAAC,CAAD,CAAtB,CAAnB,CACD,CAFD,CADF,CAKD,CACD,QAASC,CAAAA,YAAT,CAAsBC,QAAtB,CAAgCC,OAAhC,CAAyCvB,KAAzC,CAAgDwB,MAAhD,CAAwDC,OAAxD,CAAgE,CAChE,GAAMC,CAAAA,GAAG,WAAM1B,KAAK,CAACS,IAAZ,aAAoBT,KAAK,CAACU,IAA1B,aAAkCe,OAAlC,aAA6CD,MAAM,CAACf,IAApD,aAA4De,MAAM,CAACd,IAAnE,KAAT,CACA,GAAMiB,CAAAA,QAAQ,CAAGF,OAAO,GAAG,MAAV,CAAiB,KAAjB,CAAuBG,gBAAgB,CAACH,OAAD,CAAUzB,KAAV,CAAxD,CACE,MAAQ,CACN6B,QAAQ,eAASP,QAAT,CADF,CAENC,OAAO,CAAEA,OAFH,CAGNO,OAAO,CAAEJ,GAHH,CAINK,SAAS,CAAE/B,KAAK,CAACS,IAJX,CAKNuB,SAAS,CAAEhC,KAAK,CAACU,IALX,CAMNuB,UAAU,CAAET,MAAM,CAACf,IANb,CAONyB,UAAU,CAAEV,MAAM,CAACd,IAPb,CAQNyB,MAAM,CAACb,QARD,CASNc,UAAU,CAAET,QATN,CAUNU,OAAO,CAAEZ,OAVH,CAAR,CAYD,CACD,QAASG,CAAAA,gBAAT,CAA0BnB,IAA1B,CAAgCL,IAAhC,CAAqC,CACnC,GAAMkC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,CAAD,CAAGC,CAAH,CAAQ,CACnB,OAAOD,CAAP,EACE,IAAK,QAAL,CACE,MAAOE,CAAAA,UAAU,CAACF,CAAD,CAAGC,CAAH,CAAjB,CACF,IAAK,QAAL,CACE,MAAOE,CAAAA,UAAU,CAACH,CAAD,CAAGC,CAAH,CAAjB,CACF,IAAK,UAAL,CACE,MAAOG,CAAAA,QAAQ,CAACJ,CAAD,CAAGC,CAAH,CAAf,CACF,IAAK,QAAL,CACE,OACF,QAAQI,UAAU,CAACL,CAAD,CAAGC,CAAH,CAAV,CACN,MAAO,EAAP,CAVJ,CAYD,CAbD,CAcA,GAAMK,CAAAA,QAAQ,CAAGP,IAAI,CAAC7B,IAAD,CAAML,IAAN,CAArB,CACA,MAAO,CACL0C,OAAO,CAACD,QAAQ,CAACE,GADZ,CAELC,QAAQ,eAAQvC,IAAR,CAFH,CAGLwC,SAAS,CAACJ,QAAQ,CAACK,KAHd,CAAP,CAKD,CACD,GAAMR,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACH,CAAD,CAAGC,CAAH,CAAO,CACxB,GAAMO,CAAAA,GAAG,CAAE,0CAAX,CACA,GAAIG,CAAAA,KAAK,CAAG,EAAZ,CACAA,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,sBAAP,CAA8BZ,CAA9B,CAAgC,QAAhC,CAAyC,UAAzC,CAAlC,CAAR,CACAW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,qCAAP,CAA6CZ,CAA7C,CAA+C,QAA/C,CAAwD,aAAxD,CAAlC,CAAR,CACAW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,yBAAP,CAAiCZ,CAAjC,CAAmC,QAAnC,CAA4C,SAA5C,CAAlC,CAAR,CACAW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,IAAD,CAAM,aAAN,CAAoBZ,CAApB,CAAsBC,CAAC,CAAC/B,IAAxB,CAA6B+B,CAAC,CAAC9B,IAA/B,CAAlC,CAAR,CACA,MAAQ,CACNqC,GAAG,CAACA,GADE,CAENG,KAAK,CAACA,KAFA,CAAR,CAID,CAXD,CAYA,GAAMP,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACJ,CAAD,CAAGC,CAAH,CAAO,CACtB,GAAMO,CAAAA,GAAG,CAAE,uDAAX,CACA,GAAIG,CAAAA,KAAK,CAAG,EAAZ,CACAA,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,KAAP,CAAaZ,CAAb,CAAe,UAAf,CAA0B,OAA1B,CAAlC,CAAR,CACAW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,IAAD,CAAM,aAAN,CAAoBZ,CAApB,CAAsBC,CAAC,CAAC/B,IAAxB,CAA6B+B,CAAC,CAAC9B,IAA/B,CAAlC,CAAR,CACA,MAAQ,CACNqC,GAAG,CAACA,GADE,CAENG,KAAK,CAACA,KAFA,CAAR,CAID,CATD,CAUA,GAAMN,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACL,CAAD,CAAGC,CAAH,CAAO,CACxB,GAAMO,CAAAA,GAAG,CAAE,uDAAX,CACA,GAAIG,CAAAA,KAAK,CAAG,EAAZ,CACAA,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,KAAP,CAAaZ,CAAb,CAAe,QAAf,CAAwB,MAAxB,CAAlC,CAAR,CACAW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,IAAD,CAAM,aAAN,CAAoBZ,CAApB,CAAsBC,CAAC,CAAC/B,IAAxB,CAA6B+B,CAAC,CAAC9B,IAA/B,CAAlC,CAAR,CACA,MAAQ,CACNqC,GAAG,CAACA,GADE,CAENG,KAAK,CAACA,KAFA,CAAR,CAID,CATD,CAUA,GAAMT,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACF,CAAD,CAAGC,CAAH,CAAQ,CACzB,GAAMY,CAAAA,KAAK,CAAGZ,CAAC,CAAC/B,IAAhB,CACA,GAAMsC,CAAAA,GAAG,CAAGK,KAAK,GAAG,MAAR,CAAe,8CAAf,CAA8D,0CAA1E,CACA,GAAIF,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAGE,KAAK,GAAG,MAAX,CAAkB,CAChBF,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,gBAAP,CAAwBZ,CAAxB,CAA0B,QAA1B,CAAmC,SAAnC,CAAlC,CAAR,CACD,CACDW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,KAAD,CAAO,KAAP,CAAaZ,CAAb,CAAe,QAAf,CAAwB,aAAxB,CAAlC,CAAR,CACAW,KAAK,CAAGA,KAAK,CAAChC,MAAN,CAAaiC,qBAAqB,CAAC,IAAD,CAAM,aAAN,CAAoBZ,CAApB,CAAsBC,CAAC,CAAC/B,IAAxB,CAA6B+B,CAAC,CAAC9B,IAA/B,CAAlC,CAAR,CACA,MAAQ,CACNqC,GAAG,CAACA,GADE,CAENG,KAAK,CAACA,KAFA,CAAR,CAID,CAbD,CAcA,QAASC,CAAAA,qBAAT,CAA+B1C,IAA/B,CAAqC4C,KAArC,CAA4CrD,KAA5C,CAAmDsD,OAAnD,CAA4DC,OAA5D,CAAoE,CAClE,GAAMjC,CAAAA,QAAQ,CAAGb,IAAI,GAAG,KAAP,CAAa,MAAb,CAAoB,MAArC,CACA,GAAMiB,CAAAA,GAAG,WAAM1B,KAAN,aAAeS,IAAf,aAAuB6C,OAAvB,aAAkCC,OAAlC,CAAT,CACA,MAAQ,CACN1B,QAAQ,eAASP,QAAT,CADF,CAENC,OAAO,CAAE8B,KAFH,CAGNvB,OAAO,CAAEJ,GAHH,CAINK,SAAS,CAAEtB,IAJL,CAKNuB,SAAS,CAAEhC,KALL,CAMNiC,UAAU,CAAEqB,OANN,CAONpB,UAAU,CAAEqB,OAPN,CAQNpB,MAAM,CAAEb,QARF,CASNc,UAAU,CAAE,IATN,CAUNC,OAAO,CAAE,SAVH,CAAR,CAYD,CACD,cAAevC,CAAAA,WAAf","sourcesContent":["function StepFactory(stepInfo) {\r\n  const owner = stepInfo.currentStep;\r\n  const next = stepInfo.nextStep;\r\n  const prev = stepInfo.prevStep;\r\n  const isRetRevO = stepInfo.isRetRevO;\r\n  return getCtrls(owner, next,prev,isRetRevO);\r\n}\r\nfunction getCtrls(owner, next, prev, isRetRevO){\r\n  const hasRemoveSpecial = (owner.type==='menu'||((owner.type==='edit'||owner.type==='review')&&owner.name==='pizza'))?true:false;  \r\n  const isFinalReview = (owner.type==='review'&&owner.name==='order')?true:false;  \r\n  const revS = [['warn', owner.type==='menu'?'Discard pizza':'Remove this pizza', owner,owner,'remove']];\r\n  const comp = [['next', 'Complete Order', owner, owner, 'complete']];\r\n  const chng = [['next', \"Change Name\", owner, owner, 'change']];\r\n  const cancel = [['warn', 'Cancel order', owner, owner, 'cancel']];\r\n  let ctrlArry =[];\r\n  if(owner.type==='menu'){\r\n    const a = next.type==='menu'?next:{type:'special', name:'specialinstmsg'}\r\n    ctrlArry = ctrlArry.concat([['next', next.type==='menu'?`Next Step -> ${next.name}`:'Next Step -> Special Instructions', owner, a, 'goto']]);\r\n    ctrlArry = ctrlArry.concat([['prev', prev.type==='menu'?`Prev Step -> ${prev.name}`:'Start Over', owner, prev, 'goto']]);\r\n  } else if(owner.type==='edit'){\r\n    if(owner.name==='pizza'){      \r\n      const a = next.map((i)=>{\r\n        return [['next', `Edit ${i.name}`, owner, i, 'goto']]\r\n      })\r\n      ctrlArry = ctrlArry.concat(a);\r\n      ctrlArry = ctrlArry.concat([['prev', 'Finished with edits', owner, isRetRevO?{name:'order',type:'review'}:{name:'pizza',type:'review'}, 'goto']]);\r\n    } else {\r\n      ctrlArry = ctrlArry.concat([['next', 'Save Changes', owner, {name:'pizza', type:'edit'}, 'goto']]);\r\n      ctrlArry = ctrlArry.concat([['prev', 'Discard Changes', owner, {name:'pizza', type:'edit'}, 'goto']]);\r\n    }\r\n  } else if(owner.type==='review'){\r\n    if(owner.name==='pizza'){\r\n      ctrlArry = ctrlArry.concat([['next', 'Edit this Pizza', owner, {name:'pizza', type:'edit'}, 'goto']]);\r\n      ctrlArry = ctrlArry.concat([['next', 'Add another Pizza', owner, {name:'crusts', type:'new'}, 'goto']]);\r\n      ctrlArry = ctrlArry.concat([['next', 'Review Order', owner, {name:'order', type:'review'}, 'goto']]);\r\n    } else {\r\n      const a = next.map((i)=>{\r\n        return ['next', `Edit Pizza ${i.name}`, owner, i, 'goto']\r\n      })\r\n      ctrlArry = ctrlArry.concat(a);\r\n      ctrlArry = ctrlArry.concat([['next', 'Add another Pizza', owner, {name:'crusts', type:'menu'}, 'goto']]);\r\n    }  \r\n  }\r\n  ctrlArry =hasRemoveSpecial?ctrlArry.concat(revS):ctrlArry;\r\n  ctrlArry =isFinalReview?ctrlArry.concat(comp,chng):ctrlArry;\r\n  ctrlArry = ctrlArry.concat(cancel);\r\n  return (\r\n    ctrlArry.map((i)=>{\r\n      return buildCtrlObj(i[0],i[1],i[2],i[3],i[4]);\r\n    })\r\n  )\r\n}\r\nfunction buildCtrlObj(ctrlType, btnCapt, owner, target, tarFunc){\r\nconst key = `${owner.type}:${owner.name}-${tarFunc}(${target.type}:${target.name})`;\r\nconst specStep = tarFunc==='goto'?false:buildSpecialStep(tarFunc, owner);\r\n  return ({\r\n    btnClass: `btn-${ctrlType}`,\r\n    btnCapt: btnCapt,\r\n    listKey: key,\r\n    ownerType: owner.type,\r\n    ownerName: owner.name,\r\n    targetType: target.type,\r\n    targetName: target.name,\r\n    action:ctrlType,\r\n    hasSpecial: specStep,    \r\n    trigger: tarFunc,  \r\n  }) \r\n}\r\nfunction buildSpecialStep(type, prev){\r\n  const vals = (t,p)=> {\r\n    switch(t){\r\n      case 'remove':\r\n        return removeCtrl(t,p);\r\n      case 'cancel':\r\n        return cancelCtrl(t,p);\r\n      case 'complete':\r\n        return compCtrl(t,p);\r\n      case 'change':\r\n        return \r\n      default:changeCtrl(t,p)\r\n        return ''\r\n    }\r\n  }\r\n  const ctrlVals = vals(type,prev);\r\n  return({\r\n    stepMsg:ctrlVals.msg,\r\n    msgClass:`msg-${type}`,\r\n    stepCtrls:ctrlVals.ctrls,\r\n  })\r\n}\r\nconst cancelCtrl = (t,p)=>{\r\n  const msg ='Do you really want to cancel this order?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, go to main page',t,'cancel','mainpage'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, go to the store selection page',t,'cancel','storeselect'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes, restart this order',t,'cancel','restart'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst compCtrl = (t,p)=>{\r\n  const msg ='Complete this order and go to payment & confirmation?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'complete','order'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst changeCtrl = (t,p)=>{\r\n  const msg ='Do you really want to change the name for this order?';\r\n  let ctrls = [];\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'change','name'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nconst removeCtrl = (t,p) =>{\r\n  const pType = p.type;\r\n  const msg = pType==='menu'?'Are you sure you want to discard this pizza?':'Do you really want to remove this pizza?';\r\n  let ctrls = [];\r\n  if(pType==='menu'){\r\n    ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes-start over',t,'remove','restart'));\r\n  }\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('yes','Yes',t,'remove','revieworder'));\r\n  ctrls = ctrls.concat(buildConfirmationCtrl('no','No, go back',t,p.type,p.name));\r\n  return ({\r\n    msg:msg,\r\n    ctrls:ctrls,}\r\n  )\r\n}\r\nfunction buildConfirmationCtrl(type, label, owner, tarType, tarName){\r\n  const ctrlType = type==='yes'?'warn':'prev';\r\n  const key = `${owner}-${type}-${tarType}-${tarName}`\r\n  return ({\r\n    btnClass: `btn-${ctrlType}`,\r\n    btnCapt: label,\r\n    listKey: key,\r\n    ownerType: type,\r\n    ownerName: owner,\r\n    targetType: tarType,\r\n    targetName: tarName,\r\n    action: ctrlType,\r\n    hasSpecial: true,    \r\n    trigger: 'special',  \r\n  })\r\n}\r\nexport default StepFactory;"]},"metadata":{},"sourceType":"module"}