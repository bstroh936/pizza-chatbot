{"ast":null,"code":"//constants\nvar SETNAME='name';var STARTORDER='start';var UPDATEPIZZA='update';var SPECIALACT='special';var SETALERT='alert';var UPDATELOC='location';var RESET='reset';var EDITITEM='edit';var REVIEW='review';var SETINST='inst';var ADDNEW='add';var SETPIZZA='setpizza';//function\nexport var reducer=function reducer(action){return function(state,props){var values=action.values.appValues;var o=state.order;var m=state.menu;var d=state.display;var p=state.currentPizza;var l=state.locObj;var a=state.alert;var botDisp=values!==undefined&&values!==null&&values.hasOwnProperty('botDisplay')?values.botDisplay:false;var step=values!==undefined&&values!==null&&values.hasOwnProperty('step')?values.step:false;var ret={o:o,m:m,d:d,p:p,l:l,a:a};switch(action.type){case SETPIZZA:ret.p=o.GetPizzaByID(values.id);ret.d.page='NonMenuStep';ret.d.bot=true;ret.d.botDisplay='reviewPizza';break;case ADDNEW:var updateProps={item:'savePizza',pizza:p};if(p!==null){ret.o=o.UpdateOrder(updateProps);}ret.m.step='new';ret.d.page='Menu';ret.d.bot=true;ret.d.botDisplay='menuStep';break;case EDITITEM:ret.m.step=values.step;ret.d.page='Menu';ret.d.bot=true;ret.d.botDisplay='editItem';break;case REVIEW:ret.d.page='NonMenuStep';ret.d.bot=true;ret.d.botDisplay=botDisp;if(p!==null&&botDisp==='reviewOrder'){var _updateProps={item:'savePizza',pizza:p};ret.o=o.UpdateOrder(_updateProps);}break;case SETINST:ret.p.SpecialInstructions=values.inst;ret.d.page='NonMenuStep';ret.d.bot=true;ret.d.botDisplay='reviewPizza';break;case STARTORDER:ret.m.step=values.step;ret.o.ordername=values.name;ret.d.page='Menu';ret.d.bot=true;ret.d.botDisplay='menuStep';break;case UPDATEPIZZA:ret.d.botDisplay=values.botDisplay;if(botDisp==='menuStep'||botDisp==='editItem'){ret.m.step=step;}else if(step==='ask'){ret.d.prevDisplay=d;}break;case SETNAME://change name from reviewOrder menu\nret.o.ordername=values.name;ret.d.page='NonMenuStep';ret.d.bot=true;ret.d.botDisplay='reviewOrder';break;case SETALERT:ret.a=values;break;case UPDATELOC:var type=values.type;var display={page:'Location',bot:false,botDisplay:false};var hasPrev=state.display.hasOwnProperty('prevBot');var prev=hasPrev?state.display.prevBot:false;var loc=null;if(type==='change'){loc=state.locObj;loc.ChangeLoc();display.prevBot=prev;}else{loc=values.locObj;var chk=loc.searchStep==='done';if(chk){display.page='Main';display.bot=true;display.botDisplay=state.order.ordername?prev:'newOrder';}if(!prev||chk){delete display.prevBot;}else{display.prevBot=prev;}}ret.d=display;ret.l=loc;break;case RESET:ret.o=o.NewOrder;ret.m=m.step='new';ret.d={page:'Location',bot:false,botDisplay:false};ret.p=p.NewPizza;ret.l=props.locObj;ret.a=false;break;case SPECIALACT://handle remove/cancel/complete\nif(step==='no'){ret.d.page=d.prevDisplay.page;ret.d.bot=d.prevDisplay.bot;ret.d.botDisplay=d.prevDisplay.botDisplay;delete ret.d.prevDisplay;}else{if(botDisp==='remove'){var _updateProps2={item:'removePizza',pizza:p};ret.o=o.UpdateOrder(_updateProps2);if(values.step==='new'){ret.d.botDisplay='addNew';}else{ret.d.page='NonMenuStep';ret.d.bot=true;ret.d.botDisplay='reviewOrder';}}else if(botDisp==='cancel'){ret.p=p.NewPizza;ret.o=o.NewOrder;ret.m=m.step='new';if(step==='restart'){ret.d.page='Main';ret.d.bot=true;ret.d.botDisplay='newOrder';}else{ret.d.page='Location';ret.d.bot=false;ret.d.botDisplay=false;ret.l=step==='main'?props.locObj:l.ChangeLoc();}}else if(botDisp==='complete'){if(p!==null){var _updateProps3={item:'savePizza',pizza:p};ret.o=o.UpdateOrder(_updateProps3);}ret.d.page='Final';ret.d.bot=false;ret.d.botDisplay=false;}}break;default:}return{order:ret.o,menu:ret.m,display:ret.d,currentPizza:ret.p,alert:ret.a,locObj:ret.l};};};","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/AppReducer.jsx"],"names":["SETNAME","STARTORDER","UPDATEPIZZA","SPECIALACT","SETALERT","UPDATELOC","RESET","EDITITEM","REVIEW","SETINST","ADDNEW","SETPIZZA","reducer","action","state","props","values","appValues","o","order","m","menu","d","display","p","currentPizza","l","locObj","a","alert","botDisp","undefined","hasOwnProperty","botDisplay","step","ret","type","GetPizzaByID","id","page","bot","updateProps","item","pizza","UpdateOrder","SpecialInstructions","inst","ordername","name","prevDisplay","hasPrev","prev","prevBot","loc","ChangeLoc","chk","searchStep","NewOrder","NewPizza"],"mappings":"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","sourcesContent":["//constants\r\nconst SETNAME = 'name';\r\nconst STARTORDER = 'start'\r\nconst UPDATEPIZZA = 'update';\r\nconst SPECIALACT = 'special';\r\nconst SETALERT = 'alert';\r\nconst UPDATELOC = 'location';\r\nconst RESET = 'reset';\r\nconst EDITITEM = 'edit';\r\nconst REVIEW = 'review';\r\nconst SETINST = 'inst';\r\nconst ADDNEW = 'add';\r\nconst SETPIZZA = 'setpizza';\r\n//function\r\nexport const reducer = action => (state,props) =>{  \r\n  const values = action.values.appValues;  \r\n  const o=state.order;\r\n  const m=state.menu;\r\n  const d=state.display;\r\n  const p=state.currentPizza;\r\n  const l=state.locObj;\r\n  const a=state.alert;\r\n  const botDisp = (values!==undefined&&values!==null&&values.hasOwnProperty('botDisplay'))?values.botDisplay:false;\r\n  const step = (values!==undefined&&values!==null&&values.hasOwnProperty('step'))?values.step:false;\r\n  const ret ={o:o,m:m,d:d,p:p,l:l,a:a,};\r\n  switch (action.type){    \r\n    case SETPIZZA:\r\n      ret.p = o.GetPizzaByID(values.id);\r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='reviewPizza';\r\n      break;           \r\n    case ADDNEW:\r\n      const updateProps = {item:'savePizza', pizza:p};\r\n      if(p!==null){\r\n        ret.o = o.UpdateOrder(updateProps);\r\n      }\r\n      ret.m.step='new';\r\n      ret.d.page = 'Menu';\r\n      ret.d.bot = true;\r\n      ret.d.botDisplay = 'menuStep';\r\n      break;   \r\n    case EDITITEM:\r\n      ret.m.step = values.step;\r\n      ret.d.page='Menu';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='editItem';\r\n      break;\r\n    case REVIEW:        \r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay=botDisp;      \r\n      if(p!==null&&botDisp==='reviewOrder'){\r\n        const updateProps = {item:'savePizza', pizza:p};\r\n        ret.o = o.UpdateOrder(updateProps);\r\n      }\r\n      break;\r\n    case SETINST:\r\n      ret.p.SpecialInstructions = values.inst;\r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='reviewPizza';\r\n      break;      \r\n    case STARTORDER:      \r\n      ret.m.step = values.step;\r\n      ret.o.ordername = values.name;      \r\n      ret.d.page = 'Menu';\r\n      ret.d.bot = true;\r\n      ret.d.botDisplay = 'menuStep'      \r\n      break; \r\n    case UPDATEPIZZA:      \r\n      ret.d.botDisplay = values.botDisplay;\r\n      if(botDisp==='menuStep'||botDisp==='editItem'){\r\n        ret.m.step = step;\r\n      } else if(step==='ask'){\r\n        ret.d.prevDisplay = d;\r\n      }           \r\n      break;\r\n    case SETNAME:\r\n      //change name from reviewOrder menu\r\n      ret.o.ordername = values.name;\r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='reviewOrder';\r\n      break;       \r\n    case SETALERT:\r\n      ret.a = values;\r\n      break;      \r\n    case UPDATELOC:      \r\n      const type = values.type;\r\n      const display = {page:'Location', bot:false, botDisplay:false};\r\n      const hasPrev = state.display.hasOwnProperty('prevBot');\r\n      const prev = hasPrev?state.display.prevBot:false;      \r\n      let loc = null;\r\n      if(type==='change'){\r\n        loc = state.locObj;\r\n        loc.ChangeLoc();\r\n        display.prevBot = prev;                        \r\n      } else {\r\n        loc = values.locObj;\r\n        const chk = loc.searchStep==='done';        \r\n        if(chk){\r\n          display.page='Main';\r\n          display.bot = true\r\n          display.botDisplay=state.order.ordername?prev:'newOrder';          \r\n        }\r\n        if(!prev||chk){\r\n          delete display.prevBot;\r\n        } else {\r\n          display.prevBot = prev;\r\n        }\r\n      }\r\n      ret.d = display;\r\n      ret.l = loc;\r\n      break;    \r\n    case RESET:\r\n      ret.o=o.NewOrder;\r\n      ret.m=(m.step='new');\r\n      ret.d={page:'Location', bot:false, botDisplay:false};\r\n      ret.p=p.NewPizza;\r\n      ret.l=props.locObj;\r\n      ret.a=false;\r\n      break;\r\n    case SPECIALACT:\r\n      //handle remove/cancel/complete\r\n      if (step==='no'){\r\n        ret.d.page = d.prevDisplay.page;\r\n        ret.d.bot =d.prevDisplay.bot;\r\n        ret.d.botDisplay = d.prevDisplay.botDisplay;\r\n        delete ret.d.prevDisplay;\r\n      } else {\r\n        if(botDisp==='remove'){\r\n          const updateProps = {item:'removePizza', pizza:p};        \r\n          ret.o = o.UpdateOrder(updateProps);\r\n          if(values.step==='new'){\r\n            ret.d.botDisplay = 'addNew';            \r\n          } else {\r\n            ret.d.page='NonMenuStep';\r\n            ret.d.bot=true;\r\n            ret.d.botDisplay='reviewOrder';\r\n          }\r\n        } else if(botDisp==='cancel'){\r\n          ret.p = p.NewPizza;\r\n          ret.o = o.NewOrder;\r\n          ret.m = (m.step='new');\r\n          if(step==='restart'){\r\n            ret.d.page='Main';\r\n            ret.d.bot=true;\r\n            ret.d.botDisplay = 'newOrder';\r\n          } else {\r\n            ret.d.page='Location';\r\n            ret.d.bot=false;\r\n            ret.d.botDisplay=false;\r\n            ret.l = step==='main'?props.locObj:l.ChangeLoc();\r\n          }      \r\n        } else if(botDisp==='complete'){\r\n          if(p!==null){\r\n            const updateProps = {item:'savePizza', pizza:p};\r\n            ret.o = o.UpdateOrder(updateProps);\r\n          }\r\n          ret.d.page = 'Final';\r\n          ret.d.bot = false;\r\n          ret.d.botDisplay = false;\r\n        }\r\n      }\r\n      break;          \r\n    default:\r\n  }\r\n  return {\r\n    order:ret.o, \r\n    menu:ret.m, \r\n    display:ret.d, \r\n    currentPizza:ret.p,\r\n    alert:ret.a,\r\n    locObj:ret.l,\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}