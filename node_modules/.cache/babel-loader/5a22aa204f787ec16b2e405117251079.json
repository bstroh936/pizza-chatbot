{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import'../css/OrderStyle.css';import StepFactory from'./StepFactory';var OrderStep=/*#__PURE__*/function(_React$Component){_inherits(OrderStep,_React$Component);var _super=_createSuper(OrderStep);function OrderStep(props){var _this;_classCallCheck(this,OrderStep);_this=_super.call(this,props);var order=_this.props.step.metadata;_this.state={nameSet:order.orderName!=='',displayStep:order.GetDisplayStep(),trigger:false};_this.triggerNext=_this.triggerNext.bind(_assertThisInitialized(_this));_this.onSelect=_this.onSelect.bind(_assertThisInitialized(_this));return _this;}_createClass(OrderStep,[{key:\"triggerNext\",value:function triggerNext(props){var _this2=this;var order=this.props.step.metadata;if(!order.CurrentStepSelection(props)){alert(\"You must select one of the available \".concat(props.owner.name));return null;}var processTrigger=order.ProcessStep({trigger:props,key:this.props.step.key});var userMsg=processTrigger.userMsg;var trigger=processTrigger.trigger;//change current step info to with new 'key'\nvar stepKey=processTrigger.key;var genericStep=this.props.steps.pizzabuilder;this.props.step.id=stepKey;genericStep.id=stepKey;delete genericStep.metadata;this.props.steps[stepKey]=genericStep;//trigger next step in chatbot\nthis.props.step.trigger=trigger;var type=\"(\".concat(props.owner.type,\":\").concat(props.owner.name,\")=>(\").concat(props.target.type,\":\").concat(props.target.name,\")\");var data={preserveMsg:true,stepMsg:props.stepMsg,type:type,msg:userMsg};this.setState({trigger:true},function(){_this2.props.triggerNextStep(data);});}},{key:\"onSelect\",value:function onSelect(val){if(val===null||val===undefined)return null;var order=this.props.step.metadata;order.SelectPizzaItems(val);var dispStep=order.GetDisplayStep();this.setState({displayStep:dispStep});}},{key:\"componentDidMount\",value:function componentDidMount(){var order=this.props.step.metadata;if(!this.state.nameSet){var name=this.props.steps.ordername.value;order.StartNewOrder(name);var dispStep=order.GetDisplayStep();this.setState({displayStep:dispStep});}else if(order.getSpecial){var inst=this.props.steps.specialinstques.value==='yes'?this.props.steps.specialinstentry.value:'';order.AddSpecialInstructions(inst);var _dispStep=order.GetDisplayStep();this.setState({displayStep:_dispStep});}}},{key:\"render\",value:function render(){var dispStep=this.state.displayStep;if(dispStep===null){return null;}return/*#__PURE__*/React.createElement(StepFactory,{stepInfo:dispStep,onTrigger:this.triggerNext,onSelect:this.onSelect});}}]);return OrderStep;}(React.Component);export default OrderStep;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/OrderStep.jsx"],"names":["React","StepFactory","OrderStep","props","order","step","metadata","state","nameSet","orderName","displayStep","GetDisplayStep","trigger","triggerNext","bind","onSelect","CurrentStepSelection","alert","owner","name","processTrigger","ProcessStep","key","userMsg","stepKey","genericStep","steps","pizzabuilder","id","type","target","data","preserveMsg","stepMsg","msg","setState","triggerNextStep","val","undefined","SelectPizzaItems","dispStep","ordername","value","StartNewOrder","getSpecial","inst","specialinstques","specialinstentry","AddSpecialInstructions","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../css/OrderStyle.css';\r\nimport StepFactory from './StepFactory';\r\n\r\nclass OrderStep extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    const order = this.props.step.metadata;\r\n\r\n    this.state={\r\n      nameSet:order.orderName!=='',             \r\n      displayStep: order.GetDisplayStep(),           \r\n      trigger: false,      \r\n    }    \r\n    this.triggerNext = this.triggerNext.bind(this);\r\n    this.onSelect = this.onSelect.bind(this);    \r\n  }\r\n  \r\n  triggerNext(props){   \r\n    const order = this.props.step.metadata;\r\n    if(!order.CurrentStepSelection(props)){\r\n      alert(`You must select one of the available ${props.owner.name}`);\r\n      return null;\r\n    }        \r\n    const processTrigger = order.ProcessStep({trigger:props, key:this.props.step.key});\r\n    const userMsg = processTrigger.userMsg;\r\n    const trigger = processTrigger.trigger;\r\n    //change current step info to with new 'key'\r\n    const stepKey = processTrigger.key;    \r\n    const genericStep = this.props.steps.pizzabuilder;\r\n    this.props.step.id = stepKey;\r\n    genericStep.id = stepKey;\r\n    delete genericStep.metadata;\r\n    this.props.steps[stepKey] = genericStep; \r\n    \r\n    //trigger next step in chatbot\r\n    this.props.step.trigger = trigger;  \r\n\r\n    const type = `(${props.owner.type}:${props.owner.name})=>(${props.target.type}:${props.target.name})`;    \r\n    const data = {\r\n      preserveMsg:true,\r\n      stepMsg: props.stepMsg,      \r\n      type:type,\r\n      msg:userMsg,\r\n    }    \r\n    this.setState({trigger: true,}, () => {\r\n      this.props.triggerNextStep(data);\r\n    });\r\n  }\r\n  onSelect(val){\r\n    if(val===null||val===undefined) return null;\r\n    const order = this.props.step.metadata\r\n    order.SelectPizzaItems(val);    \r\n    const dispStep = order.GetDisplayStep();\r\n    this.setState({displayStep:dispStep});      \r\n  }  \r\n  componentDidMount(){\r\n    const order = this.props.step.metadata;    \r\n    if(!this.state.nameSet){\r\n      const name = this.props.steps.ordername.value;\r\n      order.StartNewOrder(name);\r\n      const dispStep = order.GetDisplayStep();\r\n      this.setState({displayStep:dispStep});      \r\n    } else if(order.getSpecial){\r\n      const inst = this.props.steps.specialinstques.value==='yes'?this.props.steps.specialinstentry.value:'';       \r\n      order.AddSpecialInstructions(inst);      \r\n      const dispStep = order.GetDisplayStep();\r\n      this.setState({displayStep:dispStep});\r\n    }    \r\n  }\r\n    \r\n  render(){    \r\n    const dispStep = this.state.displayStep;    \r\n    if(dispStep===null){\r\n      return null\r\n    }        \r\n    return <StepFactory stepInfo={dispStep} onTrigger={this.triggerNext} onSelect={this.onSelect}/>;\r\n  }  \r\n}\r\nexport default OrderStep;"]},"metadata":{},"sourceType":"module"}