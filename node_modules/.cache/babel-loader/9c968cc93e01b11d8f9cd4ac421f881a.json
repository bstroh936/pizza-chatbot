{"ast":null,"code":"import _classCallCheck from\"C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import Items from'../resources/menuItems.json';import Options from'../resources/menuOptions.json';var ItemMenu=/*#__PURE__*/function(){function ItemMenu(){_classCallCheck(this,ItemMenu);var arr=function arr(obj){var x;var ret=[];for(x in obj){ret=ret.concat(x);}return ret;};this.items=arr(Items);this.optList=arr(Options);this.stepNum=-1;this.outOfScope=false;}_createClass(ItemMenu,[{key:\"GetUserMsg\",value:function GetUserMsg(props){var n=this.GetStepProper(props.type);if(!props.hasOwnProperty('items')||props.items===null||props.items===undefined){return\"No \".concat(n,\" selected\");}else{if(props.type==='type'){var item=props.items['1'];var sID=item.hasOwnProperty('sizes')?item.sizes:false;var cID=item.hasOwnProperty('crusts')?item.crusts:false;if(!(sID&&cID)){return\"No \".concat(n,\" selected\");}var size=Options.sizes;var crust=Options.crusts;var s=size.find(function(i){return i.id===sID;});var c=crust.find(function(i){return i.id===cID;});return\"This pizza is a \".concat(s.caption,\" \").concat(c.caption);}else{var hasHalf=false;var itemValues=Items[props.type];var _item=itemValues.values;var half=itemValues.half?Options.half:false;var qty=itemValues.qty?Options.qty:false;var inc=props.items;var msg=_item.map(function(i){var isSel=inc.hasOwnProperty(i.id);if(!isSel){return{name:false};}var v=inc[i.id];var name=i.caption;var vHalf=half?v.half:'2';var vQty=qty?v.qty:'2';var h=half?half.filter(function(i){return i.id===vHalf;})[0]:false;var q=qty?qty.filter(function(i){return i.id===vQty;})[0]:false;if(vHalf!==2){hasHalf=true;};return{name:name,half:h?h.caption:'',qty:q?q.caption:'',hID:parseInt(vHalf)};});var ret=msg.filter(function(i){return i.name;});if(ret.length>1){ret.sort(function(a,b){return a.hID-b.hID;});};if(ret.length===0){return\"No \".concat(n,\" selected\");};var retArray=ret.map(function(i){if(!i.name){return'';};return\"\".concat(i.qty,\" \").concat(i.name).concat(hasHalf?\" \".concat(i.half):'');});return retArray.toString();}}}},{key:\"GetCaption\",value:function GetCaption(src,type,id){var item=function item(m,t,id){switch(m){case'items':var i=function i(t){switch(t){case'type':return Items.type.values;case'sauces':return Items.sauces.values;case'cheeses':return Items.cheeses.values;case'meats':return Items.meats.values;case'nonmeats':return Items.nonmeats.values;default:return null;}};var _item2=i(t);var f=_item2.find(function(i){return i.id===id;});var cap=f===undefined?'':f.caption;return cap;case'opts':var o=function o(t){switch(t){case'crusts':return Options.crusts;case'sizes':return Options.sizes;case'qty':return Options.qty;case'half':return Options.half;case'allergy':return Options.allergy;default:return null;}};var opt=o(t);var a=opt.find(function(i){return i.id===id;});var oc=a===undefined?'':a.caption;return oc;default:return null;}};return item(src,type,id);}},{key:\"GetDescription\",value:function GetDescription(src,type,id){var item=function item(m,t,id){switch(m){case'items':var i=function i(t){switch(t){case'type':return Items.type.values;case'sauces':return Items.sauces.values;case'cheeses':return Items.cheeses.values;case'meats':return Items.meats.values;case'nonmeats':return Items.nonmeats.values;default:return null;}};var _item3=i(t);var f=_item3.find(function(i){return i.id===id;});var cap=f===undefined?'':f.description;return cap;case'opts':var o=function o(t){switch(t){case'crusts':return Options.crusts;case'sizes':return Options.sizes;case'qty':return Options.qty;case'half':return Options.half;case'allergy':return Options.allergy;default:return null;}};var opt=o(t);var a=opt.find(function(i){return i.id===id;});var oc=a===undefined?'':a.description;return oc;default:return null;}};return item(src,type,id);}},{key:\"GetStepProper\",value:function GetStepProper(step){if(this.outOfScope){return'none';}if(step==='specialinstmsg'){return'Special Instructions';}else if(step==='ordername'){return'Name';}else{var c=this.checkStep(step);var s=c?step:this.getStep(this.getStepNum(step));if(s==='specialinstmsg'||s==='ordername'){return this.GetStepProper(s);}else if(!c){return'';}else{return Items[s].properU;}}}},{key:\"GetStepTrigger\",value:function GetStepTrigger(step){if(this.outOfScope){return'none';}var s=this.getStep(this.getStepNum(step));if(this.checkStep(s)){return'pizzabuilder';}else{return s;}}},{key:\"checkStep\",value:function checkStep(step){var i=this.items.findIndex(function(s){return s===step;});return i!==-1;}},{key:\"getStep\",value:function getStep(i){if(i>=this.items.length){return'specialinstmsg';}else if(i<0){return'2';}else{return this.items[i];}}},{key:\"getStepNum\",value:function getStepNum(val){var i=this.stepNum;switch(val){case'next':return i+1;case'prev':return i-1;case'new':return 0;default:var s=this.items.findIndex(function(s){return s===val;});return s<0?this.stepNum:s;}}},{key:\"step\",set:function set(val){if(val==='none'){this.outOfScope=true;}else{this.outOfScope=false;this.stepNum=this.getStepNum(val);}},get:function get(){if(this.outOfScope){return'none';}return this.getStep(this.stepNum);}},{key:\"StepObject\",get:function get(){if(this.outOfScope){return false;}var step=this.step;if(!this.checkStep(step)){return false;};var info=Items[step];return{menuType:step,botMsg:info.msg,caption:info.properU,properL:info.properL,next:this.GetStepProper('next'),prev:this.GetStepProper('prev'),content:{sizes:info.sizes?Options.sizes:false,crusts:info.crusts?Options.crusts:false,half:info.half?Options.half:false,qty:info.qty?Options.qty:false,values:info.values,allergy:Options.allergy}};}},{key:\"stepList\",get:function get(){var _this=this;return this.items.map(function(i){var name=_this.GetStepProper(i);return{val:i,name:name};});}}]);return ItemMenu;}();export default ItemMenu;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/itemMenu.jsx"],"names":["Items","Options","ItemMenu","arr","obj","x","ret","concat","items","optList","stepNum","outOfScope","props","n","GetStepProper","type","hasOwnProperty","undefined","item","sID","sizes","cID","crusts","size","crust","s","find","i","id","c","caption","hasHalf","itemValues","values","half","qty","inc","msg","map","isSel","name","v","vHalf","vQty","h","filter","q","hID","parseInt","length","sort","a","b","retArray","toString","src","m","t","sauces","cheeses","meats","nonmeats","f","cap","o","allergy","opt","oc","description","step","checkStep","getStep","getStepNum","properU","findIndex","val","info","menuType","botMsg","properL","next","prev","content"],"mappings":"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","sourcesContent":["import Items from '../resources/menuItems.json';\r\nimport Options from '../resources/menuOptions.json';\r\nclass ItemMenu{\r\n  constructor(){    \r\n    const arr = function(obj) {      \r\n      let x;\r\n      let ret = [];\r\n      for (x in obj){\r\n        ret = ret.concat(x); \r\n      }\r\n      return ret;\r\n    };    \r\n    this.items = arr(Items);\r\n    this.optList = arr(Options);\r\n    this.stepNum=-1;\r\n    this.outOfScope=false;         \r\n  }\r\n  set step(val){\r\n    if(val==='none')\r\n    {this.outOfScope=true;\r\n    } else {\r\n    this.outOfScope=false;\r\n    this.stepNum=this.getStepNum(val);\r\n    }\r\n\r\n  }\r\n  get step(){\r\n    if(this.outOfScope) {return 'none';}\r\n    return this.getStep(this.stepNum);\r\n  }\r\n  GetUserMsg(props){\r\n    const n = this.GetStepProper(props.type);\r\n    if(!props.hasOwnProperty('items')||props.items===null||props.items===undefined) {\r\n      return `No ${n} selected`\r\n    } else {\r\n      if(props.type==='type'){\r\n        const item = props.items['1'];\r\n        const sID = item.hasOwnProperty('sizes')?item.sizes:false;\r\n        const cID = item.hasOwnProperty('crusts')?item.crusts:false;\r\n        if(!(sID&&cID)){return `No ${n} selected`}\r\n        const size = Options.sizes;\r\n        const crust = Options.crusts;\r\n        const s = size.find((i)=>(i.id===sID));\r\n        const c = crust.find((i)=>(i.id===cID));\r\n        return `This pizza is a ${s.caption} ${c.caption}`;\r\n      } else {\r\n        let hasHalf=false;\r\n        const itemValues = Items[props.type];\r\n        const item = itemValues.values;\r\n        const half = itemValues.half?Options.half:false;\r\n        const qty = itemValues.qty?Options.qty:false;\r\n        const inc = props.items;\r\n        const msg = item.map((i)=>{\r\n          const isSel = inc.hasOwnProperty(i.id);\r\n          if(!isSel){return {name:false}}\r\n          const v = inc[i.id];\r\n          const name = i.caption;          \r\n          const vHalf = half?v.half:'2';\r\n          const vQty = qty?v.qty:'2';\r\n          const h = half?half.filter((i)=>(i.id===vHalf))[0]:false;\r\n          const q = qty?qty.filter((i)=>(i.id===vQty))[0]:false;\r\n          if(vHalf!==2){hasHalf=true};\r\n          return {name:name, half:h?h.caption:'', qty:q?q.caption:'', hID:parseInt(vHalf)}\r\n        })\r\n        const ret = msg.filter((i)=>{return i.name});\r\n        if(ret.length>1){ret.sort((a,b)=>{return a.hID-b.hID});};\r\n        if(ret.length===0){return `No ${n} selected`};\r\n        const retArray = ret.map((i)=>{\r\n          if(!i.name) {return ''};\r\n          return `${i.qty} ${i.name}${hasHalf?` ${i.half}`:''}`\r\n        })\r\n        return retArray.toString();\r\n      }      \r\n    }    \r\n  }\r\n  GetCaption(src,type,id){\r\n    const item = (m,t,id)=>{\r\n      switch(m){\r\n        case 'items':\r\n        const i = (t)=>{\r\n          switch(t){\r\n            case 'type':\r\n              return Items.type.values;\r\n            case 'sauces':\r\n              return Items.sauces.values;\r\n            case 'cheeses':\r\n              return Items.cheeses.values\r\n            case 'meats':\r\n               return Items.meats.values;\r\n            case 'nonmeats':\r\n              return Items.nonmeats.values;\r\n            default:\r\n              return null;\r\n          }\r\n        }\r\n        const item= i(t);\r\n        const f = item.find((i)=>i.id===id);\r\n        const cap = f===undefined?'':f.caption;  \r\n        return cap\r\n        case 'opts':\r\n          const o = (t)=>{\r\n            switch(t){\r\n              case 'crusts':\r\n                return Options.crusts;\r\n              case 'sizes':\r\n                return Options.sizes;\r\n              case 'qty':\r\n                return Options.qty;\r\n              case 'half':\r\n                 return Options.half;\r\n              case 'allergy':\r\n                return Options.allergy;\r\n              default:\r\n                return null;\r\n            }\r\n          }\r\n          const opt= o(t);\r\n          const a = opt.find((i)=>i.id===id);\r\n          const oc = a===undefined?'':a.caption; \r\n          return oc\r\n        default:\r\n          return null;}}   \r\n    return item(src,type,id);\r\n  }\r\n  GetDescription(src,type,id){\r\n    const item = (m,t,id)=> {\r\n      switch(m) {\r\n        case 'items':\r\n          const i = (t)=>{\r\n            switch(t){\r\n              case 'type':\r\n                return Items.type.values;\r\n              case 'sauces':\r\n                return Items.sauces.values;\r\n              case 'cheeses':\r\n                return Items.cheeses.values\r\n              case 'meats':\r\n                 return Items.meats.values;\r\n              case 'nonmeats':\r\n                return Items.nonmeats.values;\r\n              default:\r\n                return null;\r\n            }\r\n          }\r\n          const item= i(t);\r\n          const f = item.find((i)=>i.id===id);\r\n          const cap = f===undefined?'':f.description;  \r\n          return cap\r\n          case 'opts':\r\n            const o = (t)=>{\r\n              switch(t){\r\n                case 'crusts':\r\n                  return Options.crusts;\r\n                case 'sizes':\r\n                  return Options.sizes;\r\n                case 'qty':\r\n                  return Options.qty;\r\n                case 'half':\r\n                   return Options.half;\r\n                case 'allergy':\r\n                  return Options.allergy;\r\n                default:\r\n                  return null;\r\n              }\r\n            }\r\n            const opt= o(t);\r\n            const a = opt.find((i)=>i.id===id);\r\n            const oc = a===undefined?'':a.description; \r\n            return oc\r\n      default:\r\n        return null;\r\n      }\r\n    }\r\n    return item(src,type,id);\r\n  }\r\n  GetStepProper(step){\r\n    if(this.outOfScope) {return 'none';}\r\n    if(step==='specialinstmsg'){\r\n      return 'Special Instructions'\r\n    } else if(step==='ordername'){\r\n      return 'Name'\r\n    } else {     \r\n      const c = this.checkStep(step);\r\n      const s = c?step:this.getStep(this.getStepNum(step))\r\n      if(s==='specialinstmsg'||s==='ordername'){\r\n        return this.GetStepProper(s)\r\n      } else if(!c){\r\n        return ''\r\n      } else {\r\n        return Items[s].properU\r\n      }\r\n      \r\n    }\r\n  }\r\n  GetStepTrigger(step){\r\n    if(this.outOfScope) {return 'none';}\r\n    const s = this.getStep(this.getStepNum(step)) \r\n    if(this.checkStep(s)){\r\n      return 'pizzabuilder'\r\n    } else {\r\n      return s\r\n    }\r\n  }\r\n  get StepObject(){\r\n    if(this.outOfScope) {return false;}\r\n    const step = this.step;\r\n    if(!this.checkStep(step)){return false};\r\n    const info = Items[step];\r\n    return {\r\n      menuType: step,\r\n      botMsg:info.msg,\r\n      caption:info.properU,\r\n      properL:info.properL,\r\n      next:this.GetStepProper('next'),\r\n      prev:this.GetStepProper('prev'),\r\n      content: {        \r\n        sizes:info.sizes?Options.sizes:false,\r\n        crusts:info.crusts?Options.crusts:false,\r\n        half:info.half?Options.half:false,\r\n        qty:info.qty?Options.qty:false,\r\n        values:info.values,\r\n        allergy:Options.allergy,\r\n      }\r\n    };\r\n  }  \r\n  checkStep(step){\r\n    const i = this.items.findIndex(s => s === step)\r\n    return i!==-1\r\n  }\r\n  getStep(i){\r\n    if(i>=this.items.length){      \r\n      return 'specialinstmsg';\r\n    } else if(i<0){\r\n      return '2';\r\n    } else {     \r\n      return this.items[i];      \r\n    }   \r\n  }\r\n  getStepNum(val){\r\n    const i = this.stepNum;\r\n    switch (val){\r\n      case 'next':               \r\n        return i+1;        \r\n      case 'prev':\r\n        return i-1;        \r\n      case 'new':\r\n        return 0;        \r\n      default:\r\n        const s = this.items.findIndex(s => s === val);\r\n        return s<0?this.stepNum:s;        \r\n    }\r\n  }  \r\n  get stepList(){\r\n    return this.items.map((i)=>{\r\n      const name = this.GetStepProper(i);\r\n      return {val:i, name:name}\r\n    });\r\n  } \r\n}\r\nexport default ItemMenu;"]},"metadata":{},"sourceType":"module"}