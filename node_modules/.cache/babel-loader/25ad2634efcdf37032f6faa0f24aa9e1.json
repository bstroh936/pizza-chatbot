{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\TheTOP\\\\Documents\\\\GitHub\\\\pizza-chatbot-chk4\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Bubble from'./Bubble';import Image from'./Image';import ImageContainer from'./ImageContainer';import Loading from'../common/Loading';import TextStepContainer from'./TextStepContainer';var TextStep=/*#__PURE__*/function(_Component){_inherits(TextStep,_Component);var _super=_createSuper(TextStep);function TextStep(){var _this;_classCallCheck(this,TextStep);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true};_this.getMessage=function(){var _this$props=_this.props,previousValue=_this$props.previousValue,step=_this$props.step;var message=step.message;return message?message.replace(/{previousValue}/g,previousValue):'';};_this.renderMessage=function(){var _this$props2=_this.props,step=_this$props2.step,steps=_this$props2.steps,previousStep=_this$props2.previousStep,triggerNextStep=_this$props2.triggerNextStep;var component=step.component;if(component){return React.cloneElement(component,{step:step,steps:steps,previousStep:previousStep,triggerNextStep:triggerNextStep});}return _this.getMessage();};return _this;}_createClass(TextStep,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var _this$props3=this.props,step=_this$props3.step,speak=_this$props3.speak,previousValue=_this$props3.previousValue,triggerNextStep=_this$props3.triggerNextStep;var component=step.component,delay=step.delay,waitAction=step.waitAction;var isComponentWatingUser=component&&waitAction;setTimeout(function(){_this2.setState({loading:false},function(){if(!isComponentWatingUser&&!step.rendered){triggerNextStep();}speak(step,previousValue);});},delay);}},{key:\"render\",value:function render(){var _this$props4=this.props,step=_this$props4.step,isFirst=_this$props4.isFirst,isLast=_this$props4.isLast,avatarStyle=_this$props4.avatarStyle,bubbleStyle=_this$props4.bubbleStyle,hideBotAvatar=_this$props4.hideBotAvatar,hideUserAvatar=_this$props4.hideUserAvatar;var loading=this.state.loading;var avatar=step.avatar,user=step.user,botName=step.botName;var showAvatar=user?!hideUserAvatar:!hideBotAvatar;var imageAltText=user?\"Your avatar\":\"\".concat(botName,\"'s avatar\");return/*#__PURE__*/React.createElement(TextStepContainer,{className:\"rsc-ts \".concat(user?'rsc-ts-user':'rsc-ts-bot'),user:user},/*#__PURE__*/React.createElement(ImageContainer,{className:\"rsc-ts-image-container\",user:user},isFirst&&showAvatar&&/*#__PURE__*/React.createElement(Image,{className:\"rsc-ts-image\",style:avatarStyle,showAvatar:showAvatar,user:user,src:avatar,alt:imageAltText})),/*#__PURE__*/React.createElement(Bubble,{className:\"rsc-ts-bubble\",style:bubbleStyle,user:user,showAvatar:showAvatar,isFirst:isFirst,isLast:isLast},loading?/*#__PURE__*/React.createElement(Loading,null):this.renderMessage()));}}]);return TextStep;}(Component);TextStep.defaultProps={previousStep:{},previousValue:'',speak:function speak(){},steps:{}};export default TextStep;","map":{"version":3,"sources":["C:/Users/TheTOP/Documents/GitHub/pizza-chatbot-chk4/src/components/chatbot/steps_components/text/TextStep.jsx"],"names":["React","Component","Bubble","Image","ImageContainer","Loading","TextStepContainer","TextStep","state","loading","getMessage","props","previousValue","step","message","replace","renderMessage","steps","previousStep","triggerNextStep","component","cloneElement","speak","delay","waitAction","isComponentWatingUser","setTimeout","setState","rendered","isFirst","isLast","avatarStyle","bubbleStyle","hideBotAvatar","hideUserAvatar","avatar","user","botName","showAvatar","imageAltText","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Bubble from './Bubble';\r\nimport Image from './Image';\r\nimport ImageContainer from './ImageContainer';\r\nimport Loading from '../common/Loading';\r\nimport TextStepContainer from './TextStepContainer';\r\n\r\nclass TextStep extends Component {\r\n  /* istanbul ignore next */\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { step, speak, previousValue, triggerNextStep } = this.props;\r\n    const { component, delay, waitAction } = step;\r\n    const isComponentWatingUser = component && waitAction;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!isComponentWatingUser && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  getMessage = () => {\r\n    const { previousValue, step } = this.props;    \r\n    const { message } = step;      \r\n    return message ? message.replace(/{previousValue}/g, previousValue) : '';\r\n  };\r\n\r\n  renderMessage = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    if (component) {      \r\n      return React.cloneElement(component, {\r\n        step,\r\n        steps,\r\n        previousStep,\r\n        triggerNextStep\r\n      });\r\n    }    \r\n    return this.getMessage();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      isFirst,\r\n      isLast,\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar\r\n    } = this.props;\r\n    const { loading } = this.state;\r\n    const { avatar, user, botName } = step;\r\n\r\n    const showAvatar = user ? !hideUserAvatar : !hideBotAvatar;\r\n\r\n    const imageAltText = user ? \"Your avatar\" : `${botName}'s avatar`;\r\n    return (\r\n      <TextStepContainer className={`rsc-ts ${user ? 'rsc-ts-user' : 'rsc-ts-bot'}`} user={user}>\r\n        <ImageContainer className=\"rsc-ts-image-container\" user={user}>\r\n          {isFirst && showAvatar && (\r\n            <Image\r\n              className=\"rsc-ts-image\"\r\n              style={avatarStyle}\r\n              showAvatar={showAvatar}\r\n              user={user}\r\n              src={avatar}\r\n              alt={imageAltText}\r\n            />\r\n          )}\r\n        </ImageContainer>\r\n        <Bubble\r\n          className=\"rsc-ts-bubble\"\r\n          style={bubbleStyle}\r\n          user={user}\r\n          showAvatar={showAvatar}\r\n          isFirst={isFirst}\r\n          isLast={isLast}\r\n        >\r\n          {loading ? <Loading /> : this.renderMessage()}\r\n        </Bubble>\r\n      </TextStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nTextStep.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  isFirst: PropTypes.bool.isRequired,\r\n  isLast: PropTypes.bool.isRequired,\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  hideBotAvatar: PropTypes.bool.isRequired,\r\n  hideUserAvatar: PropTypes.bool.isRequired,\r\n  previousStep: PropTypes.objectOf(PropTypes.any),\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any),\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nTextStep.defaultProps = {\r\n  previousStep: {},\r\n  previousValue: '',\r\n  speak: () => {},\r\n  steps: {}\r\n};\r\n\r\nexport default TextStep;\r\n"]},"metadata":{},"sourceType":"module"}