{"version":3,"sources":["components/PizzaOrder.jsx","components/AppElements/Util/ProgressBar.jsx","components/AppElements/Util/PizzaCartIcon.jsx","resources/SliceLogo.png","components/Header.jsx","resources/GeoIcon.jsx","components/StoreLoc.jsx","resources/pizza-main-area.jpg","components/AppElements/Elements/MenuToolTip.jsx","components/AppElements/Elements/RowTitle.jsx","components/AppElements/Buttons/ChangeHalfButton.jsx","components/AppElements/Buttons/ChangeQtyBtn.jsx","components/AppElements/Buttons/NavButton.jsx","components/AppElements/Elements/RowElement.jsx","components/AppElements/Elements/TableDisplay.jsx","components/AppElements/Elements/PopupMenu.jsx","components/ConfirmationPage.jsx","components/MainArea.jsx","components/chatbot/common/rgba.js","components/chatbot/common/animations.jsx","components/chatbot/steps_components/common/LoadingStep.jsx","components/chatbot/steps_components/common/Loading.jsx","components/chatbot/steps_components/custom/CustomStepContainer.jsx","components/chatbot/steps_components/custom/CustomStep.jsx","components/chatbot/steps_components/options/Option.jsx","components/chatbot/theme.js","components/chatbot/steps_components/options/OptionElement.jsx","components/chatbot/steps_components/options/Options.jsx","components/chatbot/steps_components/options/OptionsStepContainer.jsx","components/chatbot/steps_components/options/OptionsStep.jsx","components/chatbot/steps_components/text/Bubble.jsx","components/chatbot/steps_components/text/Image.jsx","components/chatbot/steps_components/text/ImageContainer.jsx","components/chatbot/steps_components/text/TextStepContainer.jsx","components/chatbot/steps_components/text/TextStep.jsx","components/chatbot/schemas/userSchema.js","components/chatbot/schemas/textSchema.js","components/chatbot/schemas/optionsSchema.js","components/chatbot/schemas/customSchema.js","components/chatbot/schemas/updateSchema.js","components/chatbot/schemas/schema.js","components/chatbot/components/ChatBotContainer.jsx","components/chatbot/components/Content.jsx","components/chatbot/components/Header.jsx","components/chatbot/components/HeaderTitle.jsx","components/chatbot/components/HeaderIcon.jsx","components/chatbot/components/FloatButton.jsx","components/chatbot/components/FloatingIcon.jsx","components/chatbot/components/Footer.jsx","components/chatbot/components/Input.jsx","components/chatbot/components/SubmitButton.jsx","components/chatbot/recognition.js","components/chatbot/icons/ChatIcon.jsx","components/chatbot/icons/CloseIcon.jsx","components/chatbot/icons/SubmitIcon.jsx","components/chatbot/icons/MicIcon.jsx","components/chatbot/utils.js","components/chatbot/speechSynthesis.js","components/chatbot/ChatBot.jsx","components/chatbot/storage.js","components/AppElements/Steps/MenuSteps/PizzaType.jsx","components/AppElements/Steps/MenuSteps/Sauce.jsx","components/AppElements/Steps/MenuSteps/Topping.jsx","components/AppElements/Steps/MenuStep.jsx","components/AppElements/Steps/CancelStep.jsx","components/AppElements/Steps/EditItemStep.jsx","components/AppElements/Steps/RemoveStep.jsx","components/AppElements/Steps/ReviewOrderStep.jsx","components/AppElements/Steps/ReviewPizzaStep.jsx","components/SliceBot/BotStep.jsx","components/AppElements/Steps/SpecialStep.jsx","components/SliceBot/BotDisplay.jsx","components/AppElements/Util/BotAlertMsg.jsx","components/AppReducer.jsx","components/Pizza.jsx","components/itemMenu.jsx","components/App.js","serviceWorker.js","index.js","components/Location.jsx"],"names":["PizzaOrder","UpdateOrder","props","item","orderName","name","pizza","PizzaID","lastID","pizzas","current","all","id","i","findIndex","p","splice","concat","SavePizzaToOrder","this","val","length","map","cnt","ProgressBar","arrowRight","width","height","viewBox","className","fill","xmlns","fillRule","d","role","style","aria-valuenow","aria-valuemin","aria-valuemax","href","onClick","console","log","React","Component","StyledBadge","withStyles","theme","badge","right","top","border","palette","background","paper","padding","Badge","HtmlTooltip","tooltip","backgroundColor","color","maxWidth","fontSize","typography","pxToRem","Tooltip","getModalStyle","display","alignItems","justifyContent","useStyles","makeStyles","position","boxShadow","shadows","spacing","PizzaCartIcon","classes","useState","modalStyle","open","setOpen","body","title","Fragment","Typography","arrow","placement","enterDelay","IconButton","aria-label","badgeContent","Modal","onClose","aria-labelledby","aria-describedby","Header","updateAppState","locObj","curStore","curStoreInfo","isStore","storeName","storeHours","hours","storeChange","src","logo","alt","type","values","GeoIcon","preserveAspectRatio","version","transform","defaultProps","undefined","StoreSearchMenu","MakeGeoDialog","updateLoc","MakeUserDialog","forwardedRef","MakePrevDialog","hasErr","geoErr","capStr","geoErrMsg","geoZip","clsStr","ret","userErr","userErrMsg","onKeyDown","event","key","preventDefault","ref","prev","prevStoreID","storeInfo","StoreSelectMenu","searchLoc","storeList","storeID","store","sel","dist","StoreLoc","loc","resetLoc","obj","method","usrStr","value","storeSearch","storeLoc","searchStep","setState","locMode","appValues","mode","state","bind","prevProps","show","MenuToolTip","caption","description","replace","component","StaticTitle","rowTitle","root","ChangeHalfButton","half","setHalf","icon","PizzaHalfIcon","x","changeHalf","trans","path","SvgIcon","margin","IncreaseQty","itemTypeName","QtyButton","ariaLabel","changeQty","DecreaseQty","iconButton","CustomNavButton","textTransform","lineHeight","borderColor","fontFamily","join","Button","NavButton","isDisabled","hasOwnProperty","variant","disabled","flexGrow","textAlign","text","secondary","createRowString","stringVal","hasHalf","qty","StaticRowElement","typeCaption","itemID","captions","hasQty","maxQty","setQty","handleMenuSelect","des","cap","qtyDescription","halfDescription","qtyCaption","halfCaption","displayName","displayCaption","halfDisplay","Grid","xs","lowerQty","lowQtyDescription","raiseQty","highQtyDescription","container","direction","justify","StyledTableCell","head","common","black","white","TableCell","StyledTableRow","action","hover","TableRow","flex","paddingLeft","paddingRight","marginBottom","table","minWidth","SingleTableDisplay","selected","setSelected","pizzaId","selByPizza","rows","pizzaInfo","menuList","pizzaItems","items","itemMsg","hasSpecInst","specinst","itemSum","itemSummary","specInt","SummaryRows","PizzaInfo","menu","stepList","summaryMsg","Toolbar","align","TableContainer","Paper","Table","size","TableHead","TableBody","row","index","isItemSelected","newSelect","retSel","handleSelect","handleClick","tabIndex","scope","MultiTableDisplay","pizzaList","handlePizzaSelect","toolBar","lentgh","pInfo","PopupMenu","anchorEl","setAnchorEl","itemTypeCaption","itemList","initialLabel","menuToolTipCaption","menuToolTipDescription","label","menuItems","menuItem","MenuItem","handleMenuItemSelect","button","aria-controls","aria-haspopup","currentTarget","Menu","keepMounted","Boolean","ConfirmationPage","botState","getBotState","order","locName","locHours","oSum","OrderSummary","msg","MainArea","showPage","passThroughProps","pizzaImage","dispComp","hexToRgb","hex","m","r","g","b","result","exec","parseInt","rgba","alpha","loading","keyframes","scale","invalidInput","LoadingStep","styled","span","delay","Loading","ChatStepContainer","div","CustomStep","renderComponent","step","steps","previousStep","triggerNextStep","cloneElement","speak","previousValue","waitAction","setTimeout","rendered","CustomStepContainer","Option","li","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","OptionElement","defaultTheme","Options","ul","OptionsStepContainer","OptionsStep","onOptionClick","renderOption","option","bubbleOptionStyle","user","options","Object","keys","Bubble","isFirst","isLast","showAvatar","Image","img","ImageContainer","TextStepContainer","TextStep","getMessage","message","renderMessage","isComponentWatingUser","avatarStyle","bubbleStyle","hideBotAvatar","hideUserAvatar","avatar","botName","imageAltText","types","required","schema","parse","parser","userSchema","textSchema","optionsSchema","customSchema","update","Error","stringify","updateSchema","len","indexOf","error","checkInvalidIds","triggerId","trigger","optionsTriggerIds","filter","optionTriggerId","ChatBotContainer","floating","floatingStyle","bottom","left","opened","transformOrigin","Content","hideInput","HeaderTitle","h2","HeaderIcon","a","FloatButton","FloatingIcon","Footer","Input","input","invalid","css","hasButton","SubmitButton","speaking","instance","noop","Recognition","onChange","onEnd","onStop","lang","inputValue","onResult","setup","window","interimTranscript","finalTranscript","recognition","stop","force","resultIndex","results","isFinal","transcript","onFinal","nextState","assign","isSupported","webkitSpeechRecognition","continuous","interimResults","onresult","onend","start","ChatIcon","CloseIcon","SubmitIcon","points","MicIcon","isMobile","test","navigator","userAgent","isString","speakFn","speechSynthesisOptions","voice","enable","SpeechSynthesisUtterance","speechSynthesis","metadata","getSpeakText","ChatBot","onNodeInserted","target","enableSmoothScroll","supportsScrollBehavior","scroll","scrollHeight","behavior","scrollTop","onResize","content","onRecognitionChange","onRecognitionEnd","handleSubmitButton","onRecognitionStop","onValueChange","getTriggeredStep","generateRenderedStepsById","getStepMessage","previousSteps","lastStepIndex","data","enableMobileAutoFocus","defaultUserSettings","renderedSteps","currentStep","isEnd","end","hideExtraControl","handleEnd","o","pop","push","userMsg","stepMsg","botStepMsg","hasUserMessage","preserveMsg","defaultBotSettings","isSpecialStep","botAvatar","thisStepMsg","nextS","settings","out","nextStep","updateStep","Random","focus","cache","cacheName","cachedData","localStorage","setItem","storage","isInputValueEmpty","isLastPosition","stepIndex","s","asMessage","isFirstPosition","lastStep","handleKeyPress","submitUserMessage","recognitionEnable","validator","checkInvalidInput","blur","toString","inputInvalid","toggleChatBot","toggleFloating","renderStep","customStyle","setContentRef","element","setInputRef","botDelay","customDelay","userAvatar","chatSteps","userDelay","defaultCustomSettings","firstStep","recognitionLang","document","documentElement","addEventListener","params","callback","unParsedCache","getItem","renderedStep","removeItem","info","removeEventListener","customControl","contentStyle","extraControl","controlStyle","floatingIcon","footerStyle","headerComponent","headerTitle","hideHeader","hideSubmitButton","inputStyle","placeholder","inputAttributes","recognitionPlaceholder","submitButtonStyle","header","inputPlaceholder","inputAttributesOverride","onKeyPress","PizzaTypeStep","initialized","setInitialzied","updateItem","stepData","setSize","crust","setCrust","ini","initial","crusts","sizes","menuType","selMenuType","selItem","c","initializeSelection","displayElements","doUpdate","chk","SauceStep","sauce","setSauce","sauces","find","q","selName","qtyVal","ToppingStep","setItems","forEach","e","itemRows","h","qVal","hVal","itemVal","DisplayComponents","PizzaType","Sauce","topping","Topping","StepComponents","menuStep","triggerNext","botData","botStepData","StepObject","GetPizzaItems","triggerRet","updateData","botDisplay","stepValues","botStepKey","botMsg","StepDisplay","t","displayType","stepID","getStepNum","stepName","getStep","incItem","status","checkAlert","GetUserMsg","PizzaItems","cancel","handleNext","editItem","remove","reviewOrder","editID","editIsDisabled","editCapt","remCapt","ordername","reviewPizza","newOrder","prevStepValue","prevState","nextProps","changeName","retVal","usermsg","isuser","onTrigger","specialInstructions","prevStepID","BotStep","bot","substring","genericStep","pizzabuilder","StepComponent","SliceBot","completeOrder","showBot","marginTop","BotAlertMsg","handleClose","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","Pizza","ItemMenu","arr","Items","optList","stepNum","outOfScope","n","GetStepProper","sID","cID","itemValues","inc","v","vHalf","vQty","hID","sort","f","cheeses","meats","nonmeats","allergy","checkStep","properU","properL","next","App","currentPizza","l","alert","botDisp","GetPizzaByID","page","updateProps","newO","SpecialInstructions","inst","prevDisplay","prevBot","ChangeLoc","NewOrder","NewPizza","Order","createRef","PizzaCount","location","hostname","match","initLoc","resolveGeoLoc","isResolved","entryErr","errMsg","zip","cityState","previous","search","didChange","stores","then","city","locOpt","timeout","maximumAge","Promise","resolve","reject","geolocation","getCurrentPosition","lat","coords","latitude","long","longitude","tZip","lookupByCoords","code","z","trim","cs","lookup","searchErr","res","err","userZip","userCityState","geoCityState","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.e8ae0373.chunk.js","sourcesContent":["class PizzaOrder {\r\n  constructor() {\r\n    this.orderName= false;\r\n    this.pizzas= [];    \r\n    this.lastID = 0;                        \r\n  }\r\n  get NewOrder(){\r\n    const n = new PizzaOrder();\r\n    return n;\r\n  }\r\n  UpdateOrder = (props) => {\r\n    switch(props.item){\r\n      case 'name':\r\n        this.orderName = props.name;\r\n        break;      \r\n      case 'savePizza':\r\n        const pizza = props.pizza;\r\n        const id = pizza.PizzaID\r\n        if(id===0){\r\n          pizza.PizzaID = this.lastID+1;\r\n          this.lastID++;\r\n        }\r\n        this.pizzas = SavePizzaToOrder(props.pizza, this.pizzas);\r\n        break;      \r\n      case 'removePizza':\r\n        if(props.id!==0){           \r\n          const i = this.pizzas.findIndex(p => p.PizzaID === props.id);    \r\n          if(i!==-1){\r\n            this.pizzas.splice(i,1);      \r\n          }\r\n        }  \r\n        break;\r\n      default:        \r\n    }\r\n    return this;\r\n  }\r\n  GetPizzaByID(id){\r\n    const i = this.pizzas.findIndex(p => p.PizzaID === id);\r\n    if(i!==-1){\r\n      return this.pizzas[i];      \r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  set ordername(val){\r\n    this.orderName = val;\r\n  }   \r\n  get ordername(){\r\n    return this.orderName;\r\n  }      \r\n  get PizzaCount(){\r\n    return this.pizzas.length;\r\n  }  \r\n  get PizzaList(){\r\n    return this.pizzas.map((p)=> {return p.PizzaID})\r\n  }\r\n  get OrderSummary(){\r\n    return {name:this.orderName, pizzas:this.pizzas, cnt:this.pizzas.length}\r\n  }\r\n}\r\nexport default PizzaOrder;\r\n\r\nfunction SavePizzaToOrder(current, all){    \r\n  if(current===null) return null;      \r\n  const id = current.PizzaID;\r\n  const i = all.findIndex(p => p.PizzaID === id);\r\n  if(i!==-1){\r\n    //Override existing pizza\r\n    return all.splice(i,1,current);\r\n  }\r\n  else {    \r\n    return all.concat(current);\r\n  }  \r\n}","import React from 'react';\r\n\r\nclass ProgressBar extends React.Component{\r\nrender(){\r\n  const arrowRight = <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className=\"bi bi-arrow-right\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path fillRule=\"evenodd\" d=\"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"/>\r\n   </svg>;\r\n  return (\r\n    <div className=\"container\">\r\n        <div className=\"progress\">\r\n          <div className=\"progress-bar bg-warning progress-bar-striped progress-bar-animated\" role=\"progressbar\" style={{width: '25%'}} aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n        </div>\r\n        <ul className=\"nav justify-content-center info\">\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/pizza-chatbot\">Search for location</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/pizza-chatbot\" onClick={()=> console.log('Hello!')}>Select location</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/slicebot\">Order pizzas</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/review\">Review order</a>\r\n          </li>\r\n          {arrowRight}\r\n          <li className=\"nav-item\">\r\n            <a className=\"nav-link disabled\" href=\"/summary\">Payment \t&amp; Confirmation</a>\r\n          </li>\r\n        </ul>\r\n        </div>\r\n  )\r\n}\r\n}\r\nexport default ProgressBar;","import React from 'react';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport {Badge,Modal,Typography,Tooltip,IconButton} from '@material-ui/core/';\r\nimport { withStyles,makeStyles } from '@material-ui/core/styles';\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    right: -3,\r\n    top: 0,\r\n    border: `2px solid ${theme.palette.background.paper}`,\r\n    padding: '0 4px',\r\n  },\r\n}))(Badge);\r\nconst HtmlTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 400,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}))(Tooltip);\r\nfunction getModalStyle() {\r\n  return {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  };\r\n}\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '2px solid #000',\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n}));\r\nfunction PizzaCartIcon(props){\r\n  const cnt = props.cnt;\r\n  const classes = useStyles();  \r\n  const [modalStyle] = React.useState(getModalStyle);\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <h2 id=\"simple-modal-title\">Cart</h2>\r\n      <p id=\"simple-modal-description\">\r\n        Your cart is empty.\r\n      </p>\r\n      <PizzaCartIcon />\r\n    </div>\r\n  );  \r\n  return (\r\n    <>\r\n    <HtmlTooltip title={\r\n        <React.Fragment><Typography color=\"inherit\">Pizza Cart</Typography>Click here to view your pizza cart</React.Fragment>}\r\n        arrow placement=\"bottom-end\" enterDelay={100}>\r\n      <IconButton aria-label=\"cart\">\r\n        <StyledBadge badgeContent={cnt} color=\"secondary\">\r\n          <ShoppingCartIcon onClick={handleOpen}/>\r\n        </StyledBadge>\r\n      </IconButton>\r\n    </HtmlTooltip>\r\n    <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n      </>\r\n  )\r\n}\r\nexport default PizzaCartIcon;","export default \"data:image/png;base64,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\"","import React from 'react';\r\nimport ProgressBar from './AppElements/Util/ProgressBar';\r\nimport PizzaCartIcon from './AppElements/Util/PizzaCartIcon';\r\nimport logo from '../resources/SliceLogo.png';\r\n\r\nclass Header extends React.Component {  \r\n  render(){    \r\n    const updateAppState = this.props.updateAppState;\r\n    const locObj = this.props.locObj;\r\n    const cnt = this.props.cnt;\r\n    const curStore = locObj.curStoreInfo;\r\n    const isStore = curStore.isStore;              \r\n    const storeName = curStore.name;\r\n    const storeHours = isStore?curStore.hours:null;\r\n    const storeChange = isStore?'Change Location':null;\r\n      \r\n    return (\r\n      <header>\r\n        <a href=\"/pizza-chatbot\"><img src={logo} alt=\"Logo\"></img>\r\n        <h1>Slice</h1></a>\r\n        <PizzaCartIcon cnt={cnt} />\r\n        <div className=\"bannerHead\">\r\n          <div className=\"bannerName\">{storeName}</div>\r\n          <div className=\"bannerHours\">{storeHours}</div>\r\n          <div className=\"bannerChange\" onClick={() => {return updateAppState({type:'location', values:{type:'change'}})}}>{storeChange}</div>\r\n        </div>\r\n        <ProgressBar/>                \r\n      </header>\r\n    );\r\n  } \r\n}\r\nexport default Header;","\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction GeoIcon({className, fill, viewBox}) {\r\n  return (\r\n    <svg width=\"15%\" height=\"15%\" viewBox={viewBox} className={className} preserveAspectRatio=\"xMidYMid meet\" version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <g fill={fill} transform=\"translate(0.000000,670.000000) scale(0.100000,-0.100000)\">\r\n      <path d=\"M2847 6654 c-931 -135 -1617 -925 -1617 -1862 0 -583 266 -1292 776 -2069 283 -432 655 -901 1014 -1280 l88 -92 84 87 c409 422 845 984 1150 1482 378 617 586 1166 638 1679 100 1004 -599 1904 -1595 2052 -155 23 -391 24 -538 3z m506 -898 c170 -44 321 -132 452 -265 118 -120 204 -269 246 -428 32 -119 37 -320 11 -445 -33 -160 -105 -306 -211 -431 -297 -350 -799 -447 -1199 -230 -234 126 -399 330 -479 590 -25 81 -27 102 -27 263 -1 154 2 184 22 255 111 383 416 653 808 715 97 15 267 4 377 -24z\"/>\r\n      <path d=\"M1699 2095 c-888 -178 -1471 -496 -1574 -859 -13 -42 -16 -84 -13 -147 4 -78 9 -97 46 -172 121 -244 442 -456 947 -623 412 -136 861 -220 1430 -266 242 -20 979 -17 1215 5 561 52 974 131 1365 261 516 172 838 387 957 642 43 92 50 219 18 314 -114 340 -639 639 -1426 814 -183 40 -343 70 -348 65 -11 -14 -186 -261 -186 -264 0 -1 24 -5 53 -9 92 -12 389 -75 494 -105 302 -87 526 -204 598 -313 38 -58 45 -130 17 -184 -147 -285 -1046 -484 -2187 -484 -1017 0 -1877 167 -2124 412 -56 56 -73 90 -73 149 1 84 48 146 175 229 162 107 430 197 789 265 106 20 203 39 215 41 20 4 14 15 -70 134 -84 118 -95 130 -122 129 -16 0 -105 -15 -196 -34z\"/>\r\n    </g>\r\n    </svg>\r\n  );\r\n}\r\nGeoIcon.propTypes= {\r\n  className: PropTypes.string,\r\n  fill: PropTypes.string,\r\n  viewBox: PropTypes.string,\r\n};\r\nGeoIcon.defaultProps = {\r\n  className: undefined,\r\n  fill: \"#000000\",\r\n  viewBox: \"0 0 620.000000 670.000000\",\r\n};\r\nexport default GeoIcon","import React from 'react';\r\n//import {Route,Redirect} from 'react-router-dom';\r\nimport GeoIcon from '../resources/GeoIcon.jsx';\r\nimport '../css/StoreLoc.css';\r\n\r\nclass StoreLoc extends React.Component {\r\n  constructor(props){\r\n    super(props);    \r\n    const mode = this.props.locObj===undefined?'':this.props.locObj.searchStep\r\n    this.state = {\r\n      locMode:mode,           \r\n    };\r\n    this.updateLoc = this.updateLoc.bind(this);   \r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(this.props.locObj!==prevProps.locObj){\r\n      this.setState({     \r\n        locMode:this.props.locObj.searchStep,              \r\n      });\r\n    }\r\n  }\r\n  updateLoc = (p)=>{\r\n    const loc = this.props.locObj\r\n    const values = {type:'loc', locObj:null};\r\n    switch(p.type){\r\n      case 'reset':\r\n        loc.resetLoc();\r\n        \r\n        break;\r\n      case 'search':\r\n        const obj = {method: p.values,\r\n          usrStr: p.values==='User Entry'?this.props.forwardedRef.current.value:''};\r\n        loc.storeSearch = obj;\r\n        break;\r\n      case 'select':\r\n        loc.storeLoc = p.values;\r\n      break;\r\n      default:\r\n    }\r\n    values.locObj = loc;\r\n    values.type = loc.searchStep;\r\n    this.setState({locMode:loc.searchStep}, ()=> {\r\n      this.props.updateAppState({type:'location',values:{appValues:values}})\r\n    });\r\n  }  \r\n  render(){    \r\n    const show= (type)=>{\r\n      switch(type){\r\n        case 'search':\r\n          return <StoreSearchMenu locObj={this.props.locObj} forwardedRef={this.props.forwardedRef} updateLoc={(p)=>{return this.updateLoc(p)}}/>\r\n        case 'select':\r\n          return (/*<><Redirect to=\"/pizza-chatbot/locations\" /><Route path=\"/pizza-chatbot/locations\" component={() =>*/ \r\n          <StoreSelectMenu locObj={this.props.locObj} updateLoc={(p)=>{return this.updateLoc(p)}}/>\r\n          /*}}/></>*/)\r\n        default:\r\n          return null;\r\n      }\r\n    }    \r\n    return(\r\n      <>{show(this.state.locMode)}</>\r\n    )\r\n  }\r\n}\r\n\r\nfunction StoreSearchMenu(props) {\r\n  const locObj = props.locObj;\r\n  return (\r\n    <>\r\n    <div className=\"searchPage\">\r\n    <div className=\"searchGreeting\">Find your Slice</div>\r\n    <div className=\"srchGrtCaption\">Available Menu Items, Special Offers, and Pricing can vary by location.</div>\r\n    <div className=\"searchContentWrapper\">\r\n    <div className=\"searchBox\">\r\n      <div className=\"searchBoxBanner\">Find Locations</div>\r\n      <div className=\"searchOptions\">\r\n        <MakeGeoDialog locObj={locObj} updateLoc={props.updateLoc}/>\r\n        <MakeUserDialog locObj={locObj} updateLoc={props.updateLoc} forwardedRef={props.forwardedRef} />\r\n      </div>\r\n    </div>              \r\n      <MakePrevDialog locObj={locObj} updateLoc={props.updateLoc}/>\r\n    </div>\r\n    </div> \r\n    </>\r\n  );\r\n}\r\nfunction MakeGeoDialog(props) {\r\n  const locObj = props.locObj;\r\n  const hasErr = locObj.geoErr;\r\n  const capStr = hasErr?locObj.geoErrMsg:'Locations near ' + locObj.geoZip;    \r\n  const clsStr = hasErr?\"geoSearchFail\": \"geoSearchBtn\";  \r\n  const ret = {type:'search', values:'Geo Locate'};\r\n  return (\r\n    <div className=\"geoSearchArea\">\r\n      <button className={clsStr} onClick={() => props.updateLoc(ret)}>\r\n        <GeoIcon fill=\"#000000\" className=\"geoSearchIcon\"/>\r\n        <div className=\"geoSearchBtnCapt\">{capStr}</div>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\nfunction MakeUserDialog(props) {\r\n  const locObj = props.locObj;\r\n  const hasErr = locObj.userErr;\r\n  const capStr = hasErr?locObj.userErrMsg:null;    \r\n  const ret = {type:'search', values:'User Entry'};\r\n  return (\r\n    <>\r\n    <div className=\"userSearchArea\">\r\n    <div className=\"userSearchLabel\">Enter a Zip Code</div>\r\n    <form className=\"searchForm\" onKeyDown={(event, i) => {\r\n      if(event.key === 'Enter') {\r\n        props.updateLoc(ret); \r\n        event.preventDefault();}}}>\r\n      <input className=\"userInputString\" type=\"text\" ref={props.forwardedRef}/>\r\n      {capStr}\r\n    </form>\r\n      <button className=\"userSearchBtn\" type=\"button\" onClick={() => props.updateLoc(ret)}>\r\n      Submit</button>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\nfunction MakePrevDialog(props) {\r\n  const locObj = props.locObj;\r\n  const prev = locObj.prevStoreID;              \r\n  if (prev==='0'){\r\n    return null;\r\n  }\r\n  const ret = {type:'select', values:prev};\r\n  const storeInfo = locObj.curStoreInfo;    \r\n  return(\r\n    <>\r\n    <div className=\"searchOrPrev\">Or</div>\r\n    <div className=\"prevLocBox\">    \r\n      <div className=\"prevLocBanner\">Keep this location</div>        \r\n      <div className=\"prevLocName\">{storeInfo.name}</div>\r\n      <div className=\"prevLocHours\">{storeInfo.hours}</div>\r\n      <button className=\"prevLocConfirm\" onClick={() => props.updateLoc(ret)}>Select</button>\r\n    </div>\r\n    </>\r\n  );\r\n}\r\nfunction StoreSelectMenu(props){\r\n  const locObj = props.locObj;  \r\n  const searchLoc = locObj.searchLoc;    \r\n  const storeIDs = ['1','2','3'];\r\n  const ret = {type:'reset', values:false};\r\n  const storeList = storeIDs.map((storeID) => {\r\n    const store = locObj.storeInfo(storeID);\r\n    const sel = {type:'select', values:storeID};\r\n    return (\r\n      <li key={storeID} className=\"resultElement\"> \r\n        <div className=\"store\">\r\n        <div className=\"storeAddress\">{store.name}</div>\r\n        <div className=\"storeDetails\">Store is {store.hours}, and is located {store.dist} miles away</div>\r\n        </div>\r\n        <div>\r\n        <button className=\"selectBtn\" onClick={() => {\r\n          props.updateLoc(sel)\r\n          }}>Select</button> \r\n        </div>\r\n      </li> \r\n      );\r\n    });\r\n  return (\r\n    <>\r\n    <div className=\"storeSelect\">\r\n    <div className=\"storeSelectBanner\">\r\n      <h2>Results</h2>\r\n      <div className=\"resultsCapt\">Showing results near: {searchLoc}</div>\r\n      <div className=\"resultsChange\" onClick={() => props.updateLoc(ret)}>Change Location</div>\r\n      </div>\r\n      <ul className=\"resultsList\">\r\n        {storeList}\r\n      </ul>\r\n    </div>\r\n    </>\r\n  );  \r\n}\r\nexport default StoreLoc;","export default __webpack_public_path__ + \"static/media/pizza-main-area.90296f53.jpg\";","import React from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { withStyles} from '@material-ui/core/styles';\r\n\r\nconst HtmlTooltip = withStyles((theme) => ({\r\n  tooltip: {\r\n    backgroundColor: '#f5f5f9',\r\n    color: 'rgba(0, 0, 0, 0.87)',\r\n    maxWidth: 400,\r\n    fontSize: theme.typography.pxToRem(12),\r\n    border: '1px solid #dadde9',\r\n  },\r\n}))(Tooltip);\r\n\r\nexport default class MenuToolTip extends React.Component{  \r\n  render(){\r\n    const caption = this.props.caption;\r\n    const description = this.props.description?this.props.description:'';\r\n    description.replace(\"{i}\",this.props.caption);\r\n    return (\r\n    <HtmlTooltip \r\n      title={\r\n        <React.Fragment>\r\n          <Typography color=\"inherit\">\r\n            {caption}\r\n          </Typography>\r\n            {description}\r\n        </React.Fragment>}\r\n      arrow placement=\"bottom-end\" enterDelay={1000}>      \r\n      {this.props.component}\r\n    </HtmlTooltip>\r\n    )\r\n  }  \r\n}","import React from 'react';\r\nimport MenuToolTip from './MenuToolTip'\r\n\r\nexport function StaticTitle(props){\r\n  return(\r\n    <div className=\"rowTitle\">\r\n      <MenuToolTip caption={props.rowTitle} description={props.description} component={<div>{props.rowTitle}</div>}/>\r\n    </div>\r\n  )  \r\n}","import React, {useState} from 'react'\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport MenuToolTip from '../Elements/MenuToolTip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst useStyles = makeStyles ({\r\n  root:{\r\n    color:\"black\",\r\n  }\r\n});\r\n\r\nexport default function ChangeHalfButton(props){\r\n  const [half, setHalf] = useState(2);\r\n  const classes = useStyles();\r\n  \r\n  const handleClick = (event)=>{\r\n    const x = (half+1)>3?1:half+1;\r\n    setHalf(x);\r\n    props.changeHalf(x);\r\n  }\r\n  const icon = <PizzaHalfIcon half={half}/>;\r\n\r\n  const component = <IconButton aria-label=\"half-button\" classes={{root:classes.root}} onClick={handleClick}>{icon}</IconButton>\r\n  return (\r\n    <MenuToolTip caption={props.caption} description={props.description} component={component}/>\r\n  )\r\n}\r\n\r\nfunction PizzaHalfIcon(props){  \r\n  const half = props.half;\r\n  const rot = half!==2?((half-1)*90):0;\r\n  const trans = `rotate(${rot} 12 12)`;\r\n  const path = half!==2?<path  d=\"M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z\"\r\n        transform={trans} />:<path d=\"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z\" />;\r\n  return <SvgIcon>{path}</SvgIcon>\r\n}","import AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\r\nimport React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuToolTip from '../Elements/MenuToolTip';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      \r\n\r\n    },\r\n  },\r\n}));\r\n\r\nexport function IncreaseQty(props){\r\n  const icon = <AddCircleIcon/>\r\n  const ariaLabel ='increase-qty';\r\n  const caption = `Add more ${props.itemTypeName}`;\r\n  const val = 1\r\n  return <QtyButton ariaLabel={ariaLabel} caption={caption} description={props.description} icon={icon} value={val} onClick={(p)=>{props.changeQty(p)}}/>\r\n}\r\nexport function DecreaseQty(props){\r\n  const icon = <RemoveCircleIcon/>  \r\n  const ariaLabel ='decrease-qty';\r\n  const caption = `Add less ${props.itemTypeName}`;\r\n  const val  =-1\r\n  return <QtyButton ariaLabel={ariaLabel} caption={caption} description={props.description} icon={icon} value={val} onClick={(p)=>{props.changeQty(p)}}/>\r\n}\r\nfunction QtyButton(props){\r\n  const classes = useStyles();\r\n  const val = props.value;\r\n  const iconButton = <IconButton aria-label={props.ariaLabel} onClick={()=>{return props.onClick(val)}}>{props.icon}</IconButton>\r\n  return (\r\n    <div className={classes.root}>        \r\n      <MenuToolTip caption={props.caption} description={props.description} component={iconButton}/>     \r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst CustomNavButton = withStyles({\r\n  root: {\r\n    boxShadow: 'none',\r\n    textTransform: 'none',\r\n    fontSize: 16,\r\n    padding: '6px 12px',\r\n    border: '1px solid',\r\n    lineHeight: 1.5,\r\n    backgroundColor: '#0063cc',\r\n    borderColor: '#0063cc',\r\n    fontFamily: [\r\n      '-apple-system',\r\n      'BlinkMacSystemFont',\r\n      '\"Segoe UI\"',\r\n      'Roboto',\r\n      '\"Helvetica Neue\"',\r\n      'Arial',\r\n      'sans-serif',\r\n      '\"Apple Color Emoji\"',\r\n      '\"Segoe UI Emoji\"',\r\n      '\"Segoe UI Symbol\"',\r\n    ].join(','),\r\n    '&:hover': {\r\n      backgroundColor: '#0069d9',\r\n      borderColor: '#0062cc',\r\n      boxShadow: 'none',\r\n    },\r\n    '&:active': {\r\n      boxShadow: 'none',\r\n      backgroundColor: '#0062cc',\r\n      borderColor: '#005cbf',\r\n    },\r\n    '&:focus': {\r\n      boxShadow: '0 0 0 0.2rem rgba(0,123,255,.5)',\r\n    },\r\n  },\r\n})(Button);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport function NavButton(props){\r\n  const classes = useStyles();\r\n  const isDisabled = props.hasOwnProperty('isDisabled')?props.isDisabled:false;\r\n  return (\r\n    <CustomNavButton variant=\"contained\" color=\"primary\" disabled={isDisabled} className={classes.margin} onClick={props.onClick}>\r\n      {props.caption}\r\n    </CustomNavButton>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport MenuToolTip from './MenuToolTip';\r\nimport {ChangeHalfButton, IncreaseQty, DecreaseQty} from '../Buttons/index'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width:'100%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction createRowString(stringVal){\r\n  if(stringVal===null||stringVal===undefined){\r\n    return false;\r\n  }\r\n  const hasHalf = stringVal.hasOwnProperty('half');\r\n  const hasQty = stringVal.hasOwnProperty('qty');\r\n  return {\r\n    half:hasHalf?stringVal.half:'',\r\n    qty:hasHalf?stringVal.qty:'',\r\n  }\r\n}\r\nexport function StaticRowElement(props){\r\n  const classes = useStyles();\r\n  const {typeCaption,itemID,sel,description,captions,hasHalf,hasQty} = props;\r\n  const [maxQty] = React.useState(hasQty?sel.maxQty:2);\r\n  const [qty, setQty] = React.useState(hasQty?sel.qty:2);\r\n  const [half,setHalf] = React.useState(hasHalf?sel.half:2);  \r\n  const handleMenuSelect = props.handleMenuSelect;\r\n  const name = description.name;\r\n  const des = itemID!=='0'?createRowString(description):false;\r\n  const cap = itemID!=='0'?createRowString(captions):false;\r\n  const qtyDescription = `${des?des.qty:''} `;\r\n  const halfDescription = `${des?des.half:''}`;\r\n  const qtyCaption = `${cap?(cap.qty.replace('{i}',name)):name}`;\r\n  const halfCaption = `${cap?(cap.half.replace('{i}',qtyCaption)):qtyCaption}`\r\n  const displayName = `${halfDescription!==''?`(${halfDescription}) `:''}${qtyDescription}${name}`;\r\n  const displayCaption = halfCaption;\r\n  const changeHalf = (val)=>{    \r\n    setHalf(val);\r\n    handleMenuSelect({itemID:itemID, type:'half', value:`${val}`});\r\n  }\r\n  const changeQty = (val)=>{\r\n    setQty(qty+val);\r\n    handleMenuSelect({itemID:itemID, type:'qty', value:`${qty+val}`});\r\n  }\r\n  const halfDisplay = hasHalf?\r\n    <Grid item xs={1}>\r\n      <ChangeHalfButton caption={props.halfCaption} description={props.halfDescription} changeHalf={(p)=>{changeHalf(p)}}/>\r\n    </Grid>:null;\r\n  const lowerQty = hasQty?\r\n    <Grid item xs={1}>\r\n      <DecreaseQty itemTypeName={name} disabled={qty===0} description={props.lowQtyDescription} changeQty={(p)=>{changeQty(p)}}/>\r\n    </Grid>:null;\r\n  const raiseQty = hasQty?\r\n    <Grid item xs={1}>\r\n      <IncreaseQty itemTypeName={name} disabled={qty===maxQty} description={props.highQtyDescription} changeQty={(p)=>{changeQty(p)}}/>\r\n    </Grid>:null;\r\n\r\n  return (\r\n    <div className={classes.root}>      \r\n      <Grid container spacing={2}           \r\n            direction=\"row\"\r\n            justify=\"flex-start\"\r\n            alignItems=\"center\"\r\n            width='100%'\r\n          >        \r\n        {halfDisplay}            \r\n        {lowerQty}              \r\n      <Grid item xs={10}>              \r\n          <MenuToolTip caption={`Your current selection for ${typeCaption} is:`} description={displayCaption} component={<div className=\"menuItemDisplay\">{displayName}</div>}/>\r\n      </Grid>      \r\n        {raiseQty}           \r\n      </Grid>            \r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n  head: {\r\n    backgroundColor: theme.palette.common.black,\r\n    color: theme.palette.common.white,\r\n  },\r\n  body: {\r\n    fontSize: 14,\r\n  },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme) => ({\r\n  root: {\r\n    '&:nth-of-type(odd)': {\r\n      backgroundColor: theme.palette.action.hover,\r\n    },\r\n  },\r\n}))(TableRow);\r\nconst useStyles = makeStyles((theme)=> ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  title: {\r\n    flex: '1 1 100%',\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n    \r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    maxWidth: 650,\r\n    minWidth: 400,\r\n\r\n  },\r\n}));\r\n\r\nexport function SingleTableDisplay(props){\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = React.useState(0);\r\n  const pizzaId = props.id;\r\n  const selByPizza = pizzaId!==0;\r\n  const pInfo = props.pizza.PizzaInfo;\r\n  const list = props.menu.stepList  \r\n  const rows = SummaryRows(pInfo,list);\r\n  const handleClick = (event, name) => {\r\n    const isSelected = selected===name;\r\n    let newSelect  = ''\r\n    if(isSelected){\r\n      newSelect = ''\r\n    } else {\r\n      newSelect=name;\r\n    }\r\n    const retSel = selByPizza?pizzaId:name\r\n    props.handleSelect(retSel);\r\n    setSelected(newSelect)\r\n  };\r\n  \r\n  const isSelected = (name) => name===selected;\r\n  const summaryMsg = `Pizza${pizzaId>0?` ${pizzaId} `:' '}Summary`  \r\n  return (\r\n    <div className={classes.root}>\r\n    <Toolbar className={classes.title}>\r\n      <Typography className={classes.title}  align=\"center\" variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n        {summaryMsg}\r\n      </Typography>\r\n    </Toolbar>\r\n    <TableContainer component={Paper}>\r\n      <Table className={classes.table} size={'small'} aria-label=\"customized table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <StyledTableCell>Item</StyledTableCell>\r\n            <StyledTableCell align=\"center\">Item Summary</StyledTableCell>            \r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {rows.map((row, index) => {\r\n            const isItemSelected = isSelected(row.name);\r\n            return (\r\n            <StyledTableRow hover\r\n                      onClick={(event) => handleClick(event, row.name)}                     \r\n                      tabIndex={-1}\r\n                      key={row.name}\r\n                      selected={isItemSelected}\r\n                    >\r\n              <StyledTableCell component=\"th\" scope=\"row\" padding=\"none\">\r\n                {row.name}\r\n              </StyledTableCell>\r\n              <StyledTableCell align=\"left\">{row.itemSummary}</StyledTableCell>    \r\n            </StyledTableRow>\r\n          )})}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n    </div>\r\n  );\r\n}\r\nexport function MultiTableDisplay(props){\r\n  const name = props.name;\r\n  const summaryMsg = `Order summary for ${name}`;\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = React.useState(0);\r\n  const pizzaList = props.pizzas;  \r\n  const handleSelect = (id) => {\r\n    const isSelected = selected===id;\r\n    let newSelect  = ''\r\n    if(isSelected){\r\n      newSelect = ''\r\n    } else {\r\n      newSelect =id;\r\n    }\r\n    props.handlePizzaSelect(newSelect);\r\n    setSelected(newSelect)\r\n  };  \r\n  const isSelected = (id) => id===selected;\r\n  return (\r\n    <div className={classes.root}>\r\n    <Toolbar className={classes.toolBar}>\r\n      <Typography className={classes.title}  align=\"center\" variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n        {summaryMsg}\r\n      </Typography>\r\n    </Toolbar>\r\n    {pizzaList!==undefined&&pizzaList!==null&&pizzaList.lentgh>0&&pizzaList.map((p)=>{\r\n      const pInfo = p.PizzaInfo;\r\n      const isItemSelected = isSelected(pInfo.id);\r\n      return (\r\n        <TableContainer component={Paper}>\r\n          <Table className={classes.table} size={'small'} aria-label=\"customized table\" selected={isItemSelected} onClick={handleSelect(pInfo.id)}>\r\n            <SingleTableDisplay pizza={p} menu={props.menu} handleSelect={handleSelect} />\r\n          </Table>\r\n        </TableContainer>\r\n      )      \r\n    })}\r\n    </div>\r\n  )\r\n}\r\nfunction SummaryRows(pizzaInfo, menuList){  \r\n  const pizzaItems = pizzaInfo.items;\r\n  const itemMsg = pizzaInfo.itemMsg;\r\n  const hasSpecInst = pizzaInfo.specinst?true:false;\r\n  const list = menuList;\r\n  const rows = list.map((i)=>{\r\n    const chk = pizzaItems.hasOwnProperty(i.val)&&itemMsg.hasOwnProperty(i.val);\r\n    const itemSum = chk?itemMsg[i.val]:`No ${i.name} selected`    \r\n    const item = {name:i.name, itemSummary:itemSum}\r\n    return item;\r\n  })\r\n  const specInt = hasSpecInst?pizzaInfo.specinst:'No special instructions';\r\n  return rows.concat({name:'Instructions',itemSummary:specInt})\r\n}","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MenuToolTip from './MenuToolTip';\r\n/* \r\nPopupMenu expects props={    \r\n  type = content.type\r\n  itemTypeCaption = content.caption\r\n  selected = initialState(type)\r\n  items:(list): = content.list {\r\n    id:(string),    \r\n    caption:(string),\r\n    description:(string),\r\n    isDisabled:(boolean),\r\n  }\r\n}\r\n*/\r\nexport function PopupMenu(props) {\r\n  const hasPriorSelection = props.hasOwnProperty('selected')&&props.selected!==null&&props.selected!==0;\r\n  const sel = hasPriorSelection?props.selected:0;\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [selected, setSelected] = React.useState(sel);\r\n\r\n  \r\n  \r\n  const itemTypeCaption = props.itemTypeCaption;\r\n  const itemList = props.items;\r\n  const initialLabel = `No ${itemTypeCaption} selected`;\r\n  const noneItem = {id:'0', caption:`None`, description:`No ${itemTypeCaption} selected`}\r\n  \r\n  const menuList = [noneItem].concat(itemList);\r\n  const menuToolTipCaption = `${itemTypeCaption} menu`;\r\n  const menuToolTipDescription = `Click here to select a ${itemTypeCaption} for this pizza`;\r\n  \r\n  const label = selected===0?initialLabel:menuList[selected].caption;  \r\n  \r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleMenuItemSelect = (event, index) => {\r\n    setSelected(index);\r\n    setAnchorEl(null);\r\n    props.handleMenuSelect({type:props.type, value:menuList[index].id});\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const menuItems = menuList.map((item,index)=>{\r\n    const menuItem = <MenuItem key={`${props.type}-${item.id}`} selected={index === selected} onClick={(event) => handleMenuItemSelect(event, index)}>\r\n                        {item.caption}\r\n                      </MenuItem>\r\n    return <MenuToolTip caption={item.caption} description={item.description} component={menuItem}/>\r\n  })\r\n\r\n  const button = props.isDisabled?<Button disabled variant=\"outline\">{label}</Button>:\r\n    <Button aria-controls=\"popup-menu-select\" aria-haspopup=\"true\" onClick={handleClick}>\r\n      {label}\r\n    </Button>; \r\n  return (\r\n    <div>\r\n      <MenuToolTip caption={menuToolTipCaption} description={menuToolTipDescription} component={button}/>\r\n      <Menu\r\n        id=\"popup-menu-select\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n      >\r\n        {menuItems}         \r\n      </Menu>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {MultiTableDisplay} from './AppElements/Elements/index';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function ConfirmationPage(props){  \r\n  const classes = useStyles();\r\n  const botState = props.getBotState();\r\n  const order = botState.order;\r\n  const menu = botState.menu;\r\n  const loc = botState.loc.curStoreInfo;\r\n  const locName = loc.storeName;\r\n  const locHours = loc.storeHours\r\n  const oSum = order.OrderSummary;\r\n  const handlePizzaSelect = () =>{\r\n\r\n  }\r\n  const msg = `${oSum.name}, your order of ${oSum.cnt} pizzas will be available for pickup in 30 minutes at the ${locName}.\\nPlease ensure you arrive before closing time. As a reminder the store hours for this location are ${locHours}.\\nThank You.`;\r\n  return (\r\n    <div className={classes.root}>\r\n    <div className={classes.paper}>{msg}</div>\r\n      <MultiTableDisplay name={oSum.name} pizzas={oSum.pizzas} menu={menu} handlePizzaSelect={handlePizzaSelect}/>\r\n    </div>\r\n  )\r\n}\r\n\r\n    \r\n","import React from 'react';\r\nimport StoreLoc from './StoreLoc';\r\nimport pizzaImage from '../resources/pizza-main-area.jpg';\r\nimport ConfirmationPage from './ConfirmationPage';\r\nimport '../css/DisplayMainArea.css';\r\n\r\nclass MainArea extends React.Component{  \r\n    \r\n  render(){\r\n    const {showPage, ...passThroughProps} = this.props;\r\n    const dispComp = (type)=>{      \r\n      switch(type){\r\n        case 'Location':\r\n          return <StoreLoc {...passThroughProps}/>;\r\n        case 'NonMenuStep':\r\n          return <div className=\"bgImage-container\"><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\"/></div>;\r\n        case 'Main':\r\n          return <div className=\"bgImage-container\"><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\"/></div>;\r\n        case 'Final':\r\n          return <ConfirmationPage {...passThroughProps}/>;      \r\n        case 'Menu':\r\n          return <div className=\"bgImage-container\"><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\" /></div>\r\n        default:\r\n          return <div className=\"bgImage-container\"><img className=\"pizza-bgImg img-fluid\" src={pizzaImage} alt=\"pizzaImage\"/></div>\r\n      }\r\n    }\r\n    const dis =showPage===null?'Location':showPage;     \r\n    return (dispComp(dis));\r\n  }\r\n}\r\nexport default MainArea;","const hexToRgb = hex => {\r\n  // http://stackoverflow.com/a/5624139\r\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n  hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\r\n\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result\r\n    ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      }\r\n    : null;\r\n};\r\n\r\n/**\r\n * Transform hex+alpha to rgba\r\n * @param {string} hex hex color code\r\n * @param {number} [alpha=1]\r\n * @returns {string} the rgba as string\r\n */\r\nconst rgba = (hex, alpha = 1) => {\r\n  const color = hexToRgb(hex);\r\n  return `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`;\r\n};\r\n\r\nexport default rgba;\r\n","import { keyframes } from 'styled-components';\r\nimport rgba from './rgba';\r\n\r\nconst loading = keyframes`\r\n  0% { opacity: .2; }\r\n  20% { opacity: 1; }\r\n  100% { opacity: .2; }\r\n`;\r\n\r\nconst scale = keyframes`\r\n  100% { transform: scale(1); }\r\n`;\r\n\r\nconst invalidInput = keyframes`\r\n  25% { transform: rotate(-1deg); }\r\n  100% { transform: rotate(1deg); }\r\n`;\r\n\r\nconst pulse = color => keyframes`\r\n  0% { box-shadow: 0 0 0 0 ${rgba(color, 0.4)}; }\r\n  70% { box-shadow: 0 0 0 10px ${rgba(color, 0)}; }\r\n  100% { box-shadow: 0 0 0 0 ${rgba(color, 0)}; }\r\n`;\r\n\r\nexport { loading, scale, invalidInput, pulse };\r\n","import styled from 'styled-components';\r\nimport { loading } from '../../common/animations';\r\n\r\nconst LoadingStep = styled.span`\r\n  animation: ${loading} 1.4s infinite both;\r\n  animation-delay: ${props => props.delay};\r\n`;\r\n\r\nexport default LoadingStep;\r\n","import React from 'react';\r\nimport LoadingStep from './LoadingStep';\r\n\r\nconst Loading = () => (\r\n  <span className=\"rsc-loading\">\r\n    <LoadingStep delay=\"0s\">.</LoadingStep>\r\n    <LoadingStep delay=\".2s\">.</LoadingStep>\r\n    <LoadingStep delay=\".4s\">.</LoadingStep>\r\n  </span>\r\n);\r\n\r\nexport default Loading;\r\n","import styled from 'styled-components';\r\n\r\nconst ChatStepContainer = styled.div`\r\n  background: #fff;\r\n  border-radius: 5px;\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 0 6px 10px 6px;\r\n  padding: 16px;\r\n`;\r\n\r\nexport default ChatStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loading from '../common/Loading';\r\nimport CustomStepContainer from './CustomStepContainer';\r\n\r\nclass CustomStep extends Component {\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { speak, step, previousValue, triggerNextStep } = this.props;\r\n    const { delay, waitAction } = step;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!waitAction && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  renderComponent = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    return React.cloneElement(component, {\r\n      step,\r\n      steps,\r\n      previousStep,\r\n      triggerNextStep\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { loading } = this.state;\r\n    const { style } = this.props;\r\n\r\n    return (\r\n      <CustomStepContainer className=\"rsc-cs\" style={style}>\r\n        {loading ? <Loading /> : this.renderComponent()}\r\n      </CustomStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nCustomStep.propTypes = {\r\n  previousStep: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  style: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\nCustomStep.defaultProps = {\r\n  previousValue: '',\r\n  speak: () => {}\r\n};\r\n\r\nexport default CustomStep;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\n\r\nconst Option = styled.li`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  margin: 2px;\r\n  transform: scale(0);\r\n`;\r\n\r\nexport default Option;\r\n","export default {\r\n  background: '#f5f8fb',\r\n  fontFamily: 'monospace',\r\n  headerBgColor: '#6e48aa',\r\n  headerFontColor: '#fff',\r\n  headerFontSize: '16px',\r\n  botBubbleColor: '#6E48AA',\r\n  botFontColor: '#fff',\r\n  userBubbleColor: '#fff',\r\n  userFontColor: '#4a4a4a'\r\n};\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../../theme';\r\n\r\nconst OptionElement = styled.button`\r\n  background: ${({ theme }) => theme.botBubbleColor};\r\n  border: 0;\r\n  border-radius: 22px;\r\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\r\n  color: ${({ theme }) => theme.botFontColor};\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  padding: 12px;\r\n\r\n  &:hover {\r\n    opacity: 0.7;\r\n  }\r\n  &:active,\r\n  &:hover:focus {\r\n    outline:none;\r\n  }\r\n`;\r\n\r\nOptionElement.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default OptionElement;\r\n","import styled from 'styled-components';\r\n\r\nconst Options = styled.ul`\r\n  margin: 2px 0 12px 0;\r\n  padding: 0 6px;\r\n`;\r\n\r\nexport default Options;\r\n","import styled from 'styled-components';\r\n\r\nconst OptionsStepContainer = styled.div``;\r\n\r\nexport default OptionsStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Option from './Option';\r\nimport OptionElement from './OptionElement';\r\nimport Options from './Options';\r\nimport OptionsStepContainer from './OptionsStepContainer';\r\n\r\nclass OptionsStep extends Component {\r\n  onOptionClick = ({ value }) => {\r\n    const { triggerNextStep } = this.props;\r\n\r\n    triggerNextStep({ value });\r\n  };\r\n\r\n  renderOption = option => {\r\n    const { bubbleOptionStyle, step } = this.props;\r\n    const { user } = step;\r\n    const { value, label } = option;\r\n\r\n    return (\r\n      <Option key={value} className=\"rsc-os-option\">\r\n        <OptionElement\r\n          className=\"rsc-os-option-element\"\r\n          style={bubbleOptionStyle}\r\n          user={user}\r\n          onClick={() => this.onOptionClick({ value })}\r\n        >\r\n          {label}\r\n        </OptionElement>\r\n      </Option>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { step } = this.props;\r\n    const { options } = step;\r\n\r\n    return (\r\n      <OptionsStepContainer className=\"rsc-os\">\r\n        <Options className=\"rsc-os-options\">\r\n          {Object.keys(options).map(key => options[key]).map(this.renderOption)}\r\n        </Options>\r\n      </OptionsStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nOptionsStep.propTypes = {\r\n  bubbleOptionStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nexport default OptionsStep;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\nimport defaultTheme from '../../theme';\r\n\r\nconst Bubble = styled.div`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  background: ${props => (props.user ? props.theme.userBubbleColor : props.theme.botBubbleColor)};\r\n  border-radius: ${props => {\r\n    const { isFirst, isLast, user } = props;\r\n\r\n    if (!isFirst && !isLast) {\r\n      return user ? '18px 0 0 18px' : '0 18px 18px 0px';\r\n    }\r\n\r\n    if (!isFirst && isLast) {\r\n      return user ? '18px 0 18px 18px' : '0 18px 18px 18px';\r\n    }\r\n\r\n    return props.user ? '18px 18px 0 18px' : '18px 18px 18px 0';\r\n  }};\r\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\r\n  color: ${props => (props.user ? props.theme.userFontColor : props.theme.botFontColor)};\r\n  display: inline-block;\r\n  font-size: 14px;\r\n  max-width: 50%;\r\n  margin: ${props => {\r\n    const { isFirst, showAvatar, user } = props;\r\n\r\n    if (!isFirst && showAvatar) {\r\n      return user ? '-8px 46px 10px 0' : '-8px 0 10px 46px';\r\n    }\r\n\r\n    if (!isFirst && !showAvatar) {\r\n      return user ? '-8px 0px 10px 0' : '-8px 0 10px 0px';\r\n    }\r\n\r\n    return '0 0 10px 0';\r\n  }};\r\n  overflow: hidden;\r\n  position: relative;\r\n  padding: 12px;\r\n  transform: scale(0);\r\n  transform-origin: ${props => {\r\n    const { isFirst, user } = props;\r\n\r\n    if (isFirst) {\r\n      return user ? 'bottom right' : 'bottom left';\r\n    }\r\n\r\n    return user ? 'top right' : 'top left';\r\n  }};\r\n`;\r\n\r\nBubble.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default Bubble;\r\n","import styled from 'styled-components';\r\nimport { scale } from '../../common/animations';\r\n\r\nconst Image = styled.img`\r\n  animation: ${scale} 0.3s ease forwards;\r\n  border-radius: ${props => (props.user ? '50% 50% 50% 0' : '50% 50% 0 50%')};\r\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\r\n  height: 40px;\r\n  min-width: 40px;\r\n  padding: 3px;\r\n  transform: scale(0);\r\n  transform-origin: ${props => (props.user ? 'bottom left' : 'bottom right')};\r\n  width: 40;\r\n`;\r\n\r\nexport default Image;\r\n","import styled from 'styled-components';\r\n\r\nconst ImageContainer = styled.div`\r\n  display: inline-block;\r\n  order: ${props => (props.user ? '1' : '0')};\r\n  padding: 6px;\r\n`;\r\n\r\nexport default ImageContainer;\r\n","import styled from 'styled-components';\r\n\r\nconst TextStepContainer = styled.div`\r\n  align-items: flex-end;\r\n  display: flex;\r\n  justify-content: ${props => (props.user ? 'flex-end' : 'flex-start')};\r\n`;\r\n\r\nexport default TextStepContainer;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Bubble from './Bubble';\r\nimport Image from './Image';\r\nimport ImageContainer from './ImageContainer';\r\nimport Loading from '../common/Loading';\r\nimport TextStepContainer from './TextStepContainer';\r\n\r\nclass TextStep extends Component {\r\n  /* istanbul ignore next */\r\n  state = {\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { step, speak, previousValue, triggerNextStep } = this.props;\r\n    const { component, delay, waitAction } = step;\r\n    const isComponentWatingUser = component && waitAction;\r\n\r\n    setTimeout(() => {\r\n      this.setState({ loading: false }, () => {\r\n        if (!isComponentWatingUser && !step.rendered) {\r\n          triggerNextStep();\r\n        }\r\n        speak(step, previousValue);\r\n      });\r\n    }, delay);\r\n  }\r\n\r\n  getMessage = () => {\r\n    const { previousValue, step } = this.props;    \r\n    const { message } = step;      \r\n    return message ? message.replace(/{previousValue}/g, previousValue) : '';\r\n  };\r\n\r\n  renderMessage = () => {\r\n    const { step, steps, previousStep, triggerNextStep } = this.props;\r\n    const { component } = step;\r\n\r\n    if (component) {      \r\n      return React.cloneElement(component, {\r\n        step,\r\n        steps,\r\n        previousStep,\r\n        triggerNextStep\r\n      });\r\n    }    \r\n    return this.getMessage();\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      step,\r\n      isFirst,\r\n      isLast,\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar\r\n    } = this.props;\r\n    const { loading } = this.state;\r\n    const { avatar, user, botName } = step;\r\n\r\n    const showAvatar = user ? !hideUserAvatar : !hideBotAvatar;\r\n\r\n    const imageAltText = user ? \"Your avatar\" : `${botName}'s avatar`;\r\n    return (\r\n      <TextStepContainer className={`rsc-ts ${user ? 'rsc-ts-user' : 'rsc-ts-bot'}`} user={user}>\r\n        <ImageContainer className=\"rsc-ts-image-container\" user={user}>\r\n          {isFirst && showAvatar && (\r\n            <Image\r\n              className=\"rsc-ts-image\"\r\n              style={avatarStyle}\r\n              showAvatar={showAvatar}\r\n              user={user}\r\n              src={avatar}\r\n              alt={imageAltText}\r\n            />\r\n          )}\r\n        </ImageContainer>\r\n        <Bubble\r\n          className=\"rsc-ts-bubble\"\r\n          style={bubbleStyle}\r\n          user={user}\r\n          showAvatar={showAvatar}\r\n          isFirst={isFirst}\r\n          isLast={isLast}\r\n        >\r\n          {loading ? <Loading /> : this.renderMessage()}\r\n        </Bubble>\r\n      </TextStepContainer>\r\n    );\r\n  }\r\n}\r\n\r\nTextStep.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  isFirst: PropTypes.bool.isRequired,\r\n  isLast: PropTypes.bool.isRequired,\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  hideBotAvatar: PropTypes.bool.isRequired,\r\n  hideUserAvatar: PropTypes.bool.isRequired,\r\n  previousStep: PropTypes.objectOf(PropTypes.any),\r\n  previousValue: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.bool,\r\n    PropTypes.number,\r\n    PropTypes.object,\r\n    PropTypes.array\r\n  ]),\r\n  speak: PropTypes.func,\r\n  step: PropTypes.objectOf(PropTypes.any).isRequired,\r\n  steps: PropTypes.objectOf(PropTypes.any),\r\n  triggerNextStep: PropTypes.func.isRequired\r\n};\r\n\r\nTextStep.defaultProps = {\r\n  previousStep: {},\r\n  previousValue: '',\r\n  speak: () => {},\r\n  steps: {}\r\n};\r\n\r\nexport default TextStep;\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'user',\r\n    types: ['boolean'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'validator',\r\n    types: ['function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'message',\r\n    types: ['string', 'function'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'avatar',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'delay',\r\n    types: ['number'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'options',\r\n    types: ['object'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'component',\r\n    types: ['any'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'avatar',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'replace',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'waitAction',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'asMessage',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'delay',\r\n    types: ['number'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'end',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideInput',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'hideExtraControl',\r\n    types: ['boolean'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","export default [\r\n  {\r\n    key: 'id',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'update',\r\n    types: ['string', 'number'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'trigger',\r\n    types: ['string', 'number', 'function'],\r\n    required: true\r\n  },\r\n  {\r\n    key: 'placeholder',\r\n    types: ['string'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'inputAttributes',\r\n    types: ['object'],\r\n    required: false\r\n  },\r\n  {\r\n    key: 'metadata',\r\n    types: ['object'],\r\n    required: false\r\n  }\r\n];\r\n","import userSchema from './userSchema';\r\nimport textSchema from './textSchema';\r\nimport optionsSchema from './optionsSchema';\r\nimport customSchema from './customSchema';\r\nimport updateSchema from './updateSchema';\r\nimport { stringify } from 'flatted/cjs';\r\n\r\nconst schema = {\r\n  parse(step) {\r\n    let parser = [];\r\n\r\n    if (step.user) {\r\n      parser = userSchema;\r\n    } else if (step.message) {\r\n      parser = textSchema;\r\n    } else if (step.options) {\r\n      parser = optionsSchema;\r\n    } else if (step.component) {\r\n      parser = customSchema;\r\n    } else if (step.update) {\r\n      parser = updateSchema;\r\n    } else {\r\n      throw new Error(`The step ${stringify(step)} is invalid`);\r\n    }\r\n\r\n    for (let i = 0, len = parser.length; i < len; i += 1) {\r\n      const { key, types, required } = parser[i];\r\n\r\n      if (!step[key] && required) {\r\n        throw new Error(`Key '${key}' is required in step ${stringify(step)}`);\r\n      } else if (step[key]) {\r\n        if (types[0] !== 'any' && types.indexOf(typeof step[key]) < 0) {\r\n          throw new Error(\r\n            `The type of '${key}' value must be ${types.join(' or ')} instead of ${typeof step[\r\n              key\r\n            ]}`\r\n          );\r\n        }\r\n      }\r\n    }\r\n\r\n    const keys = parser.map(p => p.key);\r\n\r\n    for (const key in step) {\r\n      if (keys.indexOf(key) < 0) {\r\n        console.error(`Invalid key '${key}' in step '${step.id}'`);\r\n        delete step[key];\r\n      }\r\n    }\r\n\r\n    return step;\r\n  },\r\n\r\n  checkInvalidIds(steps) {\r\n    for (const key in steps) {\r\n      const step = steps[key];\r\n      const triggerId = steps[key].trigger;\r\n\r\n      if (typeof triggerId !== 'function') {\r\n        if (step.options) {\r\n          const triggers = step.options.filter(option => typeof option.trigger !== 'function');\r\n          const optionsTriggerIds = triggers.map(option => option.trigger);\r\n\r\n          for (let i = 0, len = optionsTriggerIds.length; i < len; i += 1) {\r\n            const optionTriggerId = optionsTriggerIds[i];\r\n            if (optionTriggerId && !steps[optionTriggerId]) {\r\n              throw new Error(\r\n                `The id '${optionTriggerId}' triggered by option ${i + 1} in step '${\r\n                  steps[key].id\r\n                }' does not exist`\r\n              );\r\n            }\r\n          }\r\n        } else if (triggerId && !steps[triggerId]) {\r\n          throw new Error(\r\n            `The id '${triggerId}' triggered by step '${steps[key].id}' does not exist`\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default schema;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst ChatBotContainer = styled.div`\r\n  background: ${({ theme }) => theme.background};\r\n  border-radius: 10px;\r\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\r\n  font-family: ${({ theme }) => theme.fontFamily};\r\n  overflow: hidden;\r\n  position: ${({ floating }) => (floating ? 'fixed' : 'relative')};\r\n  bottom: ${({ floating, floatingStyle }) =>\r\n    floating ? floatingStyle.bottom || '32px' : 'initial'};\r\n  top: ${({ floating, floatingStyle }) => (floating ? floatingStyle.top || 'initial' : 'initial')};\r\n  right: ${({ floating, floatingStyle }) => (floating ? floatingStyle.right || '32px' : 'initial')};\r\n  left: ${({ floating, floatingStyle }) =>\r\n    floating ? floatingStyle.left || 'initial' : 'initial'};\r\n  width: ${({ width }) => width};\r\n  height: ${({ height }) => height};\r\n  z-index: 999;\r\n  transform: ${({ opened }) => (opened ? 'scale(1)' : 'scale(0)')};\r\n  transform-origin: ${({ floatingStyle }) => floatingStyle.transformOrigin || 'bottom right'};\r\n  transition: transform 0.3s ease;\r\n\r\n  @media screen and (max-width: 568px) {\r\n    border-radius: ${({ floating }) => (floating ? '0' : '')};\r\n    bottom: 0 !important;\r\n    left: initial !important;\r\n    height: 100%;\r\n    right: 0 !important;\r\n    top: initial !important;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nChatBotContainer.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default ChatBotContainer;\r\n","import styled from 'styled-components';\r\n\r\nconst Content = styled.div`\r\n  height: calc(${props => props.height} - ${props => (props.hideInput ? '56px' : '112px')});\r\n  overflow-y: scroll;\r\n  margin-top: 2px;\r\n  padding-top: 6px;\r\n\r\n  @media screen and (max-width: 568px) {\r\n    height: ${props => (props.floating ? 'calc(100% - 112px)' : '')};\r\n  }\r\n`;\r\n\r\nexport default Content;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst Header = styled.div`\r\n  align-items: center;\r\n  background: ${({ theme }) => theme.headerBgColor};\r\n  color: ${({ theme }) => theme.headerFontColor};\r\n  display: flex;\r\n  fill: ${({ theme }) => theme.headerFontColor};\r\n  height: 56px;\r\n  justify-content: space-between;\r\n  padding: 0 10px;\r\n`;\r\n\r\nHeader.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default Header;\r\n","import styled from 'styled-components';\r\nimport defaultTheme from '../theme';\r\n\r\nconst HeaderTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: ${({ theme }) => theme.headerFontSize};\r\n`;\r\n\r\nHeaderTitle.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default HeaderTitle;\r\n","import styled from 'styled-components';\r\n\r\nconst HeaderIcon = styled.a`\r\n  cursor: pointer;\r\n`;\r\n\r\nexport default HeaderIcon;\r\n","import styled from 'styled-components';\r\n\r\nconst FloatButton = styled.a`\r\n  align-items: center;\r\n  cursor: pointer;\r\n  background: ${({ theme }) => theme.headerBgColor};\r\n  bottom: 32px;\r\n  border-radius: 100%;\r\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\r\n  display: flex;\r\n  fill: ${({ theme }) => theme.headerFontColor};\r\n  height: 56px;\r\n  justify-content: center;\r\n  position: fixed;\r\n  right: 32px;\r\n  transform: ${props => (props.opened ? 'scale(0)' : 'scale(1)')};\r\n  transition: transform 0.3s ease;\r\n  width: 56px;\r\n  z-index: 999;\r\n`;\r\n\r\nFloatButton.defaultProps = {\r\n  theme: {\r\n    headerBgColor: '#6e48aa',\r\n    headerFontColor: '#fff'\r\n  }\r\n};\r\n\r\nexport default FloatButton;\r\n","import styled from 'styled-components';\r\n\r\nconst FloatingIcon = styled.img`\r\n  height: 24px;\r\n  width: 24px;\r\n`;\r\n\r\nexport default FloatingIcon;\r\n","import styled from 'styled-components';\r\n\r\nconst Footer = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nexport default Footer;\r\n","import { invalidInput } from '../common/animations';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst Input = styled.input`\r\n  animation: ${props =>\r\n    props.invalid\r\n      ? css`\r\n          ${invalidInput} .2s ease\r\n        `\r\n      : ''};\r\n  border: 0;\r\n  border-radius: 0;\r\n  border-bottom-left-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n  border-top: ${props => (props.invalid ? '0' : '1px solid #eee')};\r\n  box-shadow: ${props => (props.invalid ? 'inset 0 0 2px #E53935' : 'none')};\r\n  box-sizing: border-box;\r\n  color: ${props => (props.invalid ? '#E53935' : '')};\r\n  font-size: 16px;\r\n  opacity: ${props => (props.disabled && !props.invalid ? '.5' : '1')};\r\n  outline: none;\r\n  padding: ${props => (props.hasButton ? '16px 52px 16px 10px' : '16px 10px')};\r\n  width: 100%;\r\n  -webkit-appearance: none;\r\n\r\n  &:disabled {\r\n    background: #fff;\r\n  }\r\n\r\n  @media screen and (max-width: 568px) {\r\n    border-bottom-left-radius: ${props => (props.floating ? '0' : '10px')};\r\n    border-bottom-right-radius: ${props => (props.floating ? '0' : '10px')};\r\n  }\r\n`;\r\n\r\nexport default Input;\r\n","import styled, { css } from 'styled-components';\r\nimport defaultTheme from '../theme';\r\nimport { pulse } from '../common/animations';\r\n\r\nconst fillFunc = props => {\r\n  const { speaking, invalid, theme } = props;\r\n\r\n  if (speaking) {\r\n    return theme.headerBgColor;\r\n  }\r\n  return invalid ? '#E53935' : '#4a4a4a';\r\n};\r\n\r\nconst SubmitButton = styled.button`\r\n  background-color: transparent;\r\n  border: 0;\r\n  border-bottom-right-radius: 10px;\r\n  box-shadow: none;\r\n  cursor: ${props => (props.disabled ? 'default' : 'pointer')};\r\n  fill: ${fillFunc};\r\n  opacity: ${props => (props.disabled && !props.invalid ? '.5' : '1')};\r\n  outline: none;\r\n  padding: 14px 16px 12px 16px;\r\n  &:before {\r\n    content: '';\r\n    position: absolute;\r\n    width: 23px;\r\n    height: 23px;\r\n    border-radius: 50%;\r\n    animation: ${({ theme, speaking }) =>\r\n      speaking\r\n        ? css`\r\n            ${pulse(theme.headerBgColor)} 2s ease infinite\r\n          `\r\n        : ''};\r\n  }\r\n  &:not(:disabled):hover {\r\n    opacity: 0.7;\r\n  }\r\n`;\r\n\r\nSubmitButton.defaultProps = {\r\n  theme: defaultTheme\r\n};\r\n\r\nexport default SubmitButton;\r\n","let instance = null;\r\n\r\nconst noop = () => {};\r\n\r\nexport default class Recognition {\r\n  static isSupported() {\r\n    return 'webkitSpeechRecognition' in window;\r\n  }\r\n\r\n  /**\r\n   * Creates an instance of Recognition.\r\n   * @param {function} [onChange] callback on change\r\n   * @param {function} [onEnd]  callback on and\r\n   * @param {function} [onStop]  callback on stop\r\n   * @param {string} [lang='en'] recognition lang\r\n   * @memberof Recognition\r\n   * @constructor\r\n   */\r\n  constructor(onChange = noop, onEnd = noop, onStop = noop, lang = 'en') {\r\n    if (!instance) {\r\n      instance = this;\r\n    }\r\n    this.state = {\r\n      inputValue: '',\r\n      lang,\r\n      onChange,\r\n      onEnd,\r\n      onStop\r\n    };\r\n\r\n    this.onResult = this.onResult.bind(this);\r\n    this.onEnd = this.onEnd.bind(this);\r\n\r\n    this.setup();\r\n\r\n    return instance;\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition change event\r\n   * @param {string} interimTranscript\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onChange(interimTranscript) {\r\n    const { onChange } = this.state;\r\n    this.setState({\r\n      inputValue: interimTranscript\r\n    });\r\n    onChange(interimTranscript);\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition change event when its final\r\n   * @param {string} finalTranscript\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onFinal(finalTranscript) {\r\n    this.setState({\r\n      inputValue: finalTranscript\r\n    });\r\n    this.recognition.stop();\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition end event\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onEnd() {\r\n    const { onStop, onEnd, force } = this.state;\r\n    this.setState({ speaking: false });\r\n    if (force) {\r\n      onStop();\r\n    } else {\r\n      onEnd();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handler for recognition result event\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  onResult(event) {\r\n    let interimTranscript = '';\r\n    let finalTranscript = '';\r\n\r\n    for (let i = event.resultIndex; i < event.results.length; i += 1) {\r\n      if (event.results[i].isFinal) {\r\n        finalTranscript += event.results[i][0].transcript;\r\n        this.onFinal(finalTranscript);\r\n      } else {\r\n        interimTranscript += event.results[i][0].transcript;\r\n        this.onChange(interimTranscript);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * method for updating the instance state\r\n   * @param {object} nextState\r\n   * @memberof Recognition\r\n   * @private\r\n   */\r\n  setState(nextState) {\r\n    this.state = Object.assign({}, this.state, nextState);\r\n  }\r\n\r\n  /**\r\n   * setup the browser recognition\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  setup() {\r\n    if (!Recognition.isSupported()) {\r\n      return this;\r\n    }\r\n\r\n    const { webkitSpeechRecognition } = window;\r\n\r\n    this.recognition = new webkitSpeechRecognition();\r\n    this.recognition.continuous = true;\r\n    this.recognition.interimResults = true;\r\n    this.recognition.lang = this.state.lang;\r\n    this.recognition.onresult = this.onResult;\r\n    this.recognition.onend = this.onEnd;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * change the recognition lang and resetup\r\n   * @param {string} lang the new lang\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  setLang(lang) {\r\n    this.setState({ lang });\r\n    this.setup();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * toggle the recognition\r\n   * @returns {Recognition}\r\n   * @memberof Recognition\r\n   * @public\r\n   */\r\n  speak() {\r\n    if (!Recognition.isSupported()) {\r\n      return this;\r\n    }\r\n    const { speaking } = this.state;\r\n    if (!speaking) {\r\n      this.recognition.start();\r\n      this.setState({\r\n        speaking: true,\r\n        inputValue: ''\r\n      });\r\n    } else {\r\n      this.setState({\r\n        force: true\r\n      });\r\n      this.recognition.stop();\r\n    }\r\n    return this;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nconst ChatIcon = () => (\r\n  <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z\" />\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n  </svg>\r\n);\r\n\r\nexport default ChatIcon;\r\n","import React from 'react';\r\n\r\nconst CloseIcon = () => (\r\n  <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <path\r\n      d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12\r\n      13.41 17.59 19 19 17.59 13.41 12z\"\r\n    />\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n  </svg>\r\n);\r\n\r\nexport default CloseIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst SubmitIcon = ({ size }) => (\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width={size}\r\n    height={size}\r\n    viewBox=\"0 0 500 500\"\r\n  >\r\n    <g>\r\n      <g>\r\n        <polygon points=\"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75\" />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nSubmitIcon.propTypes = {\r\n  size: PropTypes.number\r\n};\r\n\r\nSubmitIcon.defaultProps = {\r\n  size: 20\r\n};\r\n\r\nexport default SubmitIcon;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst MicIcon = ({ size }) => (\r\n  <svg\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    width={size}\r\n    height={size}\r\n    viewBox=\"0 0 400 400\"\r\n  >\r\n    <g>\r\n      <path d=\"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z\" />\r\n      <path d=\"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nMicIcon.propTypes = {\r\n  size: PropTypes.number\r\n};\r\n\r\nMicIcon.defaultProps = {\r\n  size: 20\r\n};\r\n\r\nexport default MicIcon;\r\n","export const isMobile = () => /iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent);\r\n\r\nexport const isString = value => typeof value === 'string';\r\n","import { isString } from './utils';\r\n\r\nexport const getSpeakText = step => {\r\n  const { message, metadata = {} } = step;\r\n  if (isString(metadata.speak)) {\r\n    return metadata.speak;\r\n  }\r\n  if (isString(message)) {\r\n    return message;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const speakFn = speechSynthesisOptions => (step, previousValue) => {\r\n  const { lang, voice, enable } = speechSynthesisOptions;\r\n  const { user } = step;\r\n\r\n  if (!window.SpeechSynthesisUtterance || !window.speechSynthesis) {\r\n    return;\r\n  }\r\n  if (user) {\r\n    return;\r\n  }\r\n  if (!enable) {\r\n    return;\r\n  }\r\n  const text = getSpeakText(step);\r\n  const msg = new window.SpeechSynthesisUtterance();\r\n  msg.text = text.replace(/{previousValue}/g, previousValue);\r\n  msg.lang = lang;\r\n  msg.voice = voice;\r\n  window.speechSynthesis.speak(msg);\r\n};\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Random from 'random-id';\r\nimport { CustomStep, OptionsStep, TextStep } from './steps_components';\r\nimport schema from './schemas/schema';\r\nimport * as storage from './storage';\r\nimport {\r\n  ChatBotContainer,\r\n  Content,\r\n  Header,\r\n  HeaderTitle,\r\n  HeaderIcon,\r\n  FloatButton,\r\n  FloatingIcon,\r\n  Footer,\r\n  Input,\r\n  SubmitButton\r\n} from './components';\r\nimport Recognition from './recognition';\r\nimport { ChatIcon, CloseIcon, SubmitIcon, MicIcon } from './icons';\r\nimport { isMobile } from './utils';\r\nimport { speakFn } from './speechSynthesis';\r\nclass ChatBot extends Component {\r\n  /* istanbul ignore next */\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.content = null;\r\n    this.input = null;\r\n\r\n    this.supportsScrollBehavior = false;\r\n\r\n    this.setContentRef = element => {\r\n      this.content = element;\r\n    };\r\n\r\n    this.setInputRef = element => {\r\n      this.input = element;\r\n    };\r\n\r\n    this.state = {\r\n      renderedSteps: [],\r\n      previousSteps: [],\r\n      currentStep: {},\r\n      previousStep: {},\r\n      steps: {},\r\n      disabled: true,\r\n      opened: props.opened || !props.floating,\r\n      inputValue: '',\r\n      inputInvalid: false,\r\n      speaking: false,\r\n      recognitionEnable: props.recognitionEnable && Recognition.isSupported(),\r\n      defaultUserSettings: {}\r\n    };\r\n\r\n    this.speak = speakFn(props.speechSynthesis);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { steps } = this.props;\r\n    const {\r\n      botDelay,\r\n      botAvatar,\r\n      botName,\r\n      cache,\r\n      cacheName,\r\n      customDelay,\r\n      enableMobileAutoFocus,\r\n      userAvatar,\r\n      userDelay\r\n    } = this.props;\r\n    const chatSteps = {};\r\n\r\n    const defaultBotSettings = { delay: botDelay, avatar: botAvatar, botName };\r\n    const defaultUserSettings = {\r\n      delay: userDelay,\r\n      avatar: userAvatar,\r\n      hideInput: false,\r\n      hideExtraControl: false\r\n    };\r\n    const defaultCustomSettings = { delay: customDelay };\r\n\r\n    for (let i = 0, len = steps.length; i < len; i += 1) {\r\n      const step = steps[i];\r\n      let settings = {};\r\n\r\n      if (step.user) {\r\n        settings = defaultUserSettings;\r\n      } else if (step.message || step.asMessage) {\r\n        settings = defaultBotSettings;\r\n      } else if (step.component) {\r\n        settings = defaultCustomSettings;\r\n      }\r\n\r\n      chatSteps[step.id] = Object.assign({}, settings, schema.parse(step));\r\n    }\r\n\r\n    schema.checkInvalidIds(chatSteps);\r\n\r\n    const firstStep = steps[0];\r\n\r\n    if (firstStep.message) {\r\n      const { message } = firstStep;\r\n      firstStep.message = typeof message === 'function' ? message() : message;\r\n      chatSteps[firstStep.id].message = firstStep.message;\r\n    }\r\n\r\n    const { recognitionEnable } = this.state;\r\n    const { recognitionLang } = this.props;\r\n\r\n    if (recognitionEnable) {\r\n      this.recognition = new Recognition(\r\n        this.onRecognitionChange,\r\n        this.onRecognitionEnd,\r\n        this.onRecognitionStop,\r\n        recognitionLang\r\n      );\r\n    }\r\n\r\n    this.supportsScrollBehavior = 'scrollBehavior' in document.documentElement.style;\r\n\r\n    if (this.content) {\r\n      this.content.addEventListener('DOMNodeInserted', this.onNodeInserted);\r\n      window.addEventListener('resize', this.onResize);\r\n    }\r\n\r\n    const { currentStep, previousStep, previousSteps, renderedSteps } = storage.getData(\r\n      {\r\n        cacheName,\r\n        cache,\r\n        firstStep,\r\n        steps: chatSteps\r\n      },\r\n      () => {\r\n        // focus input if last step cached is a user step\r\n        this.setState({ disabled: false }, () => {\r\n          if (enableMobileAutoFocus || !isMobile()) {\r\n            if (this.input) {\r\n              this.input.focus();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    );\r\n\r\n    this.setState({\r\n      currentStep,\r\n      defaultUserSettings,\r\n      previousStep,\r\n      previousSteps,\r\n      renderedSteps,\r\n      steps: chatSteps\r\n    });\r\n  }\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    const { opened, toggleFloating } = props;\r\n    if (toggleFloating !== undefined && opened !== undefined && opened !== state.opened) {\r\n      return {\r\n        ...state,\r\n        opened\r\n      };\r\n    }\r\n    return state;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.content) {\r\n      this.content.removeEventListener('DOMNodeInserted', this.onNodeInserted);\r\n      window.removeEventListener('resize', this.onResize);\r\n    }\r\n  }\r\n\r\n  onNodeInserted = event => {\r\n    const { currentTarget: target } = event;\r\n    const { enableSmoothScroll } = this.props;\r\n\r\n    if (enableSmoothScroll && this.supportsScrollBehavior) {\r\n      target.scroll({\r\n        top: target.scrollHeight,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    } else {\r\n      target.scrollTop = target.scrollHeight;\r\n    }\r\n  };\r\n\r\n  onResize = () => {\r\n    this.content.scrollTop = this.content.scrollHeight;\r\n  };\r\n\r\n  onRecognitionChange = value => {\r\n    this.setState({ inputValue: value });\r\n  };\r\n\r\n  onRecognitionEnd = () => {\r\n    this.setState({ speaking: false });\r\n    this.handleSubmitButton();\r\n  };\r\n\r\n  onRecognitionStop = () => {\r\n    this.setState({ speaking: false });\r\n  };\r\n\r\n  onValueChange = event => {\r\n    this.setState({ inputValue: event.target.value });\r\n  };\r\n\r\n  getTriggeredStep = (trigger, value) => {\r\n    const steps = this.generateRenderedStepsById();\r\n    return typeof trigger === 'function' ? trigger({ value, steps }) : trigger;\r\n  };\r\n\r\n  getStepMessage = message => {\r\n    const { previousSteps } = this.state;\r\n    const lastStepIndex = previousSteps.length > 0 ? previousSteps.length - 1 : 0;\r\n    const steps = this.generateRenderedStepsById();\r\n    const previousValue = previousSteps[lastStepIndex].value;\r\n    return typeof message === 'function' ? message({ previousValue, steps }) : message;\r\n  };\r\n\r\n  generateRenderedStepsById = () => {\r\n    const { previousSteps } = this.state;\r\n    const steps = {};\r\n\r\n    for (let i = 0, len = previousSteps.length; i < len; i += 1) {\r\n      const { id, message, value, metadata } = previousSteps[i];\r\n\r\n      steps[id] = {\r\n        id,\r\n        message,\r\n        value,\r\n        metadata\r\n      };\r\n    }\r\n\r\n    return steps;\r\n  };\r\n\r\n  triggerNextStep = data => {\r\n    const { enableMobileAutoFocus } = this.props;\r\n    const { defaultUserSettings, previousSteps, renderedSteps, steps } = this.state;\r\n\r\n    let { currentStep, previousStep } = this.state;\r\n    const isEnd = currentStep.end;\r\n    \r\n    if (data && data.value) {\r\n      currentStep.value = data.value;\r\n    }\r\n    if (data && data.hideInput) {\r\n      currentStep.hideInput = data.hideInput;\r\n    }\r\n    if (data && data.hideExtraControl) {\r\n      currentStep.hideExtraControl = data.hideExtraControl;\r\n    }\r\n    if (data && data.trigger) {\r\n      currentStep.trigger = this.getTriggeredStep(data.trigger, data.value);\r\n    }\r\n\r\n    if (isEnd) {\r\n      this.handleEnd();\r\n    } else if (currentStep.options && data) {\r\n      const option = currentStep.options.filter(o => o.value === data.value)[0];\r\n      const trigger = this.getTriggeredStep(option.trigger, currentStep.value);\r\n      delete currentStep.options;\r\n      \r\n      // replace choose option for user message\r\n      currentStep = Object.assign({}, currentStep, option, defaultUserSettings, {\r\n        user: true,\r\n        message: option.label,\r\n        trigger\r\n      });     \r\n      renderedSteps.pop();\r\n      previousSteps.pop();\r\n      renderedSteps.push(currentStep);\r\n      previousSteps.push(currentStep);\r\n\r\n      this.setState({\r\n        currentStep,\r\n        renderedSteps,\r\n        previousSteps\r\n      });\r\n    } else if (currentStep.trigger && currentStep.replace && data) {\r\n        const trigger = this.getTriggeredStep(currentStep.trigger, currentStep.value);      \r\n        const val = currentStep.value;\r\n        const msg = data.userMsg;//user message\r\n        const stepMsg = data.botStepMsg; //bot message\r\n        const hasUserMessage = data.preserveMsg;\r\n        const isSpecialStep = data.hasOwnProperty('isSpecialStep')?data.isSpecialStep:false;\r\n        const defaultBotSettings = { delay: 0, avatar: this.props.botAvatar, botName: this.props.botName };\r\n\r\n        //delete currentStep.component;  \r\n        if(hasUserMessage){        \r\n          const thisStepMsg = {id:currentStep.id, key: currentStep.key, msg: stepMsg, trigger: ''};\r\n          const nextS = Object.assign({}, thisStepMsg, 0, defaultBotSettings, {\r\n            user: false,\r\n            message: stepMsg,\r\n            rendered:true,\r\n            \r\n          }); \r\n          delete currentStep.component;\r\n          delete currentStep.trigger;\r\n\r\n          currentStep = Object.assign({}, currentStep, val, defaultUserSettings, {\r\n            user: true,\r\n            message: msg,\r\n            trigger: trigger,            \r\n          });\r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(nextS);\r\n          previousSteps.push(nextS);\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        }/* else if(isSpecialStep){\r\n          delete currentStep.component;              \r\n          const previousStep = this.state.previousStep;\r\n          const out = hasUserMessage?msg:stepMsg;\r\n          \r\n          const thisStepMsg = {id:previousStep.id, key: previousStep.key, msg: previousStep.value, trigger: \"\"};\r\n          const nextS = Object.assign({}, thisStepMsg, 0, defaultUserSettings, {\r\n            user: true,\r\n            message: previousStep.value,\r\n            rendered:isSpecialStep,           \r\n            \r\n          });\r\n\r\n          currentStep = Object.assign({}, currentStep, val, defaultBotSettings, {\r\n            user: hasUserMessage,\r\n            message: out,\r\n            rendered:false,\r\n            \r\n          });\r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(nextS);\r\n          previousSteps.push(nextS);\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          \r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        \r\n        } */else {\r\n          delete currentStep.component;\r\n              \r\n          const settings = hasUserMessage?defaultUserSettings:defaultBotSettings;\r\n          const out = hasUserMessage?msg:stepMsg;\r\n          currentStep = Object.assign({}, currentStep, val, settings, {\r\n            user: hasUserMessage,\r\n            message: out,\r\n            trigger,\r\n            \r\n          }); \r\n          \r\n          renderedSteps.pop();\r\n          previousSteps.pop();\r\n          renderedSteps.push(currentStep);\r\n          previousSteps.push(currentStep);\r\n          \r\n          this.setState({\r\n            currentStep,\r\n            renderedSteps,\r\n            previousSteps\r\n          });\r\n        }\r\n      } else if (currentStep.trigger) {      \r\n      \r\n       const trigger = this.getTriggeredStep(currentStep.trigger, currentStep.value);  \r\n        let nextStep = Object.assign({}, steps[trigger]);\r\n     \r\n      if (nextStep.message) {\r\n        nextStep.message = this.getStepMessage(nextStep.message);\r\n      } else if (nextStep.update) {\r\n        const updateStep = nextStep;\r\n        nextStep = Object.assign({}, steps[updateStep.update]);\r\n\r\n        if (nextStep.options) {\r\n          for (let i = 0, len = nextStep.options.length; i < len; i += 1) {\r\n            nextStep.options[i].trigger = updateStep.trigger;\r\n          }\r\n        } else {\r\n          nextStep.trigger = updateStep.trigger;\r\n        }\r\n      }\r\n\r\n      nextStep.key = Random(24);\r\n\r\n      previousStep = currentStep;\r\n      currentStep = nextStep;\r\n\r\n      this.setState({ renderedSteps, currentStep, previousStep }, () => {\r\n        if (nextStep.user) {\r\n          this.setState({ disabled: false }, () => {\r\n            if (enableMobileAutoFocus || !isMobile()) {\r\n              if (this.input) {\r\n                this.input.focus();\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          renderedSteps.push(nextStep);\r\n          previousSteps.push(nextStep);\r\n\r\n          this.setState({ renderedSteps, previousSteps });\r\n        }\r\n      });\r\n    }\r\n\r\n    const { cache, cacheName } = this.props;\r\n    if (cache) {\r\n      setTimeout(() => {\r\n        storage.setData(cacheName, {\r\n          currentStep,\r\n          previousStep,\r\n          previousSteps,\r\n          renderedSteps\r\n        });\r\n      }, 300);\r\n    }\r\n  };\r\n\r\n  handleEnd = () => {\r\n    const { handleEnd } = this.props;\r\n\r\n    if (handleEnd) {\r\n      const { previousSteps } = this.state;\r\n\r\n      const renderedSteps = previousSteps.map(step => {\r\n        const { id, message, value, metadata } = step;\r\n\r\n        return {\r\n          id,\r\n          message,\r\n          value,\r\n          metadata\r\n        };\r\n      });\r\n\r\n      const steps = [];\r\n\r\n      for (let i = 0, len = previousSteps.length; i < len; i += 1) {\r\n        const { id, message, value, metadata } = previousSteps[i];\r\n\r\n        steps[id] = {\r\n          id,\r\n          message,\r\n          value,\r\n          metadata\r\n        };\r\n      }\r\n\r\n      const values = previousSteps.filter(step => step.value).map(step => step.value);\r\n\r\n      handleEnd({ renderedSteps, steps, values });\r\n    }\r\n  };\r\n\r\n  isInputValueEmpty = () => {\r\n    const { inputValue } = this.state;\r\n    return !inputValue || inputValue.length === 0;\r\n  };\r\n\r\n  isLastPosition = step => {\r\n    const { renderedSteps } = this.state;\r\n    const { length } = renderedSteps;\r\n    const stepIndex = renderedSteps.map(s => s.key).indexOf(step.key);\r\n\r\n    if (length <= 1 || stepIndex + 1 === length) {\r\n      return true;\r\n    }\r\n\r\n    const nextStep = renderedSteps[stepIndex + 1];\r\n    const hasMessage = nextStep.message || nextStep.asMessage;\r\n\r\n    if (!hasMessage) {\r\n      return true;\r\n    }\r\n\r\n    const isLast = step.user !== nextStep.user;\r\n    return isLast;\r\n  };\r\n\r\n  isFirstPosition = step => {\r\n    const { renderedSteps } = this.state;\r\n    const stepIndex = renderedSteps.map(s => s.key).indexOf(step.key);\r\n\r\n    if (stepIndex === 0) {\r\n      return true;\r\n    }\r\n\r\n    const lastStep = renderedSteps[stepIndex - 1];\r\n    const hasMessage = lastStep.message || lastStep.asMessage;\r\n\r\n    if (!hasMessage) {\r\n      return true;\r\n    }\r\n\r\n    const isFirst = step.user !== lastStep.user;\r\n    return isFirst;\r\n  };\r\n\r\n  handleKeyPress = event => {\r\n    if (event.key === 'Enter') {\r\n      this.submitUserMessage();\r\n    }\r\n  };\r\n\r\n  handleSubmitButton = () => {\r\n    const { speaking, recognitionEnable } = this.state;\r\n\r\n    if ((this.isInputValueEmpty() || speaking) && recognitionEnable) {\r\n      this.recognition.speak();\r\n      if (!speaking) {\r\n        this.setState({ speaking: true });\r\n      }\r\n      return;\r\n    }\r\n\r\n    this.submitUserMessage();\r\n  };\r\n\r\n  submitUserMessage = () => {\r\n    const { defaultUserSettings, inputValue, previousSteps, renderedSteps } = this.state;\r\n    let { currentStep } = this.state;\r\n\r\n    const isInvalid = currentStep.validator && this.checkInvalidInput();\r\n\r\n    if (!isInvalid) {\r\n      const step = {\r\n        message: inputValue,\r\n        value: inputValue\r\n      };\r\n\r\n      currentStep = Object.assign({}, defaultUserSettings, currentStep, step);\r\n\r\n      renderedSteps.push(currentStep);\r\n      previousSteps.push(currentStep);\r\n\r\n      this.setState(\r\n        {\r\n          currentStep,\r\n          renderedSteps,\r\n          previousSteps,\r\n          disabled: true,\r\n          inputValue: ''\r\n        },\r\n        () => {\r\n          if (this.input) {\r\n            this.input.blur();\r\n          }\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  checkInvalidInput = () => {\r\n    const { enableMobileAutoFocus } = this.props;\r\n    const { currentStep, inputValue } = this.state;\r\n    const result = currentStep.validator(inputValue);\r\n    const value = inputValue;\r\n\r\n    if (typeof result !== 'boolean' || !result) {\r\n      this.setState(\r\n        {\r\n          inputValue: result.toString(),\r\n          inputInvalid: true,\r\n          disabled: true\r\n        },\r\n        () => {\r\n          setTimeout(() => {\r\n            this.setState(\r\n              {\r\n                inputValue: value,\r\n                inputInvalid: false,\r\n                disabled: false\r\n              },\r\n              () => {\r\n                if (enableMobileAutoFocus || !isMobile()) {\r\n                  if (this.input) {\r\n                    this.input.focus();\r\n                  }\r\n                }\r\n              }\r\n            );\r\n          }, 2000);\r\n        }\r\n      );\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  toggleChatBot = opened => {\r\n    const { toggleFloating } = this.props;\r\n\r\n    if (toggleFloating) {\r\n      toggleFloating({ opened });\r\n    } else {\r\n      this.setState({ opened });\r\n    }\r\n  };\r\n\r\n  renderStep = (step, index) => {\r\n    const { renderedSteps } = this.state;\r\n    const {\r\n      avatarStyle,\r\n      bubbleStyle,\r\n      bubbleOptionStyle,\r\n      customStyle,\r\n      hideBotAvatar,\r\n      hideUserAvatar,\r\n      speechSynthesis\r\n    } = this.props;\r\n    const { options, component, asMessage } = step;\r\n    const steps = this.generateRenderedStepsById();\r\n    const previousStep = index > 0 ? renderedSteps[index - 1] : {};\r\n\r\n    if (component && !asMessage) {\r\n      return (\r\n        <CustomStep\r\n          key={index}\r\n          speak={this.speak}\r\n          step={step}\r\n          steps={steps}\r\n          style={customStyle}\r\n          previousStep={previousStep}\r\n          previousValue={previousStep.value}\r\n          triggerNextStep={this.triggerNextStep}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (options) {\r\n      return (\r\n        <OptionsStep\r\n          key={index}\r\n          step={step}\r\n          previousValue={previousStep.value}\r\n          triggerNextStep={this.triggerNextStep}\r\n          bubbleOptionStyle={bubbleOptionStyle}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <TextStep\r\n        key={index}\r\n        step={step}\r\n        steps={steps}\r\n        speak={this.speak}\r\n        previousStep={previousStep}\r\n        previousValue={previousStep.value}\r\n        triggerNextStep={this.triggerNextStep}\r\n        avatarStyle={avatarStyle}\r\n        bubbleStyle={bubbleStyle}\r\n        hideBotAvatar={hideBotAvatar}\r\n        hideUserAvatar={hideUserAvatar}\r\n        speechSynthesis={speechSynthesis}\r\n        isFirst={this.isFirstPosition(step)}\r\n        isLast={this.isLastPosition(step)}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentStep,\r\n      disabled,\r\n      inputInvalid,\r\n      inputValue,\r\n      opened,\r\n      renderedSteps,\r\n      speaking,\r\n      recognitionEnable\r\n    } = this.state;\r\n    const {\r\n      className,\r\n      contentStyle,\r\n      extraControl,\r\n      controlStyle,\r\n      floating,\r\n      floatingIcon,\r\n      floatingStyle,\r\n      footerStyle,\r\n      headerComponent,\r\n      headerTitle,\r\n      hideHeader,\r\n      hideSubmitButton,\r\n      inputStyle,\r\n      placeholder,\r\n      inputAttributes,\r\n      recognitionPlaceholder,\r\n      style,\r\n      submitButtonStyle,\r\n      width,\r\n      height\r\n    } = this.props;\r\n\r\n    const header = headerComponent || (\r\n      <Header className=\"rsc-header\">\r\n        <HeaderTitle className=\"rsc-header-title\">{headerTitle}</HeaderTitle>\r\n        {floating && (\r\n          <HeaderIcon className=\"rsc-header-close-button\" onClick={() => this.toggleChatBot(false)}>\r\n            <CloseIcon />\r\n          </HeaderIcon>\r\n        )}\r\n      </Header>\r\n    );\r\n\r\n    let customControl;\r\n    if (extraControl !== undefined) {\r\n      customControl = React.cloneElement(extraControl, {\r\n        disabled,\r\n        speaking,\r\n        invalid: inputInvalid\r\n      });\r\n    }\r\n\r\n    const icon =\r\n      (this.isInputValueEmpty() || speaking) && recognitionEnable ? <MicIcon /> : <SubmitIcon />;\r\n\r\n    const inputPlaceholder = speaking\r\n      ? recognitionPlaceholder\r\n      : currentStep.placeholder || placeholder;\r\n\r\n    const inputAttributesOverride = currentStep.inputAttributes || inputAttributes;\r\n\r\n    return (\r\n      <div className={`rsc ${className}`}>\r\n        {floating && (\r\n          <FloatButton\r\n            className=\"rsc-float-button\"\r\n            style={floatingStyle}\r\n            opened={opened}\r\n            onClick={() => this.toggleChatBot(true)}\r\n          >\r\n            {typeof floatingIcon === 'string' ? <FloatingIcon src={floatingIcon} /> : floatingIcon}\r\n          </FloatButton>\r\n        )}\r\n        <ChatBotContainer\r\n          className=\"rsc-container\"\r\n          floating={floating}\r\n          floatingStyle={floatingStyle}\r\n          opened={opened}\r\n          style={style}\r\n          width={width}\r\n          height={height}\r\n        >\r\n          {!hideHeader && header}\r\n          <Content\r\n            className=\"rsc-content\"\r\n            ref={this.setContentRef}\r\n            floating={floating}\r\n            style={contentStyle}\r\n            height={height}\r\n            hideInput={currentStep.hideInput}\r\n          >\r\n            {renderedSteps.map(this.renderStep)}\r\n          </Content>\r\n          <Footer className=\"rsc-footer\" style={footerStyle}>\r\n            {!currentStep.hideInput && (\r\n              <Input\r\n                type=\"textarea\"\r\n                style={inputStyle}\r\n                ref={this.setInputRef}\r\n                className=\"rsc-input\"\r\n                placeholder={inputInvalid ? '' : inputPlaceholder}\r\n                onKeyPress={this.handleKeyPress}\r\n                onChange={this.onValueChange}\r\n                value={inputValue}\r\n                floating={floating}\r\n                invalid={inputInvalid}\r\n                disabled={disabled}\r\n                hasButton={!hideSubmitButton}\r\n                {...inputAttributesOverride}\r\n              />\r\n            )}\r\n            <div style={controlStyle} className=\"rsc-controls\">\r\n              {!currentStep.hideInput && !currentStep.hideExtraControl && customControl}\r\n              {!currentStep.hideInput && !hideSubmitButton && (\r\n                <SubmitButton\r\n                  className=\"rsc-submit-button\"\r\n                  style={submitButtonStyle}\r\n                  onClick={this.handleSubmitButton}\r\n                  invalid={inputInvalid}\r\n                  disabled={disabled}\r\n                  speaking={speaking}\r\n                >\r\n                  {icon}\r\n                </SubmitButton>\r\n              )}\r\n            </div>\r\n          </Footer>\r\n        </ChatBotContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nChatBot.propTypes = {\r\n  avatarStyle: PropTypes.objectOf(PropTypes.any),\r\n  botAvatar: PropTypes.string,\r\n  botName: PropTypes.string,\r\n  botDelay: PropTypes.number,\r\n  bubbleOptionStyle: PropTypes.objectOf(PropTypes.any),\r\n  bubbleStyle: PropTypes.objectOf(PropTypes.any),\r\n  cache: PropTypes.bool,\r\n  cacheName: PropTypes.string,\r\n  className: PropTypes.string,\r\n  contentStyle: PropTypes.objectOf(PropTypes.any),\r\n  customDelay: PropTypes.number,\r\n  customStyle: PropTypes.objectOf(PropTypes.any),\r\n  controlStyle: PropTypes.objectOf(PropTypes.any),\r\n  enableMobileAutoFocus: PropTypes.bool,\r\n  enableSmoothScroll: PropTypes.bool,\r\n  extraControl: PropTypes.objectOf(PropTypes.element),\r\n  floating: PropTypes.bool,\r\n  floatingIcon: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\r\n  floatingStyle: PropTypes.objectOf(PropTypes.any),\r\n  footerStyle: PropTypes.objectOf(PropTypes.any),\r\n  handleEnd: PropTypes.func,\r\n  headerComponent: PropTypes.element,\r\n  headerTitle: PropTypes.string,\r\n  height: PropTypes.string,\r\n  hideBotAvatar: PropTypes.bool,\r\n  hideHeader: PropTypes.bool,\r\n  hideSubmitButton: PropTypes.bool,\r\n  hideUserAvatar: PropTypes.bool,\r\n  inputAttributes: PropTypes.objectOf(PropTypes.any),\r\n  inputStyle: PropTypes.objectOf(PropTypes.any),\r\n  opened: PropTypes.bool,\r\n  toggleFloating: PropTypes.func,\r\n  placeholder: PropTypes.string,\r\n  recognitionEnable: PropTypes.bool,\r\n  recognitionLang: PropTypes.string,\r\n  recognitionPlaceholder: PropTypes.string,\r\n  speechSynthesis: PropTypes.shape({\r\n    enable: PropTypes.bool,\r\n    lang: PropTypes.string,\r\n    voice:\r\n      typeof window !== 'undefined'\r\n        ? PropTypes.instanceOf(window.SpeechSynthesisVoice)\r\n        : PropTypes.any\r\n  }),\r\n  steps: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  style: PropTypes.objectOf(PropTypes.any),\r\n  submitButtonStyle: PropTypes.objectOf(PropTypes.any),\r\n  userAvatar: PropTypes.string,\r\n  userDelay: PropTypes.number,\r\n  width: PropTypes.string\r\n};\r\n\r\nChatBot.defaultProps = {\r\n  avatarStyle: {},\r\n  botDelay: 1000,\r\n  botName: 'The bot',\r\n  bubbleOptionStyle: {},\r\n  bubbleStyle: {},\r\n  cache: false,\r\n  cacheName: 'rsc_cache',\r\n  className: '',\r\n  contentStyle: {},\r\n  customStyle: {},\r\n  controlStyle: { position: 'absolute', right: '0', top: '0' },\r\n  customDelay: 1000,\r\n  enableMobileAutoFocus: false,\r\n  enableSmoothScroll: false,\r\n  extraControl: undefined,\r\n  floating: false,\r\n  floatingIcon: <ChatIcon />,\r\n  floatingStyle: {},\r\n  footerStyle: {},\r\n  handleEnd: undefined,\r\n  headerComponent: undefined,\r\n  headerTitle: 'Chat',\r\n  height: '520px',\r\n  hideBotAvatar: false,\r\n  hideHeader: false,\r\n  hideSubmitButton: false,\r\n  hideUserAvatar: false,\r\n  inputStyle: {},\r\n  opened: undefined,\r\n  placeholder: 'Type the message ...',\r\n  inputAttributes: {},\r\n  recognitionEnable: false,\r\n  recognitionLang: 'en',\r\n  recognitionPlaceholder: 'Listening ...',\r\n  speechSynthesis: {\r\n    enable: false,\r\n    lang: 'en',\r\n    voice: null\r\n  },\r\n  style: {},\r\n  submitButtonStyle: {},\r\n  toggleFloating: undefined,\r\n  userDelay: 1000,\r\n  width: '350px',\r\n  botAvatar:\r\n    \"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e\",\r\n  userAvatar:\r\n    \"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e\"\r\n};\r\n\r\nexport default ChatBot;\r\n","import { stringify, parse } from 'flatted/cjs'\r\n\r\n/* istanbul ignore next */\r\nconst getData = (params, callback) => {\r\n  const { cacheName, cache, firstStep, steps } = params;\r\n  const currentStep = firstStep;\r\n  const renderedSteps = [steps[currentStep.id]];\r\n  const previousSteps = [steps[currentStep.id]];\r\n  const previousStep = {};\r\n  const unParsedCache = localStorage.getItem(cacheName);\r\n\r\n  if (cache && unParsedCache) {\r\n    try {\r\n      const data = parse(unParsedCache);\r\n      const lastStep = data.renderedSteps[data.renderedSteps.length - 1];\r\n\r\n      if (lastStep && lastStep.end) {\r\n        localStorage.removeItem(cacheName);\r\n      } else {\r\n        for (let i = 0, len = data.renderedSteps.length; i < len; i += 1) {\r\n          const renderedStep = data.renderedSteps[i];\r\n          // remove delay of cached rendered steps\r\n          data.renderedSteps[i].delay = 0;\r\n          // flag used to avoid call triggerNextStep in cached rendered steps\r\n          data.renderedSteps[i].rendered = true;\r\n\r\n          // an error is thrown when render a component from localStorage.\r\n          // So it's necessary reassing the component\r\n          if (renderedStep.component) {\r\n            const { id } = renderedStep;\r\n            data.renderedSteps[i].component = steps[id].component;\r\n          }\r\n        }\r\n\r\n        const { trigger, end, options } = data.currentStep;\r\n        const { id } = data.currentStep;\r\n\r\n        if (options) {\r\n          delete data.currentStep.rendered;\r\n        }\r\n\r\n        // add trigger function to current step\r\n        if (!trigger && !end) {\r\n          if (options) {\r\n            for (let i = 0; i < options.length; i += 1) {\r\n              data.currentStep.options[i].trigger = steps[id].options[i].trigger;\r\n            }\r\n          } else {\r\n            data.currentStep.trigger = steps[id].trigger;\r\n          }\r\n        }\r\n\r\n        // execute callback function to enable input if last step is\r\n        // waiting user type\r\n        if (data.currentStep.user) {\r\n          callback();\r\n        }\r\n\r\n        return data;\r\n      }\r\n    } catch (error) {\r\n      console.info(`Unable to parse cache named:${cacheName}. \\nThe cache where probably created with an older version of react-simple-chatbot.\\n`, error);\r\n    }\r\n  }\r\n\r\n  return {\r\n    currentStep,\r\n    previousStep,\r\n    previousSteps,\r\n    renderedSteps\r\n  };\r\n};\r\n\r\n/* istanbul ignore next */\r\nconst setData = (cacheName, cachedData) => {\r\n  const data = parse(stringify(cachedData));\r\n  // clean components\r\n  for (const key in data) {\r\n    for (let i = 0, len = data[key].length; i < len; i += 1) {\r\n      if (data[key][i].component) {\r\n        data[key][i].component = data[key][i].id;\r\n      }\r\n    }\r\n  }\r\n\r\n  localStorage.setItem(cacheName, stringify(data));\r\n};\r\n\r\nexport { getData, setData };\r\n","import React from 'react';\r\nimport {StaticTitle, PopupMenu} from '../../Elements/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width:'100%'\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction initializeSelection(initial){\r\n  const selected = initial.selected;  \r\n  const isSel = selected!==null&&selected!==undefined;\r\n  const ret = {crusts:'0', sizes:'0'};\r\n  if(isSel){\r\n    const menuType = initial.menuType;\r\n    const selMenuType = selected.hasOwnProperty(menuType)?selected[menuType]:false;\r\n    if(selMenuType){\r\n      const selItem = selMenuType['1'];\r\n      const c = selItem.hasOwnProperty('crusts')?selItem.crusts:'0';\r\n      const s = selItem.hasOwnProperty('sizes')?selItem.sizes:'0';\r\n      ret.crusts = c;\r\n      ret.sizes = s;\r\n    }\r\n  } \r\n  return ret;\r\n}\r\nexport default function PizzaTypeStep(props){     \r\n  const classes = useStyles();\r\n  const [initialized, setInitialzied] = React.useState(false);\r\n  const initialSelect = (p)=>{\r\n    return initializeSelection(p)\r\n  }\r\n  const updateItem = props.updateItem;\r\n  const stepData = props.stepData;\r\n  \r\n  const [size, setSize] = React.useState('0');\r\n  const [crust,setCrust] =React.useState('0');\r\n  if(!initialized){\r\n    const ini = initialSelect({selected:props.selected,menuType:stepData.menuType})\r\n    setSize(ini.sizes);\r\n    setCrust(ini.crusts);\r\n    setInitialzied(true)\r\n  }\r\n  const handleMenuSelect = (input)=>{        \r\n    const chk = (p)=>{\r\n      const item = {crusts:crust,sizes:size};\r\n      const type=p.type;\r\n      const value = p.value;\r\n      item[type]=value;\r\n      if(type==='sizes'&&size!==value){\r\n        setSize(value);\r\n        return item;\r\n      } else if(type==='crusts'&&crust!==value){\r\n        setCrust(value);\r\n        return item;\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    const doUpdate = chk(input);\r\n    if(doUpdate){\r\n      updateItem({item:{itemID:'1',values:doUpdate},replace:true})\r\n    }    \r\n  }  \r\n  const content = stepData.content.values.map((i)=>{\r\n    const type = i.type;\r\n    const caption = i.caption;\r\n    const description = i.description;\r\n    const items=stepData.content[type].map((o)=>{\r\n      const id = o.id;\r\n      const caption = o.caption;\r\n      const description = o.description;\r\n      return {id:id, caption:caption, description:description, isDisabled:false}\r\n    });\r\n    return {type:type, caption:caption, description:description, items:items};\r\n  })\r\n  //const newType ={}\r\n  \r\n  const selected = {crusts:crust, sizes:size}  \r\n  const displayElements = (\r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        {content.map((i)=>{        \r\n        const type = i.type;\r\n        const rowTitle = i.caption;\r\n        const description = i.description;\r\n        const isDisabled = false;\r\n        const sel = parseInt(selected[type]);\r\n        return (\r\n          <Grid container item\r\n            direction=\"row\"\r\n            justify=\"flex-start\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item>\r\n              <Paper className={classes.paper}>\r\n                <StaticTitle rowTitle={rowTitle} description={description}/>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid item>\r\n              <Paper className={classes.paper}>\r\n                <PopupMenu type={type} itemTypeCaption={rowTitle} selected={sel} isDisabled={isDisabled} items={i.items} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n              </Paper>\r\n            </Grid>\r\n        </Grid>);\r\n        })}\r\n      </Grid>        \r\n    </div> \r\n  )\r\n  return(   \r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        {displayElements}\r\n      </Grid>      \r\n    </div>             \r\n  )\r\n}","import React from 'react';\r\nimport {StaticRowElement, PopupMenu} from '../../Elements/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width:'100%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction initializeSelection(initial){\r\n  const selected = initial.selected;  \r\n  const isSel = selected!==null&&selected!==undefined;\r\n  const ret = {sauces:'0', qty:'0'};\r\n  if(isSel){\r\n    const menuType = initial.menuType;\r\n    const selMenuType = selected.hasOwnProperty(menuType)?selected[menuType]:false;\r\n    if(selMenuType){\r\n      const item = initial.itemList.find((i)=>(selMenuType.hasOwnProperty(i.id)));\r\n      if(item!==null&&item!==undefined){\r\n        const selItem = selMenuType[item.id];      \r\n        const q = selItem.hasOwnProperty('qty')?selItem.qty:'2';\r\n        ret.qty = q; \r\n        ret.sauces = item.id;\r\n      }     \r\n    }\r\n  } \r\n  return ret;\r\n}\r\nexport default function SauceStep(props){\r\n  const classes = useStyles();    \r\n  const updateItem = props.updateItem;\r\n  const stepData = props.stepData;\r\n  const type = stepData.menuType;\r\n  const itemTypeCaption = stepData.caption;  \r\n  const content = stepData.content.values.map((i)=>{\r\n    const id = i.id;\r\n    const caption = i.caption;\r\n    const description = i.description;    \r\n    return {id:id, caption:caption, description:description, isDisabled:false};\r\n  });\r\n  \r\n  const [sauce, setSauce] = React.useState('0');\r\n  const [qty, setQty] = React.useState('0');\r\n  const [initialized, setInitialzied] = React.useState(false);\r\n  const initialSelect = (p)=>{\r\n    return initializeSelection(p)\r\n  }\r\n  if(!initialized){\r\n    const ini = initialSelect({selected:props.selected,menuType:stepData.menuType, itemList:stepData.content.values})\r\n    setSauce(ini.sauces);\r\n    setQty(ini.qty);\r\n    setInitialzied(true)\r\n  }\r\n  const handleMenuSelect = (input)=>{\r\n    const chk = (p)=>{\r\n      const item ={itemID:sauce,values:{qty:qty, half:'2'}};\r\n      const type=p.type;\r\n      const value = p.value;    \r\n      if(type==='qty'&&qty!==value){        \r\n        item.values.qty = value;\r\n        setQty(value);\r\n        return item;\r\n      } else if(type==='sauces'&&sauce!==value){\r\n        item.itemID = value;\r\n        item.values.qty='2';\r\n        setSauce(value);\r\n        setQty('2');\r\n        return item;\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    const doUpdate = chk(input);\r\n    if(doUpdate){\r\n      updateItem({item:doUpdate,replace:true})\r\n    }\r\n  }\r\n  const selItem = sauce!=='0'?content.find((i)=>(i.id===sauce)):'0';\r\n  const selName =selItem!==undefined&&selItem!=='0'?selItem.caption:`No ${itemTypeCaption} selected`;  \r\n  const qtyVal = stepData.content.qty.find((i)=>(i.id===qty));  \r\n  const maxQty =stepData.content.qty.length;\r\n  const sel = {maxQty:maxQty, qty:parseInt(qty), half:2}\r\n  const description = {name:selName, qty:(qtyVal!==undefined?qtyVal.caption:''),half:''};\r\n  const captions = {qty:(qtyVal!==undefined?qtyVal.description:''),half:''};\r\n  if(!initialized){return false}\r\n  return(   \r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <Paper className={classes.paper}>\r\n              <PopupMenu type={type} itemTypeCaption={itemTypeCaption} selected={parseInt(selItem)} isDisabled={false} items={content} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container spacing={1}>\r\n          <Grid item>\r\n            <Paper className={classes.paper}>\r\n              <StaticRowElement \r\n              typeCaption={itemTypeCaption} itemID={sauce} sel={sel} description={description} captions={captions} \r\n              hasHalf={false} hasQty={true} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n            </Paper> \r\n          </Grid> \r\n        </Grid> \r\n      </Grid>      \r\n    </div>             \r\n  )\r\n}","import React from 'react';\r\nimport {StaticRowElement, StaticTitle} from '../../Elements/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width:'100%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction initializeSelection(initial){\r\n  const selected = initial.selected;  \r\n  const isSel = selected!==null&&selected!==undefined;\r\n  const ret = {};\r\n  \r\n  if(isSel){\r\n    const menuType = initial.menuType;\r\n    const selMenuType = selected.hasOwnProperty(menuType)?selected[menuType]:false;\r\n    if(selMenuType){      \r\n      const items = initial.itemList.filter((i)=>(selMenuType.hasOwnProperty(i.id)));\r\n      if(items!==null&&items!==undefined){\r\n        const selItem = items.map((i)=>{\r\n          const id = i.id;\r\n          const sel = selMenuType[id];\r\n          const q = sel.hasOwnProperty('qty')?sel.qty:'2';\r\n          const h = sel.hasOwnProperty('half')?sel.half:'2';\r\n          return {id:id, qty:q, half:h};\r\n        });      \r\n        selItem.forEach(e => {\r\n          const val = {qty:e.qty, half:e.half};\r\n          ret[e.id]=val;\r\n        });        \r\n      }     \r\n    }\r\n  } \r\n  return ret;\r\n}\r\nexport default function ToppingStep(props){\r\n  const classes = useStyles();    \r\n  const updateItem = props.updateItem;\r\n  const stepData = props.stepData;\r\n  const type = stepData.menuType;\r\n  const itemTypeCaption = stepData.caption;  \r\n  \r\n  const [items, setItems] = React.useState('0');  \r\n  const [initialized, setInitialzied] = React.useState(false);\r\n  const initialSelect = (p)=>{\r\n    return initializeSelection(p)\r\n  }\r\n  if(!initialized){\r\n    const ini = initialSelect({selected:props.selected,menuType:type, itemList:stepData.content.values})\r\n    setItems(ini);    \r\n    setInitialzied(true)\r\n  }\r\n  const handleMenuSelect = (input)=>{\r\n    const chk = (p)=>{\r\n      const id = p.itemID;\r\n      const type = p.type;\r\n      const val = p.value;\r\n      const hasItem =items.hasOwnProperty(id);      \r\n      const itemVal = {qty:'0', half:'0'};      \r\n      const ret = {itemID:'0', values:itemVal};      \r\n      if(hasItem){\r\n        const e = items[id];\r\n        itemVal.qty=e.qty;\r\n        itemVal.half = e.half;\r\n      }\r\n      if(type==='qty'&&itemVal.qty!==val){        \r\n        itemVal.qty = val;\r\n        items[id] =itemVal\r\n        ret.itemID = id;\r\n        ret.values= itemVal;\r\n        setItems(items);\r\n        return ret;\r\n      } else if(type==='half'&&itemVal.half!==val){\r\n        itemVal.half = val;\r\n        items[id] =itemVal\r\n        ret.itemID = id;\r\n        ret.values= itemVal;\r\n        setItems(items);        \r\n        return ret;\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    const doUpdate = chk(input);\r\n    if(doUpdate){      \r\n      updateItem({item:doUpdate,replace:true})\r\n    }\r\n  }\r\n  if(!initialized){return false}\r\n  const maxQty =stepData.content.qty.length;\r\n  const itemRows = stepData.content.values.map((i)=>{\r\n    const id = i.id;\r\n    const name = i.caption;\r\n    const des = i.description;    \r\n    const hasItem =items!==null&&items!==undefined?items.hasOwnProperty(id):false;\r\n    const selItem = hasItem?items[id]:{qty:0,half:2};\r\n    const q = selItem.hasOwnProperty('qty')?selItem.qty:'2';\r\n    const h = selItem.hasOwnProperty('half')?selItem.half:'2';\r\n    const qVal = stepData.content.qty?stepData.content.qty.filter((i)=>(i.id===q))[0]:false;\r\n    const hVal = stepData.content.half?stepData.content.half.filter((i)=>(i.id===h))[0]:false;\r\n    const sel = {maxQty:maxQty, qty:parseInt(q), half:parseInt(h)};\r\n    const description = {name:name, qty:(qVal?qVal.caption:''),half:(hVal?hVal.caption:'')};\r\n    const captions = {qty:(qVal?qVal.description:''),half:(hVal?hVal.description:'')};\r\n\r\n    return(\r\n      <Grid container item spacing={1} direction=\"row\" justify=\"flex-start\" alignItems=\"center\">\r\n        <Grid item>\r\n          <Paper className={classes.paper}>\r\n            <StaticTitle rowTitle={name} description={des}/>\r\n          </Paper>\r\n        </Grid>         \r\n        <Grid item>\r\n          <Paper className={classes.paper}>\r\n            <StaticRowElement \r\n              typeCaption={itemTypeCaption} itemID={id} sel={sel} description={description} captions={captions} \r\n              hasHalf={false} hasQty={true} handleMenuSelect={(p)=>{handleMenuSelect(p)}}/>\r\n          </Paper> \r\n        </Grid> \r\n      </Grid>\r\n    )\r\n  }); \r\n  if(!initialized){return false}\r\n  return(   \r\n    <div className={classes.root}>\r\n      <Grid container spacing={1}>\r\n        {itemRows}   \r\n      </Grid>      \r\n    </div>             \r\n  )\r\n}","import React from 'react';\r\nimport {NavButton} from '../Buttons/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {PizzaType, Sauce, Topping} from './MenuSteps/index';\r\n\r\nconst DisplayComponents = {\r\n  type:PizzaType,\r\n  sauces:Sauce,\r\n  topping:Topping,\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction checkAlert(props){\r\n  //check that a crust and size have been selected\r\n  const incItem = props.item;    \r\n  const i = incItem!==null&&incItem!==undefined&&incItem.hasOwnProperty('1')?incItem['1']:{crusts:'0',sizes:'0'};\r\n  const item = i!==null?i:{crusts:'0',sizes:'0'};\r\n  const c = item.hasOwnProperty('crusts')?item.crusts!=='0':false;\r\n  const s = item.hasOwnProperty('sizes')?item.sizes!=='0':false;\r\n  if(!(c&&s)){\r\n    const msgTitle = 'Alert'\r\n    const msg = 'You must select a valid crust type and size before continuing.'\r\n    const status = true;\r\n    const val ={status:status,title:msgTitle,msg:msg};\r\n    props.updateAppState({type:'alert', values:{appValues:{val}}});\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\nexport default function MenuStep(props){     \r\n  const classes = useStyles();\r\n  const updateAppState = props.updateAppState;\r\n  const triggerNext = props.triggerNext;\r\n  const botData = props.botStepData;\r\n  const menu = botData.menu;\r\n  const pizza = botData.pizza;\r\n  const stepData = menu.StepObject;\r\n  const menuType = stepData.menuType;\r\n  const selected = pizza.GetPizzaItems(menuType);\r\n  const [items, setItems] = React.useState(selected);\r\n  const updateItem = (props) =>{    \r\n    const item = props.item;\r\n    const itemID = item.itemID;\r\n    const values = item.values;    \r\n    const replace = props.replace;\r\n    if(replace){\r\n      const update = {};\r\n      update[itemID]=values;\r\n      setItems(update);\r\n    } else {\r\n      const current = items;            \r\n      current[item.itemID]=values;\r\n      setItems(current);\r\n    }       \r\n  }\r\n  const triggerRet = (props)=>{\r\n    //const nextTrigger = menu.GetStepTrigger(props.action);\r\n    \r\n    const updateData={\r\n      type:props.type,\r\n      values:{\r\n      appValues:{\r\n        step:props.action,\r\n        pizza:props.pizza,\r\n        botDisplay:props.botDisplay,\r\n      },      \r\n      stepValues:{\r\n        isSpecialStep:false,\r\n        botStepKey:stepData.menuType,\r\n        botStepMsg:stepData.botMsg,\r\n        userMsg: props.userMsg,\r\n        preserveMsg: true,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };\r\n    if(props.action==='specialinstmsg'){\r\n      updateData.type = 'inst'\r\n      updateData.values.appValues.botDisplay = 'reviewPizza';\r\n      updateData.values.stepValues.trigger = props.action;      \r\n    } else if(props.action==='2'){\r\n      updateData.type = 'newOrder';\r\n      updateData.values.appValues.step='new';\r\n      updateData.values.appValues.botDisplay ='menuStep'\r\n      updateData.values.stepValues.trigger = props.action;\r\n    }\r\n    updateAppState(updateData);\r\n    triggerNext(updateData.values.stepValues);\r\n  }\r\n  const handleNext = ()=>{     \r\n    const c = menuType==='type'?checkAlert({item:items, updateAppState:updateAppState}):true;      \r\n    if(c){\r\n      const ret = {type:stepData.menuType, items:items};\r\n      const userMsg = menu.GetUserMsg(ret);     \r\n      ret.userMsg = userMsg;\r\n      pizza.PizzaItems = ret;\r\n      const stepID = menu.getStepNum('next');\r\n      const stepName = menu.getStep(stepID);\r\n      triggerRet({type:'update', botDisplay:'menuStep', action:stepName, userMsg:userMsg, pizza:pizza}) \r\n    }    \r\n  }\r\n  const handlePrev = ()=>{    \r\n    const userMsg = `Go back`;\r\n    const stepID = menu.getStepNum('prev');\r\n    const stepName = menu.getStep(stepID);\r\n    triggerRet({type:'update', botDisplay:'menuStep', action:stepName, userMsg:userMsg, pizza:pizza})\r\n  }\r\n  const handleRemove = ()=>{    \r\n    const userMsg = 'Remove this pizza';\r\n    triggerRet({type:'update', botDisplay:'remove', action:'ask', userMsg:userMsg, pizza:pizza})\r\n  }\r\n  const handleCancel = ()=>{    \r\n    const userMsg = 'Cancel this order';\r\n    triggerRet({type:'update', botDisplay:'cancel', action:'ask', userMsg:userMsg, pizza:pizza})\r\n  }\r\n  const displayType = (t)=>{\r\n    switch(t){\r\n      case 'type':        \r\n      case 'sauces':\r\n        return t;\r\n      default:\r\n        return 'topping';\r\n    }\r\n  }  \r\n  const StepDisplay = DisplayComponents[displayType(menuType)];\r\n  return(\r\n    <div className={classes.root}>\r\n\r\n      <div className=\"stepMessage\">{stepData.botMsg}</div>\r\n      <StepDisplay selected={selected} stepData={stepData} updateItem={(p)=>{return (updateItem(p))}}/>\r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <NavButton caption='Back' onClick={handlePrev}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Remove Pizza' onClick={handleRemove}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Cancel Order' onClick={handleCancel}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Next' onClick={handleNext}/>\r\n        </Grid>\r\n      </Grid>\r\n    </div>      \r\n  )\r\n}\r\n","import React from 'react';\r\nimport {NavButton} from '../Buttons/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function CancelStep(props){\r\n  const classes = useStyles();\r\n  const updateAppState = props.updateAppState;\r\n  const triggerNext = props.triggerNext;\r\n  const triggerRet = (props)=>{    \r\n    const updateData={\r\n      type:props.type,\r\n      values:{\r\n      appValues:{\r\n        step:props.action,        \r\n        botDisplay:props.botDisplay,\r\n      },      \r\n      stepValues:{\r\n        isSpecialStep:false,\r\n        botStepKey:'cancel',\r\n        botStepMsg:'Do you really want to cancel this order?',\r\n        userMsg: props.userMsg,\r\n        preserveMsg: true,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };\r\n    if(props.action==='endmsg1'){\r\n      updateData.values.stepValues.trigger = props.action;      \r\n    }\r\n    updateAppState(updateData);\r\n    triggerNext(updateData.values.stepValues);\r\n  }\r\n  const handlePrev = () => {\r\n    const userMsg = 'No, go back';\r\n    triggerRet({type:'special', botDisplay:'cancel', action:'no', userMsg:userMsg})\r\n  }\r\n  const handleNext = (p)=>{    \r\n    const userMsg = `Yes, and ${p==='main'?'go to the main page':'start a new order'}`;\r\n    triggerRet({type:'special', botDisplay:'cancel', action:p, userMsg:userMsg})         \r\n  }\r\n  return(\r\n    <div className={classes.root}>\r\n      <div className=\"stepMessage\">{`Do you really want to cancel this order?`}</div>     \r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <NavButton caption='No' onClick={handlePrev}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Yes, and start a new order' onClick={()=>{handleNext('restart')}}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Yes, and go to the main page' onClick={()=>{handleNext('main')}}/>\r\n        </Grid>   \r\n      </Grid>\r\n    </div>      \r\n  )\r\n}","import React from 'react';\r\nimport {NavButton} from '../Buttons/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {PizzaType, Sauce, Topping} from './MenuSteps/index';\r\n\r\nconst DisplayComponents = {\r\n  type:PizzaType,\r\n  sauces:Sauce,\r\n  topping:Topping,\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\nfunction checkAlert(props){\r\n  //check that a crust and size have been selected\r\n  const incItem = props.item;    \r\n  const i = incItem!==null&&incItem!==undefined&&incItem.hasOwnProperty('1')?incItem['1']:{crusts:'0',sizes:'0'};\r\n  const item = i!==null?i:{crusts:'0',sizes:'0'};\r\n  const c = item.hasOwnProperty('crusts')?item.crusts!=='0':false;\r\n  const s = item.hasOwnProperty('sizes')?item.sizes!=='0':false;\r\n  if(!(c&&s)){\r\n    const msgTitle = 'Alert'\r\n    const msg = 'You must select a valid crust type and size before continuing.'\r\n    const status = true;\r\n    const val ={status:status,title:msgTitle,msg:msg};\r\n    props.updateAppState({type:'alert', values:{appValues:{val}}});\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\nexport default function EditItemStep(props){     \r\n  const classes = useStyles();\r\n  const updateAppState = props.updateAppState;\r\n  const triggerNext = props.triggerNext;\r\n  const botData = props.botStepData;\r\n  const menu = botData.menu;\r\n  const pizza = botData.pizza;\r\n  const stepData = menu.StepObject;\r\n  const menuType = stepData.menuType;\r\n  const selected = pizza.GetPizzaItems(menuType);\r\n  const [items, setItems] = React.useState(selected);\r\n  const updateItem = (props) =>{    \r\n    const item = props.item;\r\n    const itemID = item.itemID;\r\n    const values = item.values;    \r\n    const replace = props.replace;\r\n    if(replace){\r\n      const update = {};\r\n      update[itemID]=values;\r\n      setItems(update);\r\n    } else {\r\n      const current = items;            \r\n      current[item.itemID]=values;\r\n      setItems(current);\r\n    }       \r\n  }\r\n  const triggerRet = (props)=>{\r\n    //const nextTrigger = menu.GetStepTrigger(props.action);\r\n    \r\n    const updateData={\r\n      type:props.type,\r\n      values:{\r\n      appValues:{\r\n        step:props.action,\r\n        pizza:props.pizza,\r\n        botDisplay:props.botDisplay,\r\n      },      \r\n      stepValues:{\r\n        isSpecialStep:false,\r\n        botStepKey:stepData.menuType,\r\n        botStepMsg:stepData.botMsg,\r\n        userMsg: props.userMsg,\r\n        preserveMsg: true,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };\r\n    \r\n    updateAppState(updateData);\r\n    triggerNext(updateData.values.stepValues);\r\n  }\r\n  const handleNext = ()=>{     \r\n    const c = menuType==='type'?checkAlert({item:items, updateAppState:updateAppState}):true;      \r\n    if(c){\r\n      const ret = {type:stepData.menuType, items:items};\r\n      const userMsg = menu.GetUserMsg(ret);     \r\n      ret.userMsg = userMsg;\r\n      pizza.PizzaItems = ret;\r\n      triggerRet({type:'update', botDisplay:'reviewPizza', action:'reviewPizza', userMsg:userMsg, pizza:pizza}) \r\n    }    \r\n  }\r\n  const handlePrev = ()=>{    \r\n    const userMsg = `Done with edits`;\r\n    triggerRet({type:'update', botDisplay:'reviewPizza', action:'reviewPizza', userMsg:userMsg, pizza:pizza})\r\n  }  \r\n  const displayType = (t)=>{\r\n    switch(t){\r\n      case 'type':        \r\n      case 'sauces':\r\n        return t;\r\n      default:\r\n        return 'topping';\r\n    }\r\n  }  \r\n  const StepDisplay = DisplayComponents[displayType(menuType)];\r\n  return(\r\n    <div className={classes.root}>\r\n\r\n      <div className=\"stepMessage\">{stepData.botMsg}</div>\r\n      <StepDisplay selected={selected} stepData={stepData} updateItem={(p)=>{return (updateItem(p))}}/>\r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <NavButton caption='Discard changes' onClick={handlePrev}/>\r\n        </Grid>        \r\n        <Grid item>\r\n          <NavButton caption='Save Changes' onClick={handleNext}/>\r\n        </Grid>\r\n      </Grid>\r\n    </div>      \r\n  )\r\n}\r\n","import React from 'react';\r\nimport {NavButton} from '../Buttons/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function RemoveStep(props){\r\n  const classes = useStyles();\r\n  const updateAppState = props.updateAppState;\r\n  const triggerNext = props.triggerNext;\r\n  const triggerRet = (props)=>{    \r\n    const updateData={\r\n      type:props.type,\r\n      values:{\r\n      appValues:{\r\n        step:props.action,        \r\n        botDisplay:props.botDisplay,\r\n      },      \r\n      stepValues:{\r\n        isSpecialStep:false,\r\n        botStepKey:'remove',\r\n        botStepMsg:'Do you really want to remove this pizza?',\r\n        userMsg: props.userMsg,\r\n        preserveMsg: true,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };\r\n    if(props.action==='endmsg1'){\r\n      updateData.values.stepValues.trigger = props.action;      \r\n    }\r\n    updateAppState(updateData);\r\n    triggerNext(updateData.values.stepValues);\r\n  }\r\n  const handlePrev = () => {\r\n    const userMsg = 'No, go back';\r\n    triggerRet({type:'special', botDisplay:'remove', action:'no', userMsg:userMsg})\r\n  }\r\n  const handleNext = (p)=>{    \r\n    const userMsg = `${p==='new'?'Start this pizza over':'Yes, remove this pizza'}`;\r\n    triggerRet({type:'special', botDisplay:'remove', action:p, userMsg:userMsg})         \r\n  }\r\n  return(\r\n    <div className={classes.root}>\r\n      <div className=\"stepMessage\">{`Do you really want to remove this pizza?`}</div>     \r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <NavButton caption='No' onClick={handlePrev}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Start this pizza over' onClick={()=>{handleNext('new')}}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Yes, remove this pizza' onClick={()=>{handleNext('')}}/>\r\n        </Grid>   \r\n      </Grid>\r\n    </div>      \r\n  )\r\n}","import React from 'react';\r\nimport {NavButton} from '../Buttons/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {MultiTableDisplay} from '../Elements/index';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function ReviewOrderStep(props){\r\n  //allow users to click on item they need to edit directly\r\n  const classes = useStyles();\r\n  const updateAppState = props.updateAppState;\r\n  const triggerNext = props.triggerNext;\r\n  const botData = props.botStepData;\r\n  const menu = botData.menu;\r\n  const order = botData.pizza;\r\n\r\n  const [selected, setSelected] = React.useState(0);\r\n  const handleSelect = (item)=>{\r\n    setSelected(item);\r\n  }\r\n  const triggerRet = (props)=>{    \r\n    const updateData={\r\n      type:props.type,\r\n      values:{\r\n      appValues:{\r\n        step:props.action,\r\n        id:props.editID,\r\n        botDisplay:props.botDisplay,\r\n      },      \r\n      stepValues:{\r\n        isSpecialStep:false,\r\n        botStepKey:'review',\r\n        botStepMsg:'Thank you for reviewing the pizza',\r\n        userMsg: props.userMsg,\r\n        preserveMsg: true,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };\r\n    if(props.action==='endmsg1'){\r\n      updateData.values.stepValues.trigger = props.action;      \r\n    }\r\n    updateAppState(updateData);\r\n    triggerNext(updateData.values.stepValues);\r\n  }\r\n  const addNew = () => {\r\n    const userMsg = 'Add another pizza to the order';\r\n    triggerRet({type:'add', botDisplay:'', action:'', editID:0, userMsg:userMsg})\r\n  }\r\n  const handleNext = ()=>{    \r\n    const userMsg = 'Complete this order';\r\n    triggerRet({type:'', botDisplay:'', action:'endmsg1', editID:0, userMsg:userMsg}) \r\n        \r\n  }\r\n  const handleEdit = ()=>{    \r\n    const userMsg = `Edit pizza ${selected}`;\r\n    triggerRet({type:'setpizza', botDisplay:'NonMenuStep', action:'', userMsg:userMsg, editID:selected})\r\n  }\r\n  const handleRemove = ()=>{    \r\n    const userMsg = `Remove pizza ${selected}`;\r\n    triggerRet({type:'update', botDisplay:'remove', action:'ask', userMsg:userMsg, editID:selected})\r\n  }\r\n  const handleCancel = ()=>{    \r\n    const userMsg = 'Cancel this order';\r\n    triggerRet({type:'update', botDisplay:'cancel', action:'ask', userMsg:userMsg, editID:0,})\r\n  }   \r\n  const editIsDisabled = selected===0;\r\n  const editCapt = editIsDisabled?'Edit':`Edit ${selected}`\r\n  const remCapt =editIsDisabled?'Remove':`Remove ${selected}`\r\n  return(\r\n    <div className={classes.root}>\r\n\r\n      <div className=\"stepMessage\">{`${botData.order.ordername}, Please review your order and then select an option below`}</div>\r\n      <MultiTableDisplay order={order} menu={menu} handleSelect={(p)=>{return (handleSelect(p))}}/>\r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <NavButton caption={editCapt} isDisabled={editIsDisabled} onClick={handleEdit}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption={remCapt} isDisabled={editIsDisabled} onClick={handleRemove}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Cancel Order' onClick={handleCancel}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Add a Pizza' onClick={addNew}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Next' onClick={handleNext}/>\r\n        </Grid>\r\n      </Grid>\r\n    </div>      \r\n  )\r\n}","import React from 'react';\r\nimport {NavButton} from '../Buttons/index';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {SingleTableDisplay} from '../Elements/index';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: '75%',\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function ReviewPizzaStep(props){\r\n  //allow users to click on item they need to edit directly\r\n  const classes = useStyles();\r\n  const updateAppState = props.updateAppState;\r\n  const triggerNext = props.triggerNext;\r\n  const botData = props.botStepData;\r\n  const menu = botData.menu;\r\n  const pizza = botData.pizza;\r\n\r\n  const [selected, setSelected] = React.useState(0);\r\n  const handleSelect = (item)=>{\r\n    setSelected(item);\r\n  }\r\n  const triggerRet = (props)=>{    \r\n    const updateData={\r\n      type:props.type,\r\n      values:{\r\n      appValues:{\r\n        step:props.action,\r\n        pizza:props.pizza,\r\n        botDisplay:props.botDisplay,\r\n      },      \r\n      stepValues:{\r\n        isSpecialStep:false,\r\n        botStepKey:'review',\r\n        botStepMsg:'Thank you for reviewing the pizza',\r\n        userMsg: props.userMsg,\r\n        preserveMsg: true,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };\r\n    if(props.action==='specialinstmsg'){\r\n      updateData.type = 'inst'\r\n      updateData.values.appValues.botDisplay = 'reviewPizza';\r\n      updateData.values.stepValues.trigger = props.action;      \r\n    }\r\n    updateAppState(updateData);\r\n    triggerNext(updateData.values.stepValues);\r\n  }\r\n  const addNew = () => {\r\n    const userMsg = 'Add another pizza to the order';\r\n    triggerRet({type:'add', botDisplay:'', action:'', pizza:pizza, userMsg:userMsg})\r\n  }\r\n  const handleNext = ()=>{    \r\n    const userMsg = 'Go to final review';\r\n    triggerRet({type:'review', botDisplay:'reviewOrder', action:'', userMsg:userMsg, pizza:pizza})         \r\n  }\r\n  const handleEdit = ()=>{    \r\n    const userMsg = `Edit ${selected}`;\r\n    triggerRet({type:'edit', botDisplay:'menuStep', action:selected, userMsg:userMsg, pizza:pizza})\r\n  }\r\n  const handleRemove = ()=>{    \r\n    const userMsg = 'Remove this pizza';\r\n    triggerRet({type:'update', botDisplay:'remove', action:'ask', userMsg:userMsg, pizza:pizza})\r\n  }\r\n  const handleCancel = ()=>{    \r\n    const userMsg = 'Cancel this order';\r\n    triggerRet({type:'update', botDisplay:'cancel', action:'ask', userMsg:userMsg, pizza:pizza})\r\n  }   \r\n  const editIsDisabled = selected===0;\r\n  const editCapt = editIsDisabled?'Edit':`Edit ${selected}`\r\n  return(\r\n    <div className={classes.root}>\r\n\r\n      <div className=\"stepMessage\">{`${botData.order.ordername}, Please review this pizza and then select an option below`}</div>\r\n      <SingleTableDisplay pizza={pizza} menu={menu} handleSelect={(p)=>{return (handleSelect(p))}}/>\r\n      <Grid container spacing={1}>\r\n        <Grid item>\r\n          <NavButton caption={editCapt} isDisabled={editIsDisabled} onClick={handleEdit}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Remove Pizza' onClick={handleRemove}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Cancel Order' onClick={handleCancel}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Add a Pizza' onClick={addNew}/>\r\n        </Grid>\r\n        <Grid item>\r\n          <NavButton caption='Next' onClick={handleNext}/>\r\n        </Grid>\r\n      </Grid>\r\n    </div>      \r\n  )\r\n}","import React from 'react'\r\nimport {MenuStep, CancelStep, EditItemStep, RemoveStep, ReviewOrderStep, ReviewPizzaStep, NewOrderStep, ChangeName, SpecialInstructions} from '../AppElements/Steps/index';\r\n\r\nconst StepComponents ={\r\n  menuStep:MenuStep,\r\n  cancel:CancelStep,\r\n  editItem:EditItemStep,\r\n  remove:RemoveStep, \r\n  reviewOrder:ReviewOrderStep, \r\n  reviewPizza:ReviewPizzaStep, \r\n  newOrder:NewOrderStep, \r\n  changeName:ChangeName, \r\n  specialInstructions:SpecialInstructions\r\n}\r\nexport default class BotStep extends React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {botStepData:null, trigger:false};\r\n    this.onTrigger = this.onTrigger.bind(this);       \r\n  }\r\n  componentDidMount(){\r\n    if(this.state.botStepData===null&&!this.state.trigger){\r\n      const data = this.props.getBotState();\r\n      this.setState({botStepData:data})\r\n    }\r\n  }  \r\n  shouldComponentUpdate(nextProps,nextState){\r\n    if(this.state.trigger||nextState.trigger){\r\n      return false\r\n    }    \r\n    return true;   \r\n  } \r\n  onTrigger(props){    \r\n    const bot = `${props.botStepKey}=>(id=${this.props.step.key.substring(0,5)})`;\r\n    const genericStep = this.props.steps.pizzabuilder;\r\n    this.props.step.id = bot;\r\n    genericStep.id = bot;    \r\n    this.props.steps[bot] = genericStep;\r\n    this.props.step.trigger = props.trigger;    \r\n    this.setState({trigger: true}, () => {\r\n      this.props.triggerNextStep(props);\r\n    });\r\n  }\r\n  render(){\r\n    if(this.state.botStepData===null||this.state.botStepData===undefined){return null}    \r\n    const {step, steps, previousStep, ...passThroughProps} = this.props\r\n    const prevStepValue = previousStep.hasOwnProperty('value')?previousStep.value:false;\r\n    const prevStepID = previousStep.id;\r\n    const botStepData = this.state.botStepData;\r\n    botStepData.prevStepValue=prevStepValue;\r\n    botStepData.prevStepID=prevStepID;\r\n    const StepComponent = StepComponents[botStepData.botDisplay];       \r\n    return <StepComponent botStepData={botStepData} triggerNext={(p)=>this.onTrigger(p)} {...passThroughProps}/>\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport class NewOrderStep extends React.Component{  \r\n  constructor(props){\r\n    super(props)\r\n    this.state={data:null, trigger:false};    \r\n  }\r\n  componentDidMount(){    \r\n    const updateData={\r\n      type:'start',\r\n      values:{\r\n      appValues:{\r\n        name:this.props.botStepData.prevStepValue,\r\n        step:'new'},     \r\n      stepValues:{\r\n        isSpecialStep:true,\r\n        botStepKey:'neworder',\r\n        botStepMsg:`Thank you, ${this.props.botStepData.prevStepValue}, Let's create our first pizza for this order.`,\r\n        userMsg: null,\r\n        preserveMsg: false,\r\n        trigger:'pizzabuilder',\r\n      }}\r\n    };        \r\n    this.setState({data:updateData.values.stepValues}, ()=>{this.props.updateAppState(updateData)});        \r\n  }\r\n  componentDidUpdate(prevProps,prevState){\r\n    if(this.state.data!==null){\r\n      this.setState({trigger:!prevState.trigger}, ()=>this.props.triggerNext(this.state.data))\r\n    }          \r\n  }\r\n  shouldComponentUpdate(nextProps,nextState){\r\n    if(nextState.trigger||this.state.trigger){\r\n      return false;\r\n    } else {\r\n      return true;  \r\n    }      \r\n  }    \r\n  render(){\r\n    //const msg = `Thank you, ${this.props.prevStepValue}, Let's create our first pizza for this order.`;    \r\n    return <div>{''}</div>;\r\n  } \r\n}\r\nexport function SpecialInstructions(props){\r\n  const inst = props.prevStepID==='specialinstentry'?props.prevStepValue:''; \r\n  const retVal = {\r\n    type:'inst',\r\n    values:inst,\r\n    data:{\r\n      botStepKey:'reviewPizza',\r\n      botStepMsg:`Okay, Let's review your pizza.`,\r\n      usermsg: null,\r\n      isuser: false,\r\n      trigger:'pizzabuilder',\r\n    } \r\n  }\r\n  props.onTrigger(retVal);\r\n  return null;\r\n}\r\nexport function ChangeName(props){\r\n  const name = props.prevStepValue; \r\n  const retVal = {\r\n    type:'name',\r\n    values:name,\r\n    data:{\r\n      botStepKey:'reviewOrder',\r\n      botStepMsg:`Thank you, ${name}, I've updated the name for this order.`,\r\n      usermsg: null,\r\n      isuser: false,\r\n      trigger:'pizzabuilder',\r\n    } \r\n  }\r\n  props.onTrigger(retVal);\r\n  return null;\r\n}","import React from 'react';\r\nimport ChatBot from '../chatbot/ChatBot';\r\nimport { ThemeProvider } from 'styled-components';\r\nimport BotStep from './BotStep';\r\nimport logo from '../../resources/SliceLogo.png';\r\nimport '../../css/OrderStyle.css';\r\n\r\nexport default class SliceBot extends React.Component{\r\n  constructor(props){\r\n    super(props)    \r\n    this.handleEnd = this.handleEnd.bind(this);\r\n  }\r\n  handleEnd(){\r\n    //load order summary page    \r\n    this.props.completeOrder();\r\n  }        \r\n  render(){\r\n    const {showBot, ...passThroughProps} = this.props           \r\n    if(!showBot){return (null)}        \r\n    return (   \r\n      <div className=\"chatBot\" >\r\n        <ThemeProvider theme={{\r\n              background: '#f5f5f5',\r\n              fontFamily: 'Montserrat',\r\n              headerBgColor: '#DD841F',\r\n              headerFontColor: '#fff',\r\n              headerFontSize: '15px',\r\n              botBubbleColor: '#DD841F',\r\n              botFontColor: '#fff',\r\n              userBubbleColor: '#fff',\r\n              userFontColor: '#4a4a4a',\r\n              marginTop: '60px',\r\n          }}>\r\n      <ChatBot headerTitle=\"Slice Bot\"\r\n        handleEnd = {this.handleEnd}\r\n        floating={false}\r\n        botAvatar={logo}                \r\n        steps={[\r\n          {\r\n            id: '1',\r\n            message: 'Welcome to Slice!',            \r\n            trigger: '2',\r\n                       \r\n          },\r\n          {\r\n            id: '2',\r\n            message: 'Please enter a name for the order',\r\n            trigger: 'ordername',\r\n                        \r\n          },\r\n          {\r\n            id: 'ordername',\r\n            user:true,\r\n            placeholder: 'Please enter a name...',\r\n            trigger: 'pizzabuilder',\r\n               \r\n          },\r\n          {\r\n            id: 'pizzabuilder',\r\n            placeholder: 'Choose an option',\r\n            component: <BotStep {...passThroughProps} />,              \r\n            waitAction: true, \r\n            replace: true,                        \r\n            trigger: 'pizzabuilder',\r\n                       \r\n          },\r\n          {\r\n            id:'specialinstmsg',\r\n            message:'Would you like to add any special instructions?',\r\n            trigger: 'specialinstques',\r\n            \r\n          },\r\n          {\r\n            id:'specialinstques',\r\n            options: [\r\n              {value: 'yes', label:'Yes', trigger:'specialinstentry'},\r\n              {value: 'no', label:'No, Lets review this pizza', trigger:'pizzabuilder'},\r\n              ],\r\n            \r\n          },\r\n          {\r\n            id:'specialinstentry',\r\n            user:true,\r\n            trigger: 'pizzabuilder',\r\n           \r\n          },\r\n          {\r\n            id: 'endmsg1',         \r\n            message: 'Thank you for using Slice!',\r\n            trigger: 'endmsg2',            \r\n          },\r\n          {\r\n            id: 'endmsg2',         \r\n            message: 'Your order is confirmed. Please click OK to continue.',\r\n            trigger: 'endmsg3',            \r\n          },\r\n          {\r\n            id: 'endmsg3',         \r\n            options: [{value: 'endbot', label:'OK', trigger:'endbot'}],                        \r\n          },\r\n          {\r\n            id: 'endbot',         \r\n            message: 'Good bye',\r\n            end: true,            \r\n          },\r\n          ]}\r\n\r\n        />\r\n          </ThemeProvider>\r\n      </div>   \r\n    );   \r\n  }\r\n}\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function BotAlertMsg(props) {\r\n  const [open, setOpen] = React.useState(props.values.status); \r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    props.onClose({type:'alert', values:false})\r\n  };\r\n  \r\n  return (\r\n    <div>      \r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">{props.values.title}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText id=\"alert-dialog-description\">\r\n            {props.values.msg}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions>          \r\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n            Got it!\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","//constants\r\nconst SETNAME = 'name';\r\nconst STARTORDER = 'start'\r\nconst UPDATEPIZZA = 'update';\r\nconst SPECIALACT = 'special';\r\nconst SETALERT = 'alert';\r\nconst UPDATELOC = 'location';\r\nconst RESET = 'reset';\r\nconst EDITITEM = 'edit';\r\nconst REVIEW = 'review';\r\nconst SETINST = 'inst';\r\nconst ADDNEW = 'add';\r\nconst SETPIZZA = 'setpizza';\r\n//function\r\nexport const reducer = action => (state,props) =>{  \r\n  const values = action.values.appValues;  \r\n  const o=state.order;\r\n  const m=state.menu;\r\n  const d=state.display;\r\n  const p=state.currentPizza;\r\n  const l=state.locObj;\r\n  const a=state.alert;\r\n  const botDisp = (values!==undefined&&values!==null&&values.hasOwnProperty('botDisplay'))?values.botDisplay:false;\r\n  const step = (values!==undefined&&values!==null&&values.hasOwnProperty('step'))?values.step:false;\r\n  const ret ={o:o,m:m,d:d,p:p,l:l,a:a,};\r\n  switch (action.type){    \r\n    case SETPIZZA:\r\n      ret.p = o.GetPizzaByID(values.id);\r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='reviewPizza';\r\n      break;           \r\n    case ADDNEW:\r\n      const updateProps = {item:'savePizza', pizza:p};\r\n      if(p!==null){\r\n        const newO = o;\r\n        newO.UpdateOrder(updateProps);\r\n        ret.o = newO;\r\n      }\r\n      ret.m.step='new';\r\n      ret.d.page = 'Menu';\r\n      ret.d.bot = true;\r\n      ret.d.botDisplay = 'menuStep';\r\n      break;   \r\n    case EDITITEM:\r\n      ret.m.step = values.step;\r\n      ret.d.page='Menu';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='editItem';\r\n      break;\r\n    case REVIEW:        \r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay=botDisp;      \r\n      if(p!==null&&botDisp==='reviewOrder'){\r\n        const updateProps = {item:'savePizza', pizza:p};\r\n        const newO = o;\r\n        newO.UpdateOrder(updateProps);\r\n        ret.o = newO;\r\n      }\r\n      break;\r\n    case SETINST:\r\n      ret.p.SpecialInstructions = values.inst;\r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='reviewPizza';\r\n      break;      \r\n    case STARTORDER:      \r\n      ret.m.step = values.step;\r\n      ret.o.ordername = values.name;      \r\n      ret.d.page = 'Menu';\r\n      ret.d.bot = true;\r\n      ret.d.botDisplay = 'menuStep'      \r\n      break; \r\n    case UPDATEPIZZA:      \r\n      ret.d.botDisplay = values.botDisplay;\r\n      if(botDisp==='menuStep'||botDisp==='editItem'){\r\n        ret.m.step = step;\r\n      } else if(step==='ask'){\r\n        if(values.hasOwnProperty('id')){\r\n          ret.p = o.GetPizzaByID(values.id);\r\n        }\r\n        ret.d.prevDisplay = d;\r\n      }           \r\n      break;\r\n    case SETNAME:\r\n      //change name from reviewOrder menu\r\n      ret.o.ordername = values.name;\r\n      ret.d.page='NonMenuStep';\r\n      ret.d.bot=true;\r\n      ret.d.botDisplay='reviewOrder';\r\n      break;       \r\n    case SETALERT:\r\n      ret.a = values;\r\n      break;      \r\n    case UPDATELOC:      \r\n      const type = values.type;\r\n      const display = {page:'Location', bot:false, botDisplay:false};\r\n      const hasPrev = state.display.hasOwnProperty('prevBot');\r\n      const prev = hasPrev?state.display.prevBot:false;      \r\n      let loc = null;\r\n      if(type==='change'){\r\n        loc = state.locObj;\r\n        loc.ChangeLoc();\r\n        display.prevBot = prev;                        \r\n      } else {\r\n        loc = values.locObj;\r\n        const chk = loc.searchStep==='done';        \r\n        if(chk){\r\n          display.page='Main';\r\n          display.bot = true\r\n          display.botDisplay=state.order.ordername?prev:'newOrder';          \r\n        }\r\n        if(!prev||chk){\r\n          delete display.prevBot;\r\n        } else {\r\n          display.prevBot = prev;\r\n        }\r\n      }\r\n      ret.d = display;\r\n      ret.l = loc;\r\n      break;    \r\n    case RESET:\r\n      ret.o=o.NewOrder;\r\n      ret.m=(m.step='new');\r\n      ret.d={page:'Location', bot:false, botDisplay:false};\r\n      ret.p=p.NewPizza;\r\n      ret.l=props.locObj;\r\n      ret.a=false;\r\n      break;\r\n    case SPECIALACT:\r\n      //handle remove/cancel/complete\r\n      if (step==='no'){\r\n        ret.d.page = d.prevDisplay.page;\r\n        ret.d.bot =d.prevDisplay.bot;\r\n        ret.d.botDisplay = d.prevDisplay.botDisplay;\r\n        delete ret.d.prevDisplay;\r\n      } else {\r\n        if(botDisp==='remove'){\r\n          const updateProps = {item:'removePizza', pizza:p};        \r\n          const newO = o;\r\n          newO.UpdateOrder(updateProps);\r\n          ret.o = newO;\r\n          if(values.step==='new'){\r\n            ret.d.botDisplay = 'addNew';            \r\n          } else {\r\n            ret.d.page='NonMenuStep';\r\n            ret.d.bot=true;\r\n            ret.d.botDisplay='reviewOrder';\r\n          }\r\n        } else if(botDisp==='cancel'){\r\n          ret.p = p.NewPizza;\r\n          ret.o = o.NewOrder;\r\n          ret.m = (m.step='new');\r\n          if(step==='restart'){\r\n            ret.d.page='Main';\r\n            ret.d.bot=true;\r\n            ret.d.botDisplay = 'newOrder';\r\n          } else {\r\n            ret.d.page='Location';\r\n            ret.d.bot=false;\r\n            ret.d.botDisplay=false;\r\n            ret.l = step==='main'?props.locObj:l.ChangeLoc();\r\n          }      \r\n        } else if(botDisp==='complete'){\r\n          if(p!==null){\r\n            const updateProps = {item:'savePizza', pizza:p};\r\n            const newO = o;\r\n            newO.UpdateOrder(updateProps);\r\n            ret.o = newO;\r\n          }\r\n          ret.d.page = 'Final';\r\n          ret.d.bot = false;\r\n          ret.d.botDisplay = false;\r\n        }\r\n      }\r\n      break;    \r\n    default:\r\n  }\r\n  return {\r\n    order:ret.o, \r\n    menu:ret.m, \r\n    display:ret.d, \r\n    currentPizza:ret.p,\r\n    alert:ret.a,\r\n    locObj:ret.l,\r\n  };\r\n}\r\n","class Pizza {\r\n  constructor(id){\r\n    this.id = id;\r\n    this.items = {};\r\n    this.itemMsg = {};       \r\n    this.specinst=null;   \r\n  }\r\n  get NewPizza(){\r\n    const p = new Pizza();\r\n    return p;\r\n  }\r\n  set PizzaItems(props) {\r\n    const t = props.type;\r\n    const values = props.items    \r\n    if(values==={}&&this.items.hasOwnProperty(t)) {\r\n      delete this.items[t];\r\n      delete this.itemMsg[t];\r\n    } else {\r\n      this.items[t]=values;\r\n      this.itemMsg[t]=props.userMsg;\r\n    }        \r\n  }\r\n  GetPizzaItems(type){\r\n    if(this.items===null||!this.items.hasOwnProperty(type)) {\r\n      return null;\r\n    }\r\n    return this.items[type];\r\n  }  \r\n  set SpecialInstructions(value){\r\n    this.specinst=value;\r\n  }\r\n  get SpecialInstructions(){\r\n    if(this.specinst===null){\r\n      return false;\r\n    } else {\r\n      return this.specinst;\r\n    }\r\n  }\r\n  set PizzaID(val){\r\n    this.id = val;\r\n  }  \r\n  get PizzaID(){\r\n    return this.id;\r\n  }\r\n  get PizzaInfo(){    \r\n    return ({\r\n      id: this.id,\r\n      items: this.items,\r\n      itemMsg: this.itemMsg,\r\n      specinst: this.specinst,      \r\n    });\r\n  } \r\n} \r\n\r\nexport default Pizza;","import Items from '../resources/menuItems.json';\r\nimport Options from '../resources/menuOptions.json';\r\nclass ItemMenu{\r\n  constructor(){    \r\n    const arr = function(obj) {      \r\n      let x;\r\n      let ret = [];\r\n      for (x in obj){\r\n        ret = ret.concat(x); \r\n      }\r\n      return ret;\r\n    };    \r\n    this.items = arr(Items);\r\n    this.optList = arr(Options);\r\n    this.stepNum=-1;\r\n    this.outOfScope=false;         \r\n  }\r\n  set step(val){\r\n    if(val==='none')\r\n    {this.outOfScope=true;\r\n    } else {\r\n    this.outOfScope=false;\r\n    this.stepNum=this.getStepNum(val);\r\n    }\r\n\r\n  }\r\n  get step(){\r\n    if(this.outOfScope) {return 'none';}\r\n    return this.getStep(this.stepNum);\r\n  }\r\n  GetUserMsg(props){\r\n    const n = this.GetStepProper(props.type);\r\n    if(!props.hasOwnProperty('items')||props.items===null||props.items===undefined) {\r\n      return `No ${n} selected`\r\n    } else {\r\n      if(props.type==='type'){\r\n        const item = props.items['1'];\r\n        const sID = item.hasOwnProperty('sizes')?item.sizes:false;\r\n        const cID = item.hasOwnProperty('crusts')?item.crusts:false;\r\n        if(!(sID&&cID)){return `No ${n} selected`}\r\n        const size = Options.sizes;\r\n        const crust = Options.crusts;\r\n        const s = size.find((i)=>(i.id===sID));\r\n        const c = crust.find((i)=>(i.id===cID));\r\n        return `This pizza is a ${s.caption} ${c.caption}`;\r\n      } else {\r\n        let hasHalf=false;\r\n        const itemValues = Items[props.type];\r\n        const item = itemValues.values;\r\n        const half = itemValues.half?Options.half:false;\r\n        const qty = itemValues.qty?Options.qty:false;\r\n        const inc = props.items;\r\n        const msg = item.map((i)=>{\r\n          const isSel = inc.hasOwnProperty(i.id);\r\n          if(!isSel){return {name:false}}\r\n          const v = inc[i.id];\r\n          const name = i.caption;          \r\n          const vHalf = half?v.half:'2';\r\n          const vQty = qty?v.qty:'2';\r\n          const h = half?half.filter((i)=>(i.id===vHalf))[0]:false;\r\n          const q = qty?qty.filter((i)=>(i.id===vQty))[0]:false;\r\n          if(vHalf!==2){hasHalf=true};\r\n          return {name:name, half:h?h.caption:'', qty:q?q.caption:'', hID:parseInt(vHalf)}\r\n        })\r\n        const ret = msg.filter((i)=>{return i.name});\r\n        if(ret.length>1){ret.sort((a,b)=>{return a.hID-b.hID});};\r\n        if(ret.length===0){return `No ${n} selected`};\r\n        const retArray = ret.map((i)=>{\r\n          if(!i.name) {return ''};\r\n          return `${i.qty} ${i.name}${hasHalf?` ${i.half}`:''}`\r\n        })\r\n        return retArray.toString();\r\n      }      \r\n    }    \r\n  }\r\n  GetCaption(src,type,id){\r\n    const item = (m,t,id)=>{\r\n      switch(m){\r\n        case 'items':\r\n        const i = (t)=>{\r\n          switch(t){\r\n            case 'type':\r\n              return Items.type.values;\r\n            case 'sauces':\r\n              return Items.sauces.values;\r\n            case 'cheeses':\r\n              return Items.cheeses.values\r\n            case 'meats':\r\n               return Items.meats.values;\r\n            case 'nonmeats':\r\n              return Items.nonmeats.values;\r\n            default:\r\n              return null;\r\n          }\r\n        }\r\n        const item= i(t);\r\n        const f = item.find((i)=>i.id===id);\r\n        const cap = f===undefined?'':f.caption;  \r\n        return cap\r\n        case 'opts':\r\n          const o = (t)=>{\r\n            switch(t){\r\n              case 'crusts':\r\n                return Options.crusts;\r\n              case 'sizes':\r\n                return Options.sizes;\r\n              case 'qty':\r\n                return Options.qty;\r\n              case 'half':\r\n                 return Options.half;\r\n              case 'allergy':\r\n                return Options.allergy;\r\n              default:\r\n                return null;\r\n            }\r\n          }\r\n          const opt= o(t);\r\n          const a = opt.find((i)=>i.id===id);\r\n          const oc = a===undefined?'':a.caption; \r\n          return oc\r\n        default:\r\n          return null;}}   \r\n    return item(src,type,id);\r\n  }\r\n  GetDescription(src,type,id){\r\n    const item = (m,t,id)=> {\r\n      switch(m) {\r\n        case 'items':\r\n          const i = (t)=>{\r\n            switch(t){\r\n              case 'type':\r\n                return Items.type.values;\r\n              case 'sauces':\r\n                return Items.sauces.values;\r\n              case 'cheeses':\r\n                return Items.cheeses.values\r\n              case 'meats':\r\n                 return Items.meats.values;\r\n              case 'nonmeats':\r\n                return Items.nonmeats.values;\r\n              default:\r\n                return null;\r\n            }\r\n          }\r\n          const item= i(t);\r\n          const f = item.find((i)=>i.id===id);\r\n          const cap = f===undefined?'':f.description;  \r\n          return cap\r\n          case 'opts':\r\n            const o = (t)=>{\r\n              switch(t){\r\n                case 'crusts':\r\n                  return Options.crusts;\r\n                case 'sizes':\r\n                  return Options.sizes;\r\n                case 'qty':\r\n                  return Options.qty;\r\n                case 'half':\r\n                   return Options.half;\r\n                case 'allergy':\r\n                  return Options.allergy;\r\n                default:\r\n                  return null;\r\n              }\r\n            }\r\n            const opt= o(t);\r\n            const a = opt.find((i)=>i.id===id);\r\n            const oc = a===undefined?'':a.description; \r\n            return oc\r\n      default:\r\n        return null;\r\n      }\r\n    }\r\n    return item(src,type,id);\r\n  }\r\n  GetStepProper(step){\r\n    if(this.outOfScope) {return 'none';}\r\n    if(step==='specialinstmsg'){\r\n      return 'Special Instructions'\r\n    } else if(step==='ordername'){\r\n      return 'Name'\r\n    } else {     \r\n      const c = this.checkStep(step);\r\n      const s = c?step:this.getStep(this.getStepNum(step))\r\n      if(s==='specialinstmsg'||s==='ordername'){\r\n        return this.GetStepProper(s)\r\n      } else if(!c){\r\n        return ''\r\n      } else {\r\n        return Items[s].properU\r\n      }\r\n      \r\n    }\r\n  }\r\n  GetStepTrigger(step){\r\n    if(this.outOfScope) {return 'none';}\r\n    const s = this.getStep(this.getStepNum(step)) \r\n    if(this.checkStep(s)){\r\n      return 'pizzabuilder'\r\n    } else {\r\n      return s\r\n    }\r\n  }\r\n  get StepObject(){\r\n    if(this.outOfScope) {return false;}\r\n    const step = this.step;\r\n    if(!this.checkStep(step)){return false};\r\n    const info = Items[step];\r\n    return {\r\n      menuType: step,\r\n      botMsg:info.msg,\r\n      caption:info.properU,\r\n      properL:info.properL,\r\n      next:this.GetStepProper('next'),\r\n      prev:this.GetStepProper('prev'),\r\n      content: {        \r\n        sizes:info.sizes?Options.sizes:false,\r\n        crusts:info.crusts?Options.crusts:false,\r\n        half:info.half?Options.half:false,\r\n        qty:info.qty?Options.qty:false,\r\n        values:info.values,\r\n        allergy:Options.allergy,\r\n      }\r\n    };\r\n  }  \r\n  checkStep(step){\r\n    const i = this.items.findIndex(s => s === step)\r\n    return i!==-1\r\n  }\r\n  getStep(i){\r\n    if(i>=this.items.length){      \r\n      return 'specialinstmsg';\r\n    } else if(i<0){\r\n      return '2';\r\n    } else {     \r\n      return this.items[i];      \r\n    }   \r\n  }\r\n  getStepNum(val){\r\n    const i = this.stepNum;\r\n    switch (val){\r\n      case 'next':               \r\n        return i+1;        \r\n      case 'prev':\r\n        return i-1;        \r\n      case 'new':\r\n        return 0;        \r\n      default:\r\n        const s = this.items.findIndex(s => s === val);\r\n        return s<0?this.stepNum:s;        \r\n    }\r\n  }  \r\n  get stepList(){\r\n    return this.items.map((i)=>{\r\n      const name = this.GetStepProper(i);\r\n      return {val:i, name:name}\r\n    });\r\n  } \r\n}\r\nexport default ItemMenu;","import React from 'react';\r\nimport Order from './PizzaOrder';\r\nimport {Header, MainArea, SliceBot} from './PageDisplay'\r\nimport '../css/App.css';\r\nimport '../css/DisplayMainArea.css';\r\nimport BotAlertMsg from './AppElements/Util/BotAlertMsg';\r\nimport {reducer} from './AppReducer';\r\nimport Pizza from './Pizza';\r\nimport ItemMenu from './itemMenu';\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);       \r\n    this.updateAppState =this.updateAppState.bind(this);\r\n    this.getBotState = this.getBotState.bind(this);\r\n    this.completeOrder = this.completeOrder.bind(this);          \r\n    this.state = {      \r\n      alert:false,      \r\n      display:{\r\n        page:'Location',\r\n        bot:false,\r\n        botDisplay:false,        \r\n      },             \r\n      locObj: this.props.locObj,           \r\n      order: new Order(),\r\n      menu: new ItemMenu(),\r\n      currentPizza: new Pizza(0),                       \r\n    };\r\n    this.input = React.createRef();            \r\n  }\r\n  updateAppState = (props) => {    \r\n    this.setState(\r\n      reducer({\r\n        type:props.type,\r\n        values:props.values,\r\n      })\r\n    )\r\n  }\r\n  completeOrder(){\r\n    const updateData={\r\n      type:'special',\r\n      values:{\r\n      appValues:{       \r\n        botDisplay:'complete',\r\n      }}}\r\n    this.updateAppState(updateData);\r\n  }\r\n  getBotState(){\r\n    const botState = {\r\n      showBot:this.state.display.bot,\r\n      loc:this.state.locObj,\r\n      botDisplay:this.state.display.botDisplay,\r\n      order:this.state.order,\r\n      menu: this.state.menu,\r\n      pizza:this.state.currentPizza,\r\n    }\r\n    return botState\r\n  }\r\n  reset(){\r\n    const values= {                 \r\n      order: new Order()}\r\n    this.updateAppState({type:'reset', values:values})\r\n  }  \r\n  render(){\r\n    const alert = this.state.alert?<BotAlertMsg values={this.state.alert} onClose={(p)=>{return this.updateAppState(p)}}/>:null;\r\n    const {display, locObj}=this.state;\r\n    const showPage = display.page;\r\n    const showBot = display.bot;\r\n    \r\n    return (\r\n      <div className=\"sliceBot\">\r\n        <Header cnt={this.state.order.PizzaCount} locObj={locObj} updateAppState={(p)=>{return this.updateAppState(p)}}/>\r\n        <MainArea showPage={showPage} getBotState={this.getBotState} locObj={locObj} updateAppState={(p)=>{return this.updateAppState(p)}} forwardedRef={this.input}/>\r\n        <SliceBot showBot={showBot} getBotState={this.getBotState} completeOrder={this.completeOrder} updateAppState={(p)=>{return this.updateAppState(p)}}/>\r\n        {alert}\r\n      </div>\r\n    )      \r\n  }\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './css/index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'jquery/dist/jquery.js';\r\nimport 'popper.js/dist/umd/popper.js';\r\nimport 'bootstrap/dist/js/bootstrap.js';\r\nimport Location from './components/Location'\r\n//import {BrowserRouter as Router, Route} from 'react-router-dom';\r\n\r\nLocationFactory().then(obj => {  \r\n /* const obj = LocationFactory();*/\r\n  ReactDOM.render(\r\n  <React.StrictMode>\r\n    {/*<Router>\r\n    <Route component={() => */}\r\n    <App locObj={obj}/>      \r\n    {/*}/>\r\n    </Router>*/}\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n  );\r\n})\r\nfunction LocationFactory(){\r\n  let x = new Location();\r\n  return x.initLoc();\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import {lookup,lookupByCoords} from 'zipcodes';\r\nimport stores from '../resources/stores.json';\r\n\r\nclass Location {\r\n  #geo = null;\r\n  #user = null;\r\n  #store = null;\r\n  #search = null;\r\n  #prevObj = null;\r\n  constructor(){\r\n    this.storeInfo = this.storeInfo.bind(this);\r\n    this.initLoc = this.initLoc.bind(this);\r\n    this.resolveGeoLoc = this.resolveGeoLoc.bind(this);\r\n    this.resetLoc = this.resetLoc.bind(this);    \r\n    this.#geo = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};     \r\n    this.#user = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};  \r\n    this.#store = {\r\n      current: '0',\r\n      previous: '0'};\r\n    this.#search = {\r\n      step:'search',\r\n      method: '',\r\n      searchLoc: '',\r\n      isResolved: false,\r\n      hasErr: false,\r\n      errMsg: '',\r\n    }\r\n  }\r\n  get searchStep(){\r\n    return this.#search.step;\r\n  }\r\n  ChangeLoc(){\r\n    this.#prevObj = {\r\n      user:this.#user,\r\n      store:this.#store,\r\n      search:this.#search,\r\n      }   \r\n    this.#user.isResolved=false;\r\n    this.#user.entryErr=false;\r\n    this.#user.errMsg='';\r\n    this.#user.zip='';\r\n    this.#user.cityState='';            \r\n    this.#store.previous=this.#store.current;\r\n    this.#store.current = 0;     \r\n    this.#search.step='search';\r\n    this.#search.method='';\r\n    this.#search.searchLoc='';\r\n    this.#search.isResolved=false;\r\n    this.#search.hasErr=false;\r\n    this.#search.errMsg='';    \r\n  }\r\n  resetLoc(){\r\n    this.#user = {\r\n      isResolved: false,\r\n      entryErr: false,\r\n      errMsg: '',\r\n      zip: '',\r\n      cityState: ''};  \r\n    this.#store = {\r\n      current: '0',\r\n      previous: '0',      \r\n      didChange: false};\r\n    this.#search = {\r\n      step:'search',\r\n      method: '',\r\n      searchLoc: '',\r\n      isResolved: false,\r\n      hasErr: false,\r\n      errMsg: '',\r\n    } \r\n  }  \r\n  get geoZip() {\r\n    if(this.#geo.isResolved && !this.#geo.entryErr) {\r\n      return this.#geo.zip;\r\n    } else {\r\n      return 'NoGeo';\r\n    }\r\n  } \r\n  get geoCityState(){\r\n    if(this.#geo.isResolved && !this.geoErr) {\r\n      return this.#geo.cityState;\r\n    } else {\r\n      return 'Geo Location Error';\r\n    }   \r\n  }\r\n  get geoErr(){\r\n    return this.#geo.entryErr;\r\n  }\r\n  get geoErrMsg(){\r\n    return this.geoErr?this.#geo.errMsg:'';\r\n  }\r\n  set userZip(val){\r\n    let z = val.trim();    \r\n    let r = false;\r\n    let e = false;\r\n    let m = '';\r\n    let cs = '';\r\n    const l = lookup(z);\r\n    if(typeof l !==\"undefined\"){\r\n      const c = l.city;\r\n      const s = l.state;        \r\n      r = true;        \r\n      cs = c + ', ' + s;\r\n    } else {\r\n      //invalid zip code\r\n      z = '';  \r\n      r = false;\r\n      e = true;\r\n      m = 'Enter a Valid US Zip Code';        \r\n    }   \r\n    this.#user = {\r\n      isResolved: r,\r\n      entryErr: e,\r\n      errMsg: m,\r\n      zip: z,\r\n      cityState: cs,\r\n    };\r\n  }\r\n  get userZip() {\r\n    if(this.#user.isResolved && !this.#user.entryErr) {\r\n      return this.#user.zip;\r\n    } else {\r\n      return 'NoUser';\r\n    }\r\n  } \r\n  get userCityState(){\r\n    if(this.#user.isResolved && !this.userErr) {\r\n      return this.#user.cityState;\r\n    } else {\r\n      return 'User Entry Error';\r\n    }   \r\n  }\r\n  get userErr(){\r\n    return this.#user.entryErr;\r\n  }\r\n  get userErrMsg(){\r\n    return this.userErr?this.#user.errMsg:'';\r\n  }\r\n  set storeLoc(val){\r\n    const c = this.#store.current;\r\n    const p = this.#store.previous;\r\n    if(p!==0&&val===p){\r\n      this.#search.step='done';\r\n      this.#user=this.#prevObj.user;\r\n      this.#store=this.#prevObj.store;\r\n      this.#search=this.#prevObj.search;\r\n      this.#prevObj=null;\r\n    } else if(c!==val){\r\n      this.#search.step='done';      \r\n      this.#store.current = val;\r\n      this.#store.previous = 0;\r\n      this.#prevObj=null;\r\n    }    \r\n  }\r\n  get curStoreID(){\r\n    return this.#store.current;\r\n  }\r\n  get prevStoreID(){\r\n    return this.#store.previous;\r\n  }\r\n  get curStoreInfo(){\r\n    const i = this.#store.current; \r\n    return this.storeInfo(i);\r\n  }\r\n  get prevStoreInfo(){\r\n    const i = this.#store.previous; \r\n    return this.storeInfo(i);\r\n  }\r\n  get searchErr(){\r\n    return this.#search.hasErr;    \r\n  }\r\n  get searchErrMsg(){\r\n      return this.searchErr?this.#search.errMsg:'';\r\n  }\r\n  get searchMeth(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.method;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  get searchLoc(){\r\n    if(this.#search.isResolved){\r\n      return this.#search.searchLoc;\r\n    }\r\n    return 'No Search'\r\n  }\r\n  set search(values){\r\n    this.#search.step = values.step;\r\n    this.#search.method = values.method;\r\n    this.#search.searchLoc = values.loc;\r\n    this.#search.isResolved = values.res;\r\n    this.#search.hasErr= values.err;\r\n    this.#search.errMsg= values.errMsg;\r\n  }\r\n  set storeSearch(method){        \r\n    let values ={\r\n      step:'select',\r\n      method: method.method,\r\n      loc: '',\r\n      res: false,\r\n      err: false,\r\n      errMsg: '',\r\n    };\r\n    if(values.method==='User Entry'){\r\n      this.userZip = method.usrStr;\r\n      if(this.userErr){\r\n        values.step ='search';\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Zip Entry';\r\n      } else {\r\n        values.loc = this.userCityState;\r\n        values.res = true;\r\n      }\r\n    } else if(values.method==='Geo Locate'){\r\n      if(this.geoErr){\r\n        values.step ='search';\r\n        values.method = '';\r\n        values.err= true;\r\n        values.errMsg= 'Invalid Geo Location';\r\n      } else {\r\n        values.loc = this.geoCityState;\r\n        values.res = true;\r\n      }\r\n    } else {\r\n      values.step ='search';\r\n      values.method = '';\r\n      values.err= true;\r\n      values.errMsg= 'Invalid Search Method';\r\n    }\r\n    this.search = values;    \r\n  }\r\n  storeInfo(i){    \r\n    const s = i!==0?stores.stores.find(\r\n      (r) => {return r.id === i;}\r\n    ):false;\r\n    if(!s||s===undefined){\r\n      return {\r\n        name:'Please select a Store',\r\n        isStore:false,        \r\n      }\r\n    } else {\r\n      return s;\r\n    }    \r\n  }\r\n  initLoc() {\r\n    return (this.resolveGeoLoc()\r\n      .then(data => {\r\n        if (data!=='GeoFail' && (data!==null||data!=='')) {\r\n          const c = data.city;\r\n          const s = data.state;\r\n          this.#geo = {\r\n            zip: data.zip,\r\n            cityState: c + ', ' + s,\r\n            isResolved: true,\r\n            entryErr: false,\r\n            errMsg: '',\r\n          };      \r\n        } else if (data==='GeoFail') {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: true,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location is Disabled',\r\n          };\r\n        } else {\r\n          this.#geo = {\r\n            zip: '',\r\n            cityState: '',\r\n            isResolved: false,\r\n            entryErr: true,\r\n            errMsg: 'Geo Location not resolved',\r\n          };\r\n        }\r\n        return this;\r\n      })\r\n    )\r\n  }  \r\n  resolveGeoLoc(){ \r\n    const locOpt = {\r\n      timeout: 5000,\r\n      maximumAge: 0\r\n    };    \r\n    return (new Promise((resolve, reject) => {\r\n      if(\"geolocation\" in navigator) {\r\n        navigator.geolocation.getCurrentPosition((position) => {\r\n          let lat = position.coords.latitude;\r\n          let long = position.coords.longitude;\r\n          const tZip = lookupByCoords(lat,long);                  \r\n          resolve(tZip);\r\n        },(error) => {\r\n          console.log('Error getting location');\r\n          console.error(\"Error Code = \" + error.code + \" - \" + error.message);\r\n          const response = 'GeoFail';\r\n\r\n          resolve(response);  \r\n        },locOpt);\r\n      }\r\n    }, ()=>{\r\n      console.log(\"Promise reject\");   \r\n      }\r\n    ))        \r\n  }\r\n}\r\n\r\nexport default Location;"],"sourceRoot":""}